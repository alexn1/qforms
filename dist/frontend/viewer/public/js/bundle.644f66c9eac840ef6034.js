/*! For license information please see bundle.644f66c9eac840ef6034.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={448:(e,t,n)=>{var r=n(294),s=n(13),o=n(840);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(i(227));var a=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g=Object.prototype.hasOwnProperty,p={},f={};function m(e,t,n,r,s,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){w[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];w[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){w[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){w[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){w[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){w[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){w[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){w[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){w[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function C(e){return e[1].toUpperCase()}function v(e,t,n,r){var s=w.hasOwnProperty(t)?w[t]:null;(null!==s?0===s.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!g.call(f,e)||!g.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(b,C);w[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(b,C);w[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(b,C);w[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){w[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),w.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){w[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,k=60106,F=60107,D=60108,S=60114,N=60109,E=60110,_=60112,M=60113,j=60120,T=60115,V=60116,R=60121,P=60128,O=60129,A=60130,B=60131;if("function"==typeof Symbol&&Symbol.for){var $=Symbol.for;x=$("react.element"),k=$("react.portal"),F=$("react.fragment"),D=$("react.strict_mode"),S=$("react.profiler"),N=$("react.provider"),E=$("react.context"),_=$("react.forward_ref"),M=$("react.suspense"),j=$("react.suspense_list"),T=$("react.memo"),V=$("react.lazy"),R=$("react.block"),$("react.scope"),P=$("react.opaque.id"),O=$("react.debug_trace_mode"),A=$("react.offscreen"),B=$("react.legacy_hidden")}var L,I="function"==typeof Symbol&&Symbol.iterator;function z(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=I&&e[I]||e["@@iterator"])?e:null}function W(e){if(void 0===L)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var H=!1;function U(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var s=e.stack.split("\n"),o=r.stack.split("\n"),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(1!==i||1!==a)do{if(i--,0>--a||s[i]!==o[a])return"\n"+s[i].replace(" at new "," at ")}while(1<=i&&0<=a);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?W(e):""}function K(e){switch(e.tag){case 5:return W(e.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 22:return e=U(e.type._render,!1);case 1:return e=U(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case F:return"Fragment";case k:return"Portal";case S:return"Profiler";case D:return"StrictMode";case M:return"Suspense";case j:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case T:return G(e.type);case R:return G(e._render);case V:t=e._payload,e=e._init;try{return G(e(t))}catch(e){}}return null}function q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return s({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?se(e,t.type,n):t.hasOwnProperty("defaultValue")&&se(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function se(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=s({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ie(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return s({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ue(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function ge(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ge(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var fe,me,we=(me=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((fe=fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function be(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ce={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function ye(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Ce.hasOwnProperty(e)&&Ce[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=ye(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(Ce).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ce[t]=Ce[e]}))}));var ke=s({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fe(e,t){if(t){if(ke[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(i(62))}}function De(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,Ee=null,_e=null;function Me(e){if(e=rs(e)){if("function"!=typeof Ne)throw Error(i(280));var t=e.stateNode;t&&(t=os(t),Ne(e.stateNode,e.type,t))}}function je(e){Ee?_e?_e.push(e):_e=[e]:Ee=e}function Te(){if(Ee){var e=Ee,t=_e;if(_e=Ee=null,Me(e),t)for(e=0;e<t.length;e++)Me(t[e])}}function Ve(e,t){return e(t)}function Re(e,t,n,r,s){return e(t,n,r,s)}function Pe(){}var Oe=Ve,Ae=!1,Be=!1;function $e(){null===Ee&&null===_e||(Pe(),Te())}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=os(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}var Ie=!1;if(d)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(me){Ie=!1}function We(e,t,n,r,s,o,i,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var He=!1,Ue=null,Ke=!1,Ge=null,qe={onError:function(e){He=!0,Ue=e}};function Qe(e,t,n,r,s,o,i,a,l){He=!1,Ue=null,We.apply(qe,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if(Ye(e)!==e)throw Error(i(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var o=s.alternate;if(null===o){if(null!==(r=s.return)){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Xe(s),e;if(o===r)return Xe(s),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,st,ot=!1,it=[],at=null,lt=null,ut=null,ct=new Map,dt=new Map,ht=[],gt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,s){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:s,targetContainers:[r]}}function ft(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function mt(e,t,n,r,s,o){return null===e||e.nativeEvent!==o?(e=pt(t,n,r,s,o),null!==t&&(null!==(t=rs(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function wt(e){var t=ns(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void st(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=rs(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function Ct(e,t,n){bt(e)&&n.delete(t)}function vt(){for(ot=!1;0<it.length;){var e=it[0];if(null!==e.blockedOn){null!==(e=rs(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&it.shift()}null!==at&&bt(at)&&(at=null),null!==lt&&bt(lt)&&(lt=null),null!==ut&&bt(ut)&&(ut=null),ct.forEach(Ct),dt.forEach(Ct)}function yt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,vt)))}function xt(e){function t(t){return yt(t,e)}if(0<it.length){yt(it[0],e);for(var n=1;n<it.length;n++){var r=it[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==at&&yt(at,e),null!==lt&&yt(lt,e),null!==ut&&yt(ut,e),ct.forEach(t),dt.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)wt(n),null===n.blockedOn&&ht.shift()}function kt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ft={animationend:kt("Animation","AnimationEnd"),animationiteration:kt("Animation","AnimationIteration"),animationstart:kt("Animation","AnimationStart"),transitionend:kt("Transition","TransitionEnd")},Dt={},St={};function Nt(e){if(Dt[e])return Dt[e];if(!Ft[e])return e;var t,n=Ft[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return Dt[e]=n[t];return e}d&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete Ft.animationend.animation,delete Ft.animationiteration.animation,delete Ft.animationstart.animation),"TransitionEvent"in window||delete Ft.transitionend.transition);var Et=Nt("animationend"),_t=Nt("animationiteration"),Mt=Nt("animationstart"),jt=Nt("transitionend"),Tt=new Map,Vt=new Map,Rt=["abort","abort",Et,"animationEnd",_t,"animationIteration",Mt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",jt,"transitionEnd","waiting","waiting"];function Pt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],s=e[n+1];s="on"+(s[0].toUpperCase()+s.slice(1)),Vt.set(r,t),Tt.set(r,s),u(s,[r])}}(0,o.unstable_now)();var Ot=8;function At(e){if(0!=(1&e))return Ot=15,1;if(0!=(2&e))return Ot=14,2;if(0!=(4&e))return Ot=13,4;var t=24&e;return 0!==t?(Ot=12,t):0!=(32&e)?(Ot=11,32):0!==(t=192&e)?(Ot=10,t):0!=(256&e)?(Ot=9,256):0!==(t=3584&e)?(Ot=8,t):0!=(4096&e)?(Ot=7,4096):0!==(t=4186112&e)?(Ot=6,t):0!==(t=62914560&e)?(Ot=5,t):67108864&e?(Ot=4,67108864):0!=(134217728&e)?(Ot=3,134217728):0!==(t=805306368&e)?(Ot=2,t):0!=(1073741824&e)?(Ot=1,1073741824):(Ot=8,e)}function Bt(e,t){var n=e.pendingLanes;if(0===n)return Ot=0;var r=0,s=0,o=e.expiredLanes,i=e.suspendedLanes,a=e.pingedLanes;if(0!==o)r=o,s=Ot=15;else if(0!==(o=134217727&n)){var l=o&~i;0!==l?(r=At(l),s=Ot):0!==(a&=o)&&(r=At(a),s=Ot)}else 0!==(o=n&~i)?(r=At(o),s=Ot):0!==a&&(r=At(a),s=Ot);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&i)){if(At(t),s<=Ot)return t;Ot=s}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-Ht(t)),r|=e[n],t&=~s;return r}function $t(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Lt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=It(24&~t))?Lt(10,t):e;case 10:return 0===(e=It(192&~t))?Lt(8,t):e;case 8:return 0===(e=It(3584&~t))&&(0===(e=It(4186112&~t))&&(e=512)),e;case 2:return 0===(t=It(805306368&~t))&&(t=268435456),t}throw Error(i(358,e))}function It(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Wt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ut(e)/Kt|0)|0},Ut=Math.log,Kt=Math.LN2;var Gt=o.unstable_UserBlockingPriority,qt=o.unstable_runWithPriority,Qt=!0;function Yt(e,t,n,r){Ae||Pe();var s=Xt,o=Ae;Ae=!0;try{Re(s,e,t,n,r)}finally{(Ae=o)||$e()}}function Jt(e,t,n,r){qt(Gt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var s;if(Qt)if((s=0==(4&t))&&0<it.length&&-1<gt.indexOf(e))e=pt(null,e,t,n,r),it.push(e);else{var o=Zt(e,t,n,r);if(null===o)s&&ft(e,r);else{if(s){if(-1<gt.indexOf(e))return e=pt(o,e,t,n,r),void it.push(e);if(function(e,t,n,r,s){switch(t){case"focusin":return at=mt(at,e,t,n,r,s),!0;case"dragenter":return lt=mt(lt,e,t,n,r,s),!0;case"mouseover":return ut=mt(ut,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return ct.set(o,mt(ct.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,dt.set(o,mt(dt.get(o)||null,e,t,n,r,s)),!0}return!1}(o,e,t,n,r))return;ft(e,r)}Pr(e,t,r,null,n)}}}function Zt(e,t,n,r){var s=Se(r);if(null!==(s=ns(s))){var o=Ye(s);if(null===o)s=null;else{var i=o.tag;if(13===i){if(null!==(s=Je(o)))return s;s=null}else if(3===i){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Pr(e,t,r,s,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,s="value"in en?en.value:en.textContent,o=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[o-t];t++);return nn=s.slice(e,1<t?1-t:void 0)}function sn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function an(){return!1}function ln(e){function t(t,n,r,s,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?on:an,this.isPropagationStopped=an,this}return s(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var un,cn,dn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gn=ln(hn),pn=s({},hn,{view:0,detail:0}),fn=ln(pn),mn=s({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&"mousemove"===e.type?(un=e.screenX-dn.screenX,cn=e.screenY-dn.screenY):cn=un=0,dn=e),un)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),wn=ln(mn),bn=ln(s({},mn,{dataTransfer:0})),Cn=ln(s({},pn,{relatedTarget:0})),vn=ln(s({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=s({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=ln(yn),kn=ln(s({},hn,{data:0})),Fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return Nn}var _n=s({},pn,{key:function(e){if(e.key){var t=Fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=sn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?sn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?sn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Mn=ln(_n),jn=ln(s({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=ln(s({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Vn=ln(s({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=s({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=ln(Rn),On=[9,13,27,32],An=d&&"CompositionEvent"in window,Bn=null;d&&"documentMode"in document&&(Bn=document.documentMode);var $n=d&&"TextEvent"in window&&!Bn,Ln=d&&(!An||Bn&&8<Bn&&11>=Bn),In=String.fromCharCode(32),zn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function qn(e,t,n,r){je(r),0<(t=Ar(t,"onChange")).length&&(n=new gn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Yn=null;function Jn(e){_r(e,0)}function Xn(e){if(J(ss(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(d){var tr;if(d){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"==typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function sr(){Qn&&(Qn.detachEvent("onpropertychange",or),Yn=Qn=null)}function or(e){if("value"===e.propertyName&&Xn(Yn)){var t=[];if(qn(t,Yn,e,Se(e)),e=Jn,Ae)e(t);else{Ae=!0;try{Ve(e,t)}finally{Ae=!1,$e()}}}}function ir(e,t,n){"focusin"===e?(sr(),Yn=n,(Qn=t).attachEvent("onpropertychange",or)):"focusout"===e&&sr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Yn)}function lr(e,t){if("click"===e)return Xn(t)}function ur(e,t){if("input"===e||"change"===e)return Xn(t)}var cr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},dr=Object.prototype.hasOwnProperty;function hr(e,t){if(cr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!dr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function gr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=gr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=gr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var br=d&&"documentMode"in document&&11>=document.documentMode,Cr=null,vr=null,yr=null,xr=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==Cr||Cr!==X(r)||("selectionStart"in(r=Cr)&&wr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&hr(yr,r)||(yr=r,0<(r=Ar(vr,"onSelect")).length&&(t=new gn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Cr)))}Pt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Pt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Pt(Rt,2);for(var Fr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Dr=0;Dr<Fr.length;Dr++)Vt.set(Fr[Dr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Er(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,o,a,l,u){if(Qe.apply(this,arguments),He){if(!He)throw Error(i(198));var c=Ue;He=!1,Ue=null,Ke||(Ke=!0,Ge=c)}}(r,t,void 0,e),e.currentTarget=null}function _r(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&s.isPropagationStopped())break e;Er(s,a,u),o=l}else for(i=0;i<r.length;i++){if(l=(a=r[i]).instance,u=a.currentTarget,a=a.listener,l!==o&&s.isPropagationStopped())break e;Er(s,a,u),o=l}}}if(Ke)throw e=Ge,Ke=!1,Ge=null,e}function Mr(e,t){var n=is(t),r=e+"__bubble";n.has(r)||(Rr(t,e,2,!1),n.add(r))}var jr="_reactListening"+Math.random().toString(36).slice(2);function Tr(e){e[jr]||(e[jr]=!0,a.forEach((function(t){Nr.has(t)||Vr(t,!1,e,null),Vr(t,!0,e,null)})))}function Vr(e,t,n,r){var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Nr.has(e)){if("scroll"!==e)return;s|=2,o=r}var i=is(o),a=e+"__"+(t?"capture":"bubble");i.has(a)||(t&&(s|=4),Rr(o,e,s,t),i.add(a))}function Rr(e,t,n,r){var s=Vt.get(t);switch(void 0===s?2:s){case 0:s=Yt;break;case 1:s=Jt;break;default:s=Xt}n=s.bind(null,t,n,e),s=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Pr(e,t,n,r,s){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var a=r.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;i=i.return}for(;null!==a;){if(null===(i=ns(a)))return;if(5===(l=i.tag)||6===l){r=o=i;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Be)return e(t,n);Be=!0;try{Oe(e,t,n)}finally{Be=!1,$e()}}((function(){var r=o,s=Se(n),i=[];e:{var a=Tt.get(e);if(void 0!==a){var l=gn,u=e;switch(e){case"keypress":if(0===sn(n))break e;case"keydown":case"keyup":l=Mn;break;case"focusin":u="focus",l=Cn;break;case"focusout":u="blur",l=Cn;break;case"beforeblur":case"afterblur":l=Cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=wn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=bn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Et:case _t:case Mt:l=vn;break;case jt:l=Vn;break;case"scroll":l=fn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=jn}var c=0!=(4&t),d=!c&&"scroll"===e,h=c?null!==a?a+"Capture":null:a;c=[];for(var g,p=r;null!==p;){var f=(g=p).stateNode;if(5===g.tag&&null!==f&&(g=f,null!==h&&(null!=(f=Le(p,h))&&c.push(Or(p,f,g)))),d)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,s),i.push({event:a,listeners:c}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(u=n.relatedTarget||n.fromElement)||!ns(u)&&!u[es])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ns(u):null)&&(u!==(d=Ye(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=wn,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=jn,f="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:ss(l),g=null==u?a:ss(u),(a=new c(f,p+"leave",l,n,s)).target=d,a.relatedTarget=g,f=null,ns(s)===r&&((c=new c(h,p+"enter",u,n,s)).target=g,c.relatedTarget=d,f=c),d=f,l&&u)e:{for(h=u,p=0,g=c=l;g;g=Br(g))p++;for(g=0,f=h;f;f=Br(f))g++;for(;0<p-g;)c=Br(c),p--;for(;0<g-p;)h=Br(h),g--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Br(c),h=Br(h)}c=null}else c=null;null!==l&&$r(i,a,l,c,!1),null!==u&&null!==d&&$r(i,d,u,c,!0)}if("select"===(l=(a=r?ss(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Zn;else if(Gn(a))if(er)m=ur;else{m=ar;var w=ir}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=lr);switch(m&&(m=m(e,r))?qn(i,m,n,s):(w&&w(e,a,r),"focusout"===e&&(w=a._wrapperState)&&w.controlled&&"number"===a.type&&se(a,"number",a.value)),w=r?ss(r):window,e){case"focusin":(Gn(w)||"true"===w.contentEditable)&&(Cr=w,vr=r,yr=null);break;case"focusout":yr=vr=Cr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,kr(i,n,s);break;case"selectionchange":if(br)break;case"keydown":case"keyup":kr(i,n,s)}var b;if(An)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Un?Wn(e,n)&&(C="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(C="onCompositionStart");C&&(Ln&&"ko"!==n.locale&&(Un||"onCompositionStart"!==C?"onCompositionEnd"===C&&Un&&(b=rn()):(tn="value"in(en=s)?en.value:en.textContent,Un=!0)),0<(w=Ar(r,C)).length&&(C=new kn(C,e,null,n,s),i.push({event:C,listeners:w}),b?C.data=b:null!==(b=Hn(n))&&(C.data=b))),(b=$n?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,In);case"textInput":return(e=t.data)===In&&zn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!An&&Wn(e,t)?(e=rn(),nn=tn=en=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Ar(r,"onBeforeInput")).length&&(s=new kn("onBeforeInput","beforeinput",null,n,s),i.push({event:s,listeners:r}),s.data=b))}_r(i,t)}))}function Or(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ar(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,o=s.stateNode;5===s.tag&&null!==o&&(s=o,null!=(o=Le(e,n))&&r.unshift(Or(e,o,s)),null!=(o=Le(e,t))&&r.push(Or(e,o,s))),e=e.return}return r}function Br(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $r(e,t,n,r,s){for(var o=t._reactName,i=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,s?null!=(l=Le(n,o))&&i.unshift(Or(n,l,a)):s||null!=(l=Le(n,o))&&i.push(Or(n,l,a))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}function Lr(){}var Ir=null,zr=null;function Wr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ur="function"==typeof setTimeout?setTimeout:void 0,Kr="function"==typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Jr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Jr,Zr="__reactProps$"+Jr,es="__reactContainer$"+Jr,ts="__reactEvents$"+Jr;function ns(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[es]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Xr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function rs(e){return!(e=e[Xr]||e[es])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ss(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function os(e){return e[Zr]||null}function is(e){var t=e[ts];return void 0===t&&(t=e[ts]=new Set),t}var as=[],ls=-1;function us(e){return{current:e}}function cs(e){0>ls||(e.current=as[ls],as[ls]=null,ls--)}function ds(e,t){ls++,as[ls]=e.current,e.current=t}var hs={},gs=us(hs),ps=us(!1),fs=hs;function ms(e,t){var n=e.type.contextTypes;if(!n)return hs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,o={};for(s in n)o[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ws(e){return null!=(e=e.childContextTypes)}function bs(){cs(ps),cs(gs)}function Cs(e,t,n){if(gs.current!==hs)throw Error(i(168));ds(gs,t),ds(ps,n)}function vs(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(i(108,G(t)||"Unknown",o));return s({},n,r)}function ys(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hs,fs=gs.current,ds(gs,e),ds(ps,ps.current),!0}function xs(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=vs(e,t,fs),r.__reactInternalMemoizedMergedChildContext=e,cs(ps),cs(gs),ds(gs,e)):cs(ps),ds(ps,n)}var ks=null,Fs=null,Ds=o.unstable_runWithPriority,Ss=o.unstable_scheduleCallback,Ns=o.unstable_cancelCallback,Es=o.unstable_shouldYield,_s=o.unstable_requestPaint,Ms=o.unstable_now,Ts=o.unstable_getCurrentPriorityLevel,Vs=o.unstable_ImmediatePriority,Rs=o.unstable_UserBlockingPriority,Ps=o.unstable_NormalPriority,Os=o.unstable_LowPriority,As=o.unstable_IdlePriority,Bs={},$s=void 0!==_s?_s:function(){},Ls=null,Is=null,zs=!1,Ws=Ms(),Hs=1e4>Ws?Ms:function(){return Ms()-Ws};function Us(){switch(Ts()){case Vs:return 99;case Rs:return 98;case Ps:return 97;case Os:return 96;case As:return 95;default:throw Error(i(332))}}function Ks(e){switch(e){case 99:return Vs;case 98:return Rs;case 97:return Ps;case 96:return Os;case 95:return As;default:throw Error(i(332))}}function Gs(e,t){return e=Ks(e),Ds(e,t)}function qs(e,t,n){return e=Ks(e),Ss(e,t,n)}function Qs(){if(null!==Is){var e=Is;Is=null,Ns(e)}Ys()}function Ys(){if(!zs&&null!==Ls){zs=!0;var e=0;try{var t=Ls;Gs(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ls=null}catch(t){throw null!==Ls&&(Ls=Ls.slice(e+1)),Ss(Vs,Qs),t}finally{zs=!1}}}var Js=y.ReactCurrentBatchConfig;function Xs(e,t){if(e&&e.defaultProps){for(var n in t=s({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Zs=us(null),eo=null,to=null,no=null;function ro(){no=to=eo=null}function so(e){var t=Zs.current;cs(Zs),e.type._context._currentValue=t}function oo(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function io(e,t){eo=e,no=to=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Bi=!0),e.firstContext=null)}function ao(e,t){if(no!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(no=e,t=1073741823),t={context:e,observedBits:t,next:null},null===to){if(null===eo)throw Error(i(308));to=t,eo.dependencies={lanes:0,firstContext:t,responders:null}}else to=to.next=t;return e._currentValue}var lo=!1;function uo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function co(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ho(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function go(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function po(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?s=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?s=o=t:o=o.next=t}else s=o=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fo(e,t,n,r){var o=e.updateQueue;lo=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var u=l,c=u.next;u.next=null,null===a?i=c:a.next=c,a=u;var d=e.alternate;if(null!==d){var h=(d=d.updateQueue).lastBaseUpdate;h!==a&&(null===h?d.firstBaseUpdate=c:h.next=c,d.lastBaseUpdate=u)}}if(null!==i){for(h=o.baseState,a=0,d=c=u=null;;){l=i.lane;var g=i.eventTime;if((r&l)===l){null!==d&&(d=d.next={eventTime:g,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var p=e,f=i;switch(l=t,g=n,f.tag){case 1:if("function"==typeof(p=f.payload)){h=p.call(g,h,l);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(l="function"==typeof(p=f.payload)?p.call(g,h,l):p))break e;h=s({},h,l);break e;case 2:lo=!0}}null!==i.callback&&(e.flags|=32,null===(l=o.effects)?o.effects=[i]:l.push(i))}else g={eventTime:g,lane:l,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=g,u=h):d=d.next=g,a|=l;if(null===(i=i.next)){if(null===(l=o.shared.pending))break;i=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===d&&(u=h),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=d,za|=a,e.lanes=a,e.memoizedState=h}}function mo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!=typeof s)throw Error(i(191,s));s.call(r)}}}var wo=(new r.Component).refs;function bo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:s({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Co={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=gl(),s=pl(e),o=ho(r,s);o.payload=t,null!=n&&(o.callback=n),go(e,o),fl(e,s,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=gl(),s=pl(e),o=ho(r,s);o.tag=1,o.payload=t,null!=n&&(o.callback=n),go(e,o),fl(e,s,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=gl(),r=pl(e),s=ho(n,r);s.tag=2,null!=t&&(s.callback=t),go(e,s),fl(e,r,n)}};function vo(e,t,n,r,s,o,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(s,o))}function yo(e,t,n){var r=!1,s=hs,o=t.contextType;return"object"==typeof o&&null!==o?o=ao(o):(s=ws(t)?fs:gs.current,o=(r=null!=(r=t.contextTypes))?ms(e,s):hs),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Co,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function xo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Co.enqueueReplaceState(t,t.state,null)}function ko(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs=wo,uo(e);var o=t.contextType;"object"==typeof o&&null!==o?s.context=ao(o):(o=ws(t)?fs:gs.current,s.context=ms(e,o)),fo(e,n,s,r),s.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(bo(e,t,o,n),s.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(t=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&Co.enqueueReplaceState(s,s.state,null),fo(e,n,s,r),s.state=e.memoizedState),"function"==typeof s.componentDidMount&&(e.flags|=4)}var Fo=Array.isArray;function Do(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;t===wo&&(t=r.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!=typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function So(e,t){if("textarea"!==e.type)throw Error(i(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function No(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Gl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Jl(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=s(t,n.props)).ref=Do(e,t,n),r.return=e,r):((r=ql(n.type,n.key,n.props,null,e.mode,r)).ref=Do(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xl(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Ql(n,e.mode,r,o)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Jl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case x:return(n=ql(t.type,t.key,t.props,null,e.mode,n)).ref=Do(e,null,t),n.return=e,n;case k:return(t=Xl(t,e.mode,n)).return=e,t}if(Fo(t)||z(t))return(t=Ql(t,e.mode,n,null)).return=e,t;So(e,t)}return null}function g(e,t,n,r){var s=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==s?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===s?n.type===F?d(e,t,n.props.children,r,s):u(e,t,n,r):null;case k:return n.key===s?c(e,t,n,r):null}if(Fo(n)||z(n))return null!==s?null:d(e,t,n,r,null);So(e,n)}return null}function p(e,t,n,r,s){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"==typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===F?d(t,e,r.props.children,s,r.key):u(t,e,r,s);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s)}if(Fo(r)||z(r))return d(t,e=e.get(n)||null,r,s,null);So(t,r)}return null}function f(s,i,a,l){for(var u=null,c=null,d=i,f=i=0,m=null;null!==d&&f<a.length;f++){d.index>f?(m=d,d=null):m=d.sibling;var w=g(s,d,a[f],l);if(null===w){null===d&&(d=m);break}e&&d&&null===w.alternate&&t(s,d),i=o(w,i,f),null===c?u=w:c.sibling=w,c=w,d=m}if(f===a.length)return n(s,d),u;if(null===d){for(;f<a.length;f++)null!==(d=h(s,a[f],l))&&(i=o(d,i,f),null===c?u=d:c.sibling=d,c=d);return u}for(d=r(s,d);f<a.length;f++)null!==(m=p(d,s,f,a[f],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?f:m.key),i=o(m,i,f),null===c?u=m:c.sibling=m,c=m);return e&&d.forEach((function(e){return t(s,e)})),u}function m(s,a,l,u){var c=z(l);if("function"!=typeof c)throw Error(i(150));if(null==(l=c.call(l)))throw Error(i(151));for(var d=c=null,f=a,m=a=0,w=null,b=l.next();null!==f&&!b.done;m++,b=l.next()){f.index>m?(w=f,f=null):w=f.sibling;var C=g(s,f,b.value,u);if(null===C){null===f&&(f=w);break}e&&f&&null===C.alternate&&t(s,f),a=o(C,a,m),null===d?c=C:d.sibling=C,d=C,f=w}if(b.done)return n(s,f),c;if(null===f){for(;!b.done;m++,b=l.next())null!==(b=h(s,b.value,u))&&(a=o(b,a,m),null===d?c=b:d.sibling=b,d=b);return c}for(f=r(s,f);!b.done;m++,b=l.next())null!==(b=p(f,s,m,b.value,u))&&(e&&null!==b.alternate&&f.delete(null===b.key?m:b.key),a=o(b,a,m),null===d?c=b:d.sibling=b,d=b);return e&&f.forEach((function(e){return t(s,e)})),c}return function(e,r,o,l){var u="object"==typeof o&&null!==o&&o.type===F&&null===o.key;u&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case x:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){if(7===u.tag){if(o.type===F){n(e,u.sibling),(r=s(u,o.props.children)).return=e,e=r;break e}}else if(u.elementType===o.type){n(e,u.sibling),(r=s(u,o.props)).ref=Do(e,u,o),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===F?((r=Ql(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=ql(o.type,o.key,o.props,null,e.mode,l)).ref=Do(e,r,o),l.return=e,e=l)}return a(e);case k:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=s(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xl(o,e.mode,l)).return=e,e=r}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=s(r,o)).return=e,e=r):(n(e,r),(r=Jl(o,e.mode,l)).return=e,e=r),a(e);if(Fo(o))return f(e,r,o,l);if(z(o))return m(e,r,o,l);if(c&&So(e,o),void 0===o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(i(152,G(e.type)||"Component"))}return n(e,r)}}var Eo=No(!0),_o=No(!1),Mo={},jo=us(Mo),To=us(Mo),Vo=us(Mo);function Ro(e){if(e===Mo)throw Error(i(174));return e}function Po(e,t){switch(ds(Vo,t),ds(To,e),ds(jo,Mo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}cs(jo),ds(jo,t)}function Oo(){cs(jo),cs(To),cs(Vo)}function Ao(e){Ro(Vo.current);var t=Ro(jo.current),n=pe(t,e.type);t!==n&&(ds(To,e),ds(jo,n))}function Bo(e){To.current===e&&(cs(jo),cs(To))}var $o=us(0);function Lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Io=null,zo=null,Wo=!1;function Ho(e,t){var n=Ul(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Uo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ko(e){if(Wo){var t=zo;if(t){var n=t;if(!Uo(e,t)){if(!(t=qr(n.nextSibling))||!Uo(e,t))return e.flags=-1025&e.flags|2,Wo=!1,void(Io=e);Ho(Io,n)}Io=e,zo=qr(t.firstChild)}else e.flags=-1025&e.flags|2,Wo=!1,Io=e}}function Go(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Io=e}function qo(e){if(e!==Io)return!1;if(!Wo)return Go(e),Wo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Hr(t,e.memoizedProps))for(t=zo;t;)Ho(e,t),t=qr(t.nextSibling);if(Go(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){zo=qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}zo=null}}else zo=Io?qr(e.stateNode.nextSibling):null;return!0}function Qo(){zo=Io=null,Wo=!1}var Yo=[];function Jo(){for(var e=0;e<Yo.length;e++)Yo[e]._workInProgressVersionPrimary=null;Yo.length=0}var Xo=y.ReactCurrentDispatcher,Zo=y.ReactCurrentBatchConfig,ei=0,ti=null,ni=null,ri=null,si=!1,oi=!1;function ii(){throw Error(i(321))}function ai(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function li(e,t,n,r,s,o){if(ei=o,ti=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xo.current=null===e||null===e.memoizedState?Ri:Pi,e=n(r,s),oi){o=0;do{if(oi=!1,!(25>o))throw Error(i(301));o+=1,ri=ni=null,t.updateQueue=null,Xo.current=Oi,e=n(r,s)}while(oi)}if(Xo.current=Vi,t=null!==ni&&null!==ni.next,ei=0,ri=ni=ti=null,si=!1,t)throw Error(i(300));return e}function ui(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ri?ti.memoizedState=ri=e:ri=ri.next=e,ri}function ci(){if(null===ni){var e=ti.alternate;e=null!==e?e.memoizedState:null}else e=ni.next;var t=null===ri?ti.memoizedState:ri.next;if(null!==t)ri=t,ni=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ni=e).memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},null===ri?ti.memoizedState=ri=e:ri=ri.next=e}return ri}function di(e,t){return"function"==typeof t?t(e):t}function hi(e){var t=ci(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ni,s=r.baseQueue,o=n.pending;if(null!==o){if(null!==s){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(null!==s){s=s.next,r=r.baseState;var l=a=o=null,u=s;do{var c=u.lane;if((ei&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(a=l=d,o=r):l=l.next=d,ti.lanes|=c,za|=c}u=u.next}while(null!==u&&u!==s);null===l?o=r:l.next=a,cr(r,t.memoizedState)||(Bi=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function gi(e){var t=ci(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(null!==s){n.pending=null;var a=s=s.next;do{o=e(o,a.action),a=a.next}while(a!==s);cr(o,t.memoizedState)||(Bi=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function pi(e,t,n){var r=t._getVersion;r=r(t._source);var s=t._workInProgressVersionPrimary;if(null!==s?e=s===r:(e=e.mutableReadLanes,(e=(ei&e)===e)&&(t._workInProgressVersionPrimary=r,Yo.push(t))),e)return n(t._source);throw Yo.push(t),Error(i(350))}function fi(e,t,n,r){var s=Ra;if(null===s)throw Error(i(349));var o=t._getVersion,a=o(t._source),l=Xo.current,u=l.useState((function(){return pi(s,t,n)})),c=u[1],d=u[0];u=ri;var h=e.memoizedState,g=h.refs,p=g.getSnapshot,f=h.source;h=h.subscribe;var m=ti;return e.memoizedState={refs:g,source:t,subscribe:r},l.useEffect((function(){g.getSnapshot=n,g.setSnapshot=c;var e=o(t._source);if(!cr(a,e)){e=n(t._source),cr(d,e)||(c(e),e=pl(m),s.mutableReadLanes|=e&s.pendingLanes),e=s.mutableReadLanes,s.entangledLanes|=e;for(var r=s.entanglements,i=e;0<i;){var l=31-Ht(i),u=1<<l;r[l]|=e,i&=~u}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=g.getSnapshot,n=g.setSnapshot;try{n(e(t._source));var r=pl(m);s.mutableReadLanes|=r&s.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),cr(p,n)&&cr(f,t)&&cr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:di,lastRenderedState:d}).dispatch=c=Ti.bind(null,ti,e),u.queue=e,u.baseQueue=null,d=pi(s,t,n),u.memoizedState=u.baseState=d),d}function mi(e,t,n){return fi(ci(),e,t,n)}function wi(e){var t=ui();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:di,lastRenderedState:e}).dispatch=Ti.bind(null,ti,e),[t.memoizedState,e]}function bi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ti.updateQueue)?(t={lastEffect:null},ti.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ci(e){return e={current:e},ui().memoizedState=e}function vi(){return ci().memoizedState}function yi(e,t,n,r){var s=ui();ti.flags|=e,s.memoizedState=bi(1|t,n,void 0,void 0===r?null:r)}function xi(e,t,n,r){var s=ci();r=void 0===r?null:r;var o=void 0;if(null!==ni){var i=ni.memoizedState;if(o=i.destroy,null!==r&&ai(r,i.deps))return void bi(t,n,o,r)}ti.flags|=e,s.memoizedState=bi(1|t,n,o,r)}function ki(e,t){return yi(516,4,e,t)}function Fi(e,t){return xi(516,4,e,t)}function Di(e,t){return xi(4,2,e,t)}function Si(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ni(e,t,n){return n=null!=n?n.concat([e]):null,xi(4,2,Si.bind(null,t,e),n)}function Ei(){}function _i(e,t){var n=ci();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ai(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Mi(e,t){var n=ci();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ai(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ji(e,t){var n=Us();Gs(98>n?98:n,(function(){e(!0)})),Gs(97<n?97:n,(function(){var n=Zo.transition;Zo.transition=1;try{e(!1),t()}finally{Zo.transition=n}}))}function Ti(e,t,n){var r=gl(),s=pl(e),o={lane:s,action:n,eagerReducer:null,eagerState:null,next:null},i=t.pending;if(null===i?o.next=o:(o.next=i.next,i.next=o),t.pending=o,i=e.alternate,e===ti||null!==i&&i===ti)oi=si=!0;else{if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=i(a,n);if(o.eagerReducer=i,o.eagerState=l,cr(l,a))return}catch(e){}fl(e,s,r)}}var Vi={readContext:ao,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useOpaqueIdentifier:ii,unstable_isNewReconciler:!1},Ri={readContext:ao,useCallback:function(e,t){return ui().memoizedState=[e,void 0===t?null:t],e},useContext:ao,useEffect:ki,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,yi(4,2,Si.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yi(4,2,e,t)},useMemo:function(e,t){var n=ui();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ui();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ti.bind(null,ti,e),[r.memoizedState,e]},useRef:Ci,useState:wi,useDebugValue:Ei,useDeferredValue:function(e){var t=wi(e),n=t[0],r=t[1];return ki((function(){var t=Zo.transition;Zo.transition=1;try{r(e)}finally{Zo.transition=t}}),[e]),n},useTransition:function(){var e=wi(!1),t=e[0];return Ci(e=ji.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ui();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fi(r,e,t,n)},useOpaqueIdentifier:function(){if(Wo){var e=!1,t=function(e){return{$$typeof:P,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(i(355))})),n=wi(t)[1];return 0==(2&ti.mode)&&(ti.flags|=516,bi(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return wi(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Pi={readContext:ao,useCallback:_i,useContext:ao,useEffect:Fi,useImperativeHandle:Ni,useLayoutEffect:Di,useMemo:Mi,useReducer:hi,useRef:vi,useState:function(){return hi(di)},useDebugValue:Ei,useDeferredValue:function(e){var t=hi(di),n=t[0],r=t[1];return Fi((function(){var t=Zo.transition;Zo.transition=1;try{r(e)}finally{Zo.transition=t}}),[e]),n},useTransition:function(){var e=hi(di)[0];return[vi().current,e]},useMutableSource:mi,useOpaqueIdentifier:function(){return hi(di)[0]},unstable_isNewReconciler:!1},Oi={readContext:ao,useCallback:_i,useContext:ao,useEffect:Fi,useImperativeHandle:Ni,useLayoutEffect:Di,useMemo:Mi,useReducer:gi,useRef:vi,useState:function(){return gi(di)},useDebugValue:Ei,useDeferredValue:function(e){var t=gi(di),n=t[0],r=t[1];return Fi((function(){var t=Zo.transition;Zo.transition=1;try{r(e)}finally{Zo.transition=t}}),[e]),n},useTransition:function(){var e=gi(di)[0];return[vi().current,e]},useMutableSource:mi,useOpaqueIdentifier:function(){return gi(di)[0]},unstable_isNewReconciler:!1},Ai=y.ReactCurrentOwner,Bi=!1;function $i(e,t,n,r){t.child=null===e?_o(t,null,n,r):Eo(t,e.child,n,r)}function Li(e,t,n,r,s){n=n.render;var o=t.ref;return io(t,s),r=li(e,t,n,r,o,s),null===e||Bi?(t.flags|=1,$i(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~s,ia(e,t,s))}function Ii(e,t,n,r,s,o){if(null===e){var i=n.type;return"function"!=typeof i||Kl(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ql(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,zi(e,t,i,r,s,o))}return i=e.child,0==(s&o)&&(s=i.memoizedProps,(n=null!==(n=n.compare)?n:hr)(s,r)&&e.ref===t.ref)?ia(e,t,o):(t.flags|=1,(e=Gl(i,r)).ref=t.ref,e.return=t,t.child=e)}function zi(e,t,n,r,s,o){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Bi=!1,0==(o&s))return t.lanes=e.lanes,ia(e,t,o);0!=(16384&e.flags)&&(Bi=!0)}return Ui(e,t,n,r,o)}function Wi(e,t,n){var r=t.pendingProps,s=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},kl(t,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},kl(t,e),null;t.memoizedState={baseLanes:0},kl(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,kl(t,r);return $i(e,t,s,n),t.child}function Hi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ui(e,t,n,r,s){var o=ws(n)?fs:gs.current;return o=ms(t,o),io(t,s),n=li(e,t,n,r,o,s),null===e||Bi?(t.flags|=1,$i(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~s,ia(e,t,s))}function Ki(e,t,n,r,s){if(ws(n)){var o=!0;ys(t)}else o=!1;if(io(t,s),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),yo(t,n,r),ko(t,n,r,s),r=!0;else if(null===e){var i=t.stateNode,a=t.memoizedProps;i.props=a;var l=i.context,u=n.contextType;"object"==typeof u&&null!==u?u=ao(u):u=ms(t,u=ws(n)?fs:gs.current);var c=n.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(a!==r||l!==u)&&xo(t,i,r,u),lo=!1;var h=t.memoizedState;i.state=h,fo(t,r,i,s),l=t.memoizedState,a!==r||h!==l||ps.current||lo?("function"==typeof c&&(bo(t,n,c,r),l=t.memoizedState),(a=lo||vo(t,n,a,r,h,l,u))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4)):("function"==typeof i.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=u,r=a):("function"==typeof i.componentDidMount&&(t.flags|=4),r=!1)}else{i=t.stateNode,co(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Xs(t.type,a),i.props=u,d=t.pendingProps,h=i.context,"object"==typeof(l=n.contextType)&&null!==l?l=ao(l):l=ms(t,l=ws(n)?fs:gs.current);var g=n.getDerivedStateFromProps;(c="function"==typeof g||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(a!==d||h!==l)&&xo(t,i,r,l),lo=!1,h=t.memoizedState,i.state=h,fo(t,r,i,s);var p=t.memoizedState;a!==d||h!==p||ps.current||lo?("function"==typeof g&&(bo(t,n,g,r),p=t.memoizedState),(u=lo||vo(t,n,u,r,h,p,l))?(c||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=u):("function"!=typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Gi(e,t,n,r,o,s)}function Gi(e,t,n,r,s,o){Hi(e,t);var i=0!=(64&t.flags);if(!r&&!i)return s&&xs(t,n,!1),ia(e,t,o);r=t.stateNode,Ai.current=t;var a=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Eo(t,e.child,null,o),t.child=Eo(t,null,a,o)):$i(e,t,a,o),t.memoizedState=r.state,s&&xs(t,n,!0),t.child}function qi(e){var t=e.stateNode;t.pendingContext?Cs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Cs(0,t.context,!1),Po(e,t.containerInfo)}var Qi,Yi,Ji,Xi={dehydrated:null,retryLane:0};function Zi(e,t,n){var r,s=t.pendingProps,o=$o.current,i=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(i=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===s.fallback||!0===s.unstable_avoidThisFallback||(o|=1),ds($o,1&o),null===e?(void 0!==s.fallback&&Ko(t),e=s.children,o=s.fallback,i?(e=ea(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xi,e):"number"==typeof s.unstable_expectedLoadTime?(e=ea(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xi,t.lanes=33554432,e):((n=Yl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,i?(s=na(e,t,s.children,s.fallback,n),i=t.child,o=e.child.memoizedState,i.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},i.childLanes=e.childLanes&~n,t.memoizedState=Xi,s):(n=ta(e,t,s.children,n),t.memoizedState=null,n))}function ea(e,t,n,r){var s=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&s)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Yl(t,s,0,null),n=Ql(n,s,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function ta(e,t,n,r){var s=e.child;return e=s.sibling,n=Gl(s,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function na(e,t,n,r,s){var o=t.mode,i=e.child;e=i.sibling;var a={mode:"hidden",children:n};return 0==(2&o)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=a,null!==(i=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=i,i.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gl(i,a),null!==e?r=Gl(e,r):(r=Ql(r,o,s,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ra(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),oo(e.return,t)}function sa(e,t,n,r,s,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s,lastEffect:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s,i.lastEffect=o)}function oa(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if($i(e,t,r.children,n),0!=(2&(r=$o.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ra(e,n);else if(19===e.tag)ra(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ds($o,r),0==(2&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===Lo(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),sa(t,!1,s,n,o,t.lastEffect);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Lo(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}sa(t,!0,n,null,o,t.lastEffect);break;case"together":sa(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ia(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),za|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Gl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function aa(e,t){if(!Wo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function la(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return ws(t.type)&&bs(),null;case 3:return Oo(),cs(ps),cs(gs),Jo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(qo(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Bo(t);var o=Ro(Vo.current);if(n=t.type,null!==e&&null!=t.stateNode)Yi(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(i(166));return null}if(e=Ro(jo.current),qo(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Xr]=t,r[Zr]=a,n){case"dialog":Mr("cancel",r),Mr("close",r);break;case"iframe":case"object":case"embed":Mr("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Mr(Sr[e],r);break;case"source":Mr("error",r);break;case"img":case"image":case"link":Mr("error",r),Mr("load",r);break;case"details":Mr("toggle",r);break;case"input":ee(r,a),Mr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Mr("invalid",r);break;case"textarea":le(r,a),Mr("invalid",r)}for(var u in Fe(n,a),e=null,a)a.hasOwnProperty(u)&&(o=a[u],"children"===u?"string"==typeof o?r.textContent!==o&&(e=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(e=["children",""+o]):l.hasOwnProperty(u)&&null!=o&&"onScroll"===u&&Mr("scroll",r));switch(n){case"input":Y(r),re(r,a,!0);break;case"textarea":Y(r),ce(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Lr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===o.nodeType?o:o.ownerDocument,e===de&&(e=ge(n)),e===de?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Xr]=t,e[Zr]=r,Qi(e,t),t.stateNode=e,u=De(n,r),n){case"dialog":Mr("cancel",e),Mr("close",e),o=r;break;case"iframe":case"object":case"embed":Mr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Sr.length;o++)Mr(Sr[o],e);o=r;break;case"source":Mr("error",e),o=r;break;case"img":case"image":case"link":Mr("error",e),Mr("load",e),o=r;break;case"details":Mr("toggle",e),o=r;break;case"input":ee(e,r),o=Z(e,r),Mr("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=s({},r,{value:void 0}),Mr("invalid",e);break;case"textarea":le(e,r),o=ae(e,r),Mr("invalid",e);break;default:o=r}Fe(n,o);var c=o;for(a in c)if(c.hasOwnProperty(a)){var d=c[a];"style"===a?xe(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&we(e,d):"children"===a?"string"==typeof d?("textarea"!==n||""!==d)&&be(e,d):"number"==typeof d&&be(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=d&&"onScroll"===a&&Mr("scroll",e):null!=d&&v(e,a,d,u))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ie(e,!!r.multiple,a,!1):null!=r.defaultValue&&ie(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Lr)}Wr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ji(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));n=Ro(Vo.current),Ro(jo.current),qo(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return cs($o),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&qo(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&$o.current)?0===$a&&($a=3):(0!==$a&&3!==$a||($a=4),null===Ra||0==(134217727&za)&&0==(134217727&Wa)||Cl(Ra,Oa))),(r||n)&&(t.flags|=4),null);case 4:return Oo(),null===e&&Tr(t.stateNode.containerInfo),null;case 10:return so(t),null;case 19:if(cs($o),null===(r=t.memoizedState))return null;if(a=0!=(64&t.flags),null===(u=r.rendering))if(a)aa(r,!1);else{if(0!==$a||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Lo(e))){for(t.flags|=64,aa(r,!1),null!==(a=u.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ds($o,1&$o.current|2),t.child}e=e.sibling}null!==r.tail&&Hs()>Ga&&(t.flags|=64,a=!0,aa(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Lo(u))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),aa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Wo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Hs()-r.renderingStartTime>Ga&&1073741824!==n&&(t.flags|=64,a=!0,aa(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Hs(),n.sibling=null,t=$o.current,ds($o,a?1&t|2:1&t),n):null;case 23:case 24:return Fl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(i(156,t.tag))}function ua(e){switch(e.tag){case 1:ws(e.type)&&bs();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Oo(),cs(ps),cs(gs),Jo(),0!=(64&(t=e.flags)))throw Error(i(285));return e.flags=-4097&t|64,e;case 5:return Bo(e),null;case 13:return cs($o),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return cs($o),null;case 4:return Oo(),null;case 10:return so(e),null;case 23:case 24:return Fl(),null;default:return null}}function ca(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var s=n}catch(e){s="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:s}}function da(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Qi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yi=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Ro(jo.current);var i,a=null;switch(n){case"input":o=Z(e,o),r=Z(e,r),a=[];break;case"option":o=oe(e,o),r=oe(e,r),a=[];break;case"select":o=s({},o,{value:void 0}),r=s({},r,{value:void 0}),a=[];break;case"textarea":o=ae(e,o),r=ae(e,r),a=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=Lr)}for(d in Fe(n,r),n=null,o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&null!=o[d])if("style"===d){var u=o[d];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(u=null!=o?o[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(null!=c||null!=u))if("style"===d)if(u){for(i in u)!u.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&u[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(a=a||[]).push(d,c)):"children"===d?"string"!=typeof c&&"number"!=typeof c||(a=a||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Mr("scroll",e),a||u===c||(a=[])):"object"==typeof c&&null!==c&&c.$$typeof===P?c.toString():(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Ji=function(e,t,n,r){n!==r&&(t.flags|=4)};var ha="function"==typeof WeakMap?WeakMap:Map;function ga(e,t,n){(n=ho(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ja||(Ja=!0,Xa=r),da(0,t)},n}function pa(e,t,n){(n=ho(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var s=t.value;n.payload=function(){return da(0,t),r(s)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Za?Za=new Set([this]):Za.add(this),da(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var fa="function"==typeof WeakSet?WeakSet:Set;function ma(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Il(e,t)}else t.current=null}function wa(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xs(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(i(163))}function ba(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var s=e;r=s.next,0!=(4&(s=s.tag))&&0!=(1&s)&&(Bl(n,e),Al(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xs(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&mo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}mo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Wr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(i(163))}function Ca(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var s=n.memoizedProps.style;s=null!=s&&s.hasOwnProperty("display")?s.display:null,r.style.display=ye("display",s)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function va(e,t){if(Fs&&"function"==typeof Fs.onCommitFiberUnmount)try{Fs.onCommitFiberUnmount(ks,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,s=r.destroy;if(r=r.tag,void 0!==s)if(0!=(4&r))Bl(t,n);else{r=t;try{s()}catch(e){Il(r,e)}}n=n.next}while(n!==e)}break;case 1:if(ma(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Il(t,e)}break;case 5:ma(t);break;case 4:Sa(e,t)}}function ya(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function xa(e){return 5===e.tag||3===e.tag||4===e.tag}function ka(e){e:{for(var t=e.return;null!==t;){if(xa(t))break e;t=t.return}throw Error(i(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(i(161))}16&n.flags&&(be(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||xa(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Fa(e,n,t):Da(e,n,t)}function Fa(e,t,n){var r=e.tag,s=5===r||6===r;if(s)e=s?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Lr));else if(4!==r&&null!==(e=e.child))for(Fa(e,t,n),e=e.sibling;null!==e;)Fa(e,t,n),e=e.sibling}function Da(e,t,n){var r=e.tag,s=5===r||6===r;if(s)e=s?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Da(e,t,n),e=e.sibling;null!==e;)Da(e,t,n),e=e.sibling}function Sa(e,t){for(var n,r,s=t,o=!1;;){if(!o){o=s.return;e:for(;;){if(null===o)throw Error(i(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===s.tag||6===s.tag){e:for(var a=e,l=s,u=l;;)if(va(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,l=s.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(s.stateNode)}else if(4===s.tag){if(null!==s.child){n=s.stateNode.containerInfo,r=!0,s.child.return=s,s=s.child;continue}}else if(va(e,s),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;4===(s=s.return).tag&&(o=!1)}s.sibling.return=s.return,s=s.sibling}}function Na(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var s=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),De(e,s),t=De(e,r),s=0;s<o.length;s+=2){var a=o[s],l=o[s+1];"style"===a?xe(n,l):"dangerouslySetInnerHTML"===a?we(n,l):"children"===a?be(n,l):v(n,a,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ie(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ie(n,!!r.multiple,r.defaultValue,!0):ie(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(i(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ka=Hs(),Ca(t.child,!0)),void Ea(t);case 19:return void Ea(t);case 23:case 24:return void Ca(t,null!==t.memoizedState)}throw Error(i(163))}function Ea(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new fa),t.forEach((function(t){var r=Wl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function _a(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ma=Math.ceil,ja=y.ReactCurrentDispatcher,Ta=y.ReactCurrentOwner,Va=0,Ra=null,Pa=null,Oa=0,Aa=0,Ba=us(0),$a=0,La=null,Ia=0,za=0,Wa=0,Ha=0,Ua=null,Ka=0,Ga=1/0;function qa(){Ga=Hs()+500}var Qa,Ya=null,Ja=!1,Xa=null,Za=null,el=!1,tl=null,nl=90,rl=[],sl=[],ol=null,il=0,al=null,ll=-1,ul=0,cl=0,dl=null,hl=!1;function gl(){return 0!=(48&Va)?Hs():-1!==ll?ll:ll=Hs()}function pl(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Us()?1:2;if(0===ul&&(ul=Ia),0!==Js.transition){0!==cl&&(cl=null!==Ua?Ua.pendingLanes:0),e=ul;var t=4186112&~cl;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Us(),0!=(4&Va)&&98===e?e=Lt(12,ul):e=Lt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ul),e}function fl(e,t,n){if(50<il)throw il=0,al=null,Error(i(185));if(null===(e=ml(e,t)))return null;Wt(e,t,n),e===Ra&&(Wa|=t,4===$a&&Cl(e,Oa));var r=Us();1===t?0!=(8&Va)&&0==(48&Va)?vl(e):(wl(e,n),0===Va&&(qa(),Qs())):(0==(4&Va)||98!==r&&99!==r||(null===ol?ol=new Set([e]):ol.add(e)),wl(e,n)),Ua=e}function ml(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function wl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,s=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Ht(a),u=1<<l,c=o[l];if(-1===c){if(0==(u&r)||0!=(u&s)){c=t,At(u);var d=Ot;o[l]=10<=d?c+250:6<=d?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);a&=~u}if(r=Bt(e,e===Ra?Oa:0),t=Ot,0===r)null!==n&&(n!==Bs&&Ns(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Bs&&Ns(n)}15===t?(n=vl.bind(null,e),null===Ls?(Ls=[n],Is=Ss(Vs,Ys)):Ls.push(n),n=Bs):14===t?n=qs(99,vl.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(i(358,e))}}(t),n=qs(n,bl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function bl(e){if(ll=-1,cl=ul=0,0!=(48&Va))throw Error(i(327));var t=e.callbackNode;if(Ol()&&e.callbackNode!==t)return null;var n=Bt(e,e===Ra?Oa:0);if(0===n)return null;var r=n,s=Va;Va|=16;var o=Nl();for(Ra===e&&Oa===r||(qa(),Dl(e,r));;)try{Ml();break}catch(t){Sl(e,t)}if(ro(),ja.current=o,Va=s,null!==Pa?r=0:(Ra=null,Oa=0,r=$a),0!=(Ia&Wa))Dl(e,0);else if(0!==r){if(2===r&&(Va|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=$t(e))&&(r=El(e,n))),1===r)throw t=La,Dl(e,0),Cl(e,n),wl(e,Hs()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(i(345));case 2:case 5:Vl(e);break;case 3:if(Cl(e,n),(62914560&n)===n&&10<(r=Ka+500-Hs())){if(0!==Bt(e,0))break;if(((s=e.suspendedLanes)&n)!==n){gl(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ur(Vl.bind(null,e),r);break}Vl(e);break;case 4:if(Cl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,s=-1;0<n;){var a=31-Ht(n);o=1<<a,(a=r[a])>s&&(s=a),n&=~o}if(n=s,10<(n=(120>(n=Hs()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ma(n/1960))-n)){e.timeoutHandle=Ur(Vl.bind(null,e),n);break}Vl(e);break;default:throw Error(i(329))}}return wl(e,Hs()),e.callbackNode===t?bl.bind(null,e):null}function Cl(e,t){for(t&=~Ha,t&=~Wa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function vl(e){if(0!=(48&Va))throw Error(i(327));if(Ol(),e===Ra&&0!=(e.expiredLanes&Oa)){var t=Oa,n=El(e,t);0!=(Ia&Wa)&&(n=El(e,t=Bt(e,t)))}else n=El(e,t=Bt(e,0));if(0!==e.tag&&2===n&&(Va|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=$t(e))&&(n=El(e,t))),1===n)throw n=La,Dl(e,0),Cl(e,t),wl(e,Hs()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vl(e),wl(e,Hs()),null}function yl(e,t){var n=Va;Va|=1;try{return e(t)}finally{0===(Va=n)&&(qa(),Qs())}}function xl(e,t){var n=Va;Va&=-2,Va|=8;try{return e(t)}finally{0===(Va=n)&&(qa(),Qs())}}function kl(e,t){ds(Ba,Aa),Aa|=t,Ia|=t}function Fl(){Aa=Ba.current,cs(Ba)}function Dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Kr(n)),null!==Pa)for(n=Pa.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&bs();break;case 3:Oo(),cs(ps),cs(gs),Jo();break;case 5:Bo(r);break;case 4:Oo();break;case 13:case 19:cs($o);break;case 10:so(r);break;case 23:case 24:Fl()}n=n.return}Ra=e,Pa=Gl(e.current,null),Oa=Aa=Ia=t,$a=0,La=null,Ha=Wa=za=0}function Sl(e,t){for(;;){var n=Pa;try{if(ro(),Xo.current=Vi,si){for(var r=ti.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}si=!1}if(ei=0,ri=ni=ti=null,oi=!1,Ta.current=null,null===n||null===n.return){$a=1,La=t,Pa=null;break}e:{var o=e,i=n.return,a=n,l=t;if(t=Oa,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l;if(0==(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var d=0!=(1&$o.current),h=i;do{var g;if(g=13===h.tag){var p=h.memoizedState;if(null!==p)g=null!==p.dehydrated;else{var f=h.memoizedProps;g=void 0!==f.fallback&&(!0!==f.unstable_avoidThisFallback||!d)}}if(g){var m=h.updateQueue;if(null===m){var w=new Set;w.add(u),h.updateQueue=w}else m.add(u);if(0==(2&h.mode)){if(h.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var b=ho(-1,1);b.tag=2,go(a,b)}a.lanes|=1;break e}l=void 0,a=t;var C=o.pingCache;if(null===C?(C=o.pingCache=new ha,l=new Set,C.set(u,l)):void 0===(l=C.get(u))&&(l=new Set,C.set(u,l)),!l.has(a)){l.add(a);var v=zl.bind(null,o,u,a);u.then(v,v)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);l=Error((G(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==$a&&($a=2),l=ca(l,a),h=i;do{switch(h.tag){case 3:o=l,h.flags|=4096,t&=-t,h.lanes|=t,po(h,ga(0,o,t));break e;case 1:o=l;var y=h.type,x=h.stateNode;if(0==(64&h.flags)&&("function"==typeof y.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===Za||!Za.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,po(h,pa(h,o,t));break e}}h=h.return}while(null!==h)}Tl(n)}catch(e){t=e,Pa===n&&null!==n&&(Pa=n=n.return);continue}break}}function Nl(){var e=ja.current;return ja.current=Vi,null===e?Vi:e}function El(e,t){var n=Va;Va|=16;var r=Nl();for(Ra===e&&Oa===t||Dl(e,t);;)try{_l();break}catch(t){Sl(e,t)}if(ro(),Va=n,ja.current=r,null!==Pa)throw Error(i(261));return Ra=null,Oa=0,$a}function _l(){for(;null!==Pa;)jl(Pa)}function Ml(){for(;null!==Pa&&!Es();)jl(Pa)}function jl(e){var t=Qa(e.alternate,e,Aa);e.memoizedProps=e.pendingProps,null===t?Tl(e):Pa=t,Ta.current=null}function Tl(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=la(n,t,Aa)))return void(Pa=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Aa)||0==(4&n.mode)){for(var r=0,s=n.child;null!==s;)r|=s.lanes|s.childLanes,s=s.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ua(t)))return n.flags&=2047,void(Pa=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Pa=t);Pa=t=e}while(null!==t);0===$a&&($a=5)}function Vl(e){var t=Us();return Gs(99,Rl.bind(null,e,t)),null}function Rl(e,t){do{Ol()}while(null!==tl);if(0!=(48&Va))throw Error(i(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null;var r=n.lanes|n.childLanes,s=r,o=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;for(var a=e.eventTimes,l=e.expirationTimes;0<o;){var u=31-Ht(o),c=1<<u;s[u]=0,a[u]=-1,l[u]=-1,o&=~c}if(null!==ol&&0==(24&r)&&ol.has(e)&&ol.delete(e),e===Ra&&(Pa=Ra=null,Oa=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(s=Va,Va|=32,Ta.current=null,Ir=Qt,wr(a=mr())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else e:if(l=(l=a.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,o=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(e){l=null;break e}var d=0,h=-1,g=-1,p=0,f=0,m=a,w=null;t:for(;;){for(var b;m!==l||0!==o&&3!==m.nodeType||(h=d+o),m!==u||0!==c&&3!==m.nodeType||(g=d+c),3===m.nodeType&&(d+=m.nodeValue.length),null!==(b=m.firstChild);)w=m,m=b;for(;;){if(m===a)break t;if(w===l&&++p===o&&(h=d),w===u&&++f===c&&(g=d),null!==(b=m.nextSibling))break;w=(m=w).parentNode}m=b}l=-1===h||-1===g?null:{start:h,end:g}}else l=null;l=l||{start:0,end:0}}else l=null;zr={focusedElem:a,selectionRange:l},Qt=!1,dl=null,hl=!1,Ya=r;do{try{Pl()}catch(e){if(null===Ya)throw Error(i(330));Il(Ya,e),Ya=Ya.nextEffect}}while(null!==Ya);dl=null,Ya=r;do{try{for(a=e;null!==Ya;){var C=Ya.flags;if(16&C&&be(Ya.stateNode,""),128&C){var v=Ya.alternate;if(null!==v){var y=v.ref;null!==y&&("function"==typeof y?y(null):y.current=null)}}switch(1038&C){case 2:ka(Ya),Ya.flags&=-3;break;case 6:ka(Ya),Ya.flags&=-3,Na(Ya.alternate,Ya);break;case 1024:Ya.flags&=-1025;break;case 1028:Ya.flags&=-1025,Na(Ya.alternate,Ya);break;case 4:Na(Ya.alternate,Ya);break;case 8:Sa(a,l=Ya);var x=l.alternate;ya(l),null!==x&&ya(x)}Ya=Ya.nextEffect}}catch(e){if(null===Ya)throw Error(i(330));Il(Ya,e),Ya=Ya.nextEffect}}while(null!==Ya);if(y=zr,v=mr(),C=y.focusedElem,a=y.selectionRange,v!==C&&C&&C.ownerDocument&&fr(C.ownerDocument.documentElement,C)){null!==a&&wr(C)&&(v=a.start,void 0===(y=a.end)&&(y=v),"selectionStart"in C?(C.selectionStart=v,C.selectionEnd=Math.min(y,C.value.length)):(y=(v=C.ownerDocument||document)&&v.defaultView||window).getSelection&&(y=y.getSelection(),l=C.textContent.length,x=Math.min(a.start,l),a=void 0===a.end?x:Math.min(a.end,l),!y.extend&&x>a&&(l=a,a=x,x=l),l=pr(C,x),o=pr(C,a),l&&o&&(1!==y.rangeCount||y.anchorNode!==l.node||y.anchorOffset!==l.offset||y.focusNode!==o.node||y.focusOffset!==o.offset)&&((v=v.createRange()).setStart(l.node,l.offset),y.removeAllRanges(),x>a?(y.addRange(v),y.extend(o.node,o.offset)):(v.setEnd(o.node,o.offset),y.addRange(v))))),v=[];for(y=C;y=y.parentNode;)1===y.nodeType&&v.push({element:y,left:y.scrollLeft,top:y.scrollTop});for("function"==typeof C.focus&&C.focus(),C=0;C<v.length;C++)(y=v[C]).element.scrollLeft=y.left,y.element.scrollTop=y.top}Qt=!!Ir,zr=Ir=null,e.current=n,Ya=r;do{try{for(C=e;null!==Ya;){var k=Ya.flags;if(36&k&&ba(C,Ya.alternate,Ya),128&k){v=void 0;var F=Ya.ref;if(null!==F){var D=Ya.stateNode;Ya.tag,v=D,"function"==typeof F?F(v):F.current=v}}Ya=Ya.nextEffect}}catch(e){if(null===Ya)throw Error(i(330));Il(Ya,e),Ya=Ya.nextEffect}}while(null!==Ya);Ya=null,$s(),Va=s}else e.current=n;if(el)el=!1,tl=e,nl=t;else for(Ya=r;null!==Ya;)t=Ya.nextEffect,Ya.nextEffect=null,8&Ya.flags&&((k=Ya).sibling=null,k.stateNode=null),Ya=t;if(0===(r=e.pendingLanes)&&(Za=null),1===r?e===al?il++:(il=0,al=e):il=0,n=n.stateNode,Fs&&"function"==typeof Fs.onCommitFiberRoot)try{Fs.onCommitFiberRoot(ks,n,void 0,64==(64&n.current.flags))}catch(e){}if(wl(e,Hs()),Ja)throw Ja=!1,e=Xa,Xa=null,e;return 0!=(8&Va)||Qs(),null}function Pl(){for(;null!==Ya;){var e=Ya.alternate;hl||null===dl||(0!=(8&Ya.flags)?et(Ya,dl)&&(hl=!0):13===Ya.tag&&_a(e,Ya)&&et(Ya,dl)&&(hl=!0));var t=Ya.flags;0!=(256&t)&&wa(e,Ya),0==(512&t)||el||(el=!0,qs(97,(function(){return Ol(),null}))),Ya=Ya.nextEffect}}function Ol(){if(90!==nl){var e=97<nl?97:nl;return nl=90,Gs(e,$l)}return!1}function Al(e,t){rl.push(t,e),el||(el=!0,qs(97,(function(){return Ol(),null})))}function Bl(e,t){sl.push(t,e),el||(el=!0,qs(97,(function(){return Ol(),null})))}function $l(){if(null===tl)return!1;var e=tl;if(tl=null,0!=(48&Va))throw Error(i(331));var t=Va;Va|=32;var n=sl;sl=[];for(var r=0;r<n.length;r+=2){var s=n[r],o=n[r+1],a=s.destroy;if(s.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===o)throw Error(i(330));Il(o,e)}}for(n=rl,rl=[],r=0;r<n.length;r+=2){s=n[r],o=n[r+1];try{var l=s.create;s.destroy=l()}catch(e){if(null===o)throw Error(i(330));Il(o,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Va=t,Qs(),!0}function Ll(e,t,n){go(e,t=ga(0,t=ca(n,t),1)),t=gl(),null!==(e=ml(e,1))&&(Wt(e,1,t),wl(e,t))}function Il(e,t){if(3===e.tag)Ll(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ll(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Za||!Za.has(r))){var s=pa(n,e=ca(t,e),1);if(go(n,s),s=gl(),null!==(n=ml(n,1)))Wt(n,1,s),wl(n,s);else if("function"==typeof r.componentDidCatch&&(null===Za||!Za.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function zl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=gl(),e.pingedLanes|=e.suspendedLanes&n,Ra===e&&(Oa&n)===n&&(4===$a||3===$a&&(62914560&Oa)===Oa&&500>Hs()-Ka?Dl(e,0):Ha|=n),wl(e,t)}function Wl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Us()?1:2:(0===ul&&(ul=Ia),0===(t=It(62914560&~ul))&&(t=4194304))),n=gl(),null!==(e=ml(e,t))&&(Wt(e,t,n),wl(e,n))}function Hl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ul(e,t,n,r){return new Hl(e,t,n,r)}function Kl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gl(e,t){var n=e.alternate;return null===n?((n=Ul(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ql(e,t,n,r,s,o){var a=2;if(r=e,"function"==typeof e)Kl(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case F:return Ql(n.children,s,o,t);case O:a=8,s|=16;break;case D:a=8,s|=1;break;case S:return(e=Ul(12,n,t,8|s)).elementType=S,e.type=S,e.lanes=o,e;case M:return(e=Ul(13,n,t,s)).type=M,e.elementType=M,e.lanes=o,e;case j:return(e=Ul(19,n,t,s)).elementType=j,e.lanes=o,e;case A:return Yl(n,s,o,t);case B:return(e=Ul(24,n,t,s)).elementType=B,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case N:a=10;break e;case E:a=9;break e;case _:a=11;break e;case T:a=14;break e;case V:a=16,r=null;break e;case R:a=22;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ul(a,n,t,s)).elementType=e,t.type=r,t.lanes=o,t}function Ql(e,t,n,r){return(e=Ul(7,e,r,t)).lanes=n,e}function Yl(e,t,n,r){return(e=Ul(23,e,r,t)).elementType=A,e.lanes=n,e}function Jl(e,t,n){return(e=Ul(6,e,null,t)).lanes=n,e}function Xl(e,t,n){return(t=Ul(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function eu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function tu(e,t,n,r){var s=t.current,o=gl(),a=pl(s);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(i(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(ws(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(i(171))}if(1===n.tag){var u=n.type;if(ws(u)){n=vs(n,u,l);break e}}n=l}else n=hs;return null===t.context?t.context=n:t.pendingContext=n,(t=ho(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),go(s,t),fl(s,a,o),a}function nu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ru(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function su(e,t){ru(e,t),(e=e.alternate)&&ru(e,t)}function ou(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Zl(e,t,null!=n&&!0===n.hydrate),t=Ul(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,uo(t),e[es]=n.current,Tr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var s=(t=r[e])._getVersion;s=s(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,s]:n.mutableSourceEagerHydrationData.push(t,s)}this._internalRoot=n}function iu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function au(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o._internalRoot;if("function"==typeof s){var a=s;s=function(){var e=nu(i);a.call(e)}}tu(t,i,e,s)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ou(e,0,t?{hydrate:!0}:void 0)}(n,r),i=o._internalRoot,"function"==typeof s){var l=s;s=function(){var e=nu(i);l.call(e)}}xl((function(){tu(t,i,e,s)}))}return nu(i)}function lu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!iu(t))throw Error(i(200));return eu(e,t,null,n)}Qa=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ps.current)Bi=!0;else{if(0==(n&r)){switch(Bi=!1,t.tag){case 3:qi(t),Qo();break;case 5:Ao(t);break;case 1:ws(t.type)&&ys(t);break;case 4:Po(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var s=t.type._context;ds(Zs,s._currentValue),s._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Zi(e,t,n):(ds($o,1&$o.current),null!==(t=ia(e,t,n))?t.sibling:null);ds($o,1&$o.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return oa(e,t,n);t.flags|=64}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),ds($o,$o.current),r)break;return null;case 23:case 24:return t.lanes=0,Wi(e,t,n)}return ia(e,t,n)}Bi=0!=(16384&e.flags)}else Bi=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,s=ms(t,gs.current),io(t,n),s=li(null,t,r,e,s,n),t.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ws(r)){var o=!0;ys(t)}else o=!1;t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,uo(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&bo(t,r,a,e),s.updater=Co,t.stateNode=s,s._reactInternals=t,ko(t,r,e,n),t=Gi(null,t,r,!0,o,n)}else t.tag=0,$i(null,t,s,n),t=t.child;return t;case 16:s=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,s=(o=s._init)(s._payload),t.type=s,o=t.tag=function(e){if("function"==typeof e)return Kl(e)?1:0;if(null!=e){if((e=e.$$typeof)===_)return 11;if(e===T)return 14}return 2}(s),e=Xs(s,e),o){case 0:t=Ui(null,t,s,e,n);break e;case 1:t=Ki(null,t,s,e,n);break e;case 11:t=Li(null,t,s,e,n);break e;case 14:t=Ii(null,t,s,Xs(s.type,e),r,n);break e}throw Error(i(306,s,""))}return t;case 0:return r=t.type,s=t.pendingProps,Ui(e,t,r,s=t.elementType===r?s:Xs(r,s),n);case 1:return r=t.type,s=t.pendingProps,Ki(e,t,r,s=t.elementType===r?s:Xs(r,s),n);case 3:if(qi(t),r=t.updateQueue,null===e||null===r)throw Error(i(282));if(r=t.pendingProps,s=null!==(s=t.memoizedState)?s.element:null,co(e,t),fo(t,r,null,n),(r=t.memoizedState.element)===s)Qo(),t=ia(e,t,n);else{if((o=(s=t.stateNode).hydrate)&&(zo=qr(t.stateNode.containerInfo.firstChild),Io=t,o=Wo=!0),o){if(null!=(e=s.mutableSourceEagerHydrationData))for(s=0;s<e.length;s+=2)(o=e[s])._workInProgressVersionPrimary=e[s+1],Yo.push(o);for(n=_o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else $i(e,t,r,n),Qo();t=t.child}return t;case 5:return Ao(t),null===e&&Ko(t),r=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,a=s.children,Hr(r,s)?a=null:null!==o&&Hr(r,o)&&(t.flags|=16),Hi(e,t),$i(e,t,a,n),t.child;case 6:return null===e&&Ko(t),null;case 13:return Zi(e,t,n);case 4:return Po(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Eo(t,null,r,n):$i(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,Li(e,t,r,s=t.elementType===r?s:Xs(r,s),n);case 7:return $i(e,t,t.pendingProps,n),t.child;case 8:case 12:return $i(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value;var l=t.type._context;if(ds(Zs,l._currentValue),l._currentValue=o,null!==a)if(l=a.value,0===(o=cr(l,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(a.children===s.children&&!ps.current){t=ia(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===l.tag&&((c=ho(-1,n&-n)).tag=2,go(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),oo(l.return,n),u.lanes|=n;break}c=c.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}$i(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=(o=t.pendingProps).children,io(t,n),r=r(s=ao(s,o.unstable_observedBits)),t.flags|=1,$i(e,t,r,n),t.child;case 14:return o=Xs(s=t.type,t.pendingProps),Ii(e,t,s,o=Xs(s.type,o),r,n);case 15:return zi(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Xs(r,s),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ws(r)?(e=!0,ys(t)):e=!1,io(t,n),yo(t,r,s),ko(t,r,s,n),Gi(null,t,r,!0,e,n);case 19:return oa(e,t,n);case 23:case 24:return Wi(e,t,n)}throw Error(i(156,t.tag))},ou.prototype.render=function(e){tu(e,this._internalRoot,null,null)},ou.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;tu(null,e,null,(function(){t[es]=null}))},tt=function(e){13===e.tag&&(fl(e,4,gl()),su(e,4))},nt=function(e){13===e.tag&&(fl(e,67108864,gl()),su(e,67108864))},rt=function(e){if(13===e.tag){var t=gl(),n=pl(e);fl(e,n,t),su(e,n)}},st=function(e,t){return t()},Ne=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=os(r);if(!s)throw Error(i(90));J(r),ne(r,s)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&ie(e,!!n.multiple,t,!1)}},Ve=yl,Re=function(e,t,n,r,s){var o=Va;Va|=4;try{return Gs(98,e.bind(null,t,n,r,s))}finally{0===(Va=o)&&(qa(),Qs())}},Pe=function(){0==(49&Va)&&(function(){if(null!==ol){var e=ol;ol=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,wl(e,Hs())}))}Qs()}(),Ol())},Oe=function(e,t){var n=Va;Va|=2;try{return e(t)}finally{0===(Va=n)&&(qa(),Qs())}};var uu={Events:[rs,ss,os,je,Te,Ol,{current:!1}]},cu={findFiberByHostInstance:ns,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},du={bundleType:cu.bundleType,version:cu.version,rendererPackageName:cu.rendererPackageName,rendererConfig:cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{ks=hu.inject(du),Fs=hu}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uu,t.createPortal=lu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw Error(i(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Va;if(0!=(48&n))return e(t);Va|=1;try{if(e)return Gs(99,e.bind(null,t))}finally{Va=n,Qs()}},t.hydrate=function(e,t,n){if(!iu(t))throw Error(i(200));return au(null,e,t,!0,n)},t.render=function(e,t,n){if(!iu(t))throw Error(i(200));return au(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!iu(e))throw Error(i(40));return!!e._reactRootContainer&&(xl((function(){au(null,null,e,!1,(function(){e._reactRootContainer=null,e[es]=null}))})),!0)},t.unstable_batchedUpdates=yl,t.unstable_createPortal=function(e,t){return lu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!iu(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return au(e,t,n,!1,r)},t.version="17.0.2"},935:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(448)},13:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var i,a,l=s(e),u=1;u<arguments.length;u++){for(var c in i=Object(arguments[u]))n.call(i,c)&&(l[c]=i[c]);if(t){a=t(i);for(var d=0;d<a.length;d++)r.call(i,a[d])&&(l[a[d]]=i[a[d]])}}return l}},251:(e,t,n)=>{n(424);var r=n(294),s=60103;if(60107,"function"==typeof Symbol&&Symbol.for){var o=Symbol.for;s=o("react.element"),o("react.fragment")}var i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:s,type:e,key:u,ref:c,props:o,_owner:i.current}}t.jsx=u,t.jsxs=u},408:(e,t,n)=>{var r=n(424),s=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var i=60109,a=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"==typeof Symbol&&Symbol.for){var d=Symbol.for;s=d("react.element"),o=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),i=d("react.provider"),a=d("react.context"),l=d("react.forward_ref"),t.Suspense=d("react.suspense"),u=d("react.memo"),c=d("react.lazy")}var h="function"==typeof Symbol&&Symbol.iterator;function g(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f={};function m(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||p}function w(){}function b(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(g(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=m.prototype;var C=b.prototype=new w;C.constructor=b,r(C,m.prototype),C.isPureReactComponent=!0;var v={current:null},y=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,o={},i=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)y.call(t,r)&&!x.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:s,type:e,key:i,ref:a,props:o,_owner:v.current}}function F(e){return"object"==typeof e&&null!==e&&e.$$typeof===s}var D=/\/+/g;function S(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,n,r,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case s:case o:l=!0}}if(l)return i=i(l=e),e=""===r?"."+S(l,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(D,"$&/")+"/"),N(i,t,n,"",(function(e){return e}))):null!=i&&(F(i)&&(i=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(D,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=r+S(a=e[u],u);l+=N(a,t,n,c,i)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=N(a=a.value,t,n,c=r+S(a,u++),i);else if("object"===a)throw t=""+e,Error(g(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function E(e,t,n){if(null==e)return e;var r=[],s=0;return N(e,r,"","",(function(e){return t.call(n,e,s++)})),r}function _(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var M={current:null};function j(){var e=M.current;if(null===e)throw Error(g(321));return e}var T={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:v,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:E,forEach:function(e,t,n){E(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return E(e,(function(){t++})),t},toArray:function(e){return E(e,(function(e){return e}))||[]},only:function(e){if(!F(e))throw Error(g(143));return e}},t.Component=m,t.PureComponent=b,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T,t.cloneElement=function(e,t,n){if(null==e)throw Error(g(267,e));var o=r({},e.props),i=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=v.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)y.call(t,c)&&!x.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:s,type:e.type,key:i,ref:a,props:o,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=F,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return j().useCallback(e,t)},t.useContext=function(e,t){return j().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return j().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return j().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return j().useLayoutEffect(e,t)},t.useMemo=function(e,t){return j().useMemo(e,t)},t.useReducer=function(e,t,n){return j().useReducer(e,t,n)},t.useRef=function(e){return j().useRef(e)},t.useState=function(e){return j().useState(e)},t.version="17.0.2"},294:(e,t,n)=>{e.exports=n(408)},893:(e,t,n)=>{e.exports=n(251)},424:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var i,a,l=s(e),u=1;u<arguments.length;u++){for(var c in i=Object(arguments[u]))n.call(i,c)&&(l[c]=i[c]);if(t){a=t(i);for(var d=0;d<a.length;d++)r.call(i,a[d])&&(l[a[d]]=i[a[d]])}}return l}},53:(e,t)=>{var n,r,s,o;if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,c=null,d=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(e){throw setTimeout(d,0),e}};n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(d,0))},r=function(e,t){c=setTimeout(e,t)},s=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,g=window.clearTimeout;if("undefined"!=typeof console){var p=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var f=!1,m=null,w=-1,b=5,C=0;t.unstable_shouldYield=function(){return t.unstable_now()>=C},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5};var v=new MessageChannel,y=v.port2;v.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();C=e+b;try{m(!0,e)?y.postMessage(null):(f=!1,m=null)}catch(e){throw y.postMessage(null),e}}else f=!1},n=function(e){m=e,f||(f=!0,y.postMessage(null))},r=function(e,n){w=h((function(){e(t.unstable_now())}),n)},s=function(){g(w),w=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,s=e[r];if(!(void 0!==s&&0<D(s,t)))break e;e[r]=t,e[n]=s,n=r}}function k(e){return void 0===(e=e[0])?null:e}function F(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length;r<s;){var o=2*(r+1)-1,i=e[o],a=o+1,l=e[a];if(void 0!==i&&0>D(i,n))void 0!==l&&0>D(l,i)?(e[r]=l,e[a]=n,r=a):(e[r]=i,e[o]=n,r=o);else{if(!(void 0!==l&&0>D(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function D(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],N=[],E=1,_=null,M=3,j=!1,T=!1,V=!1;function R(e){for(var t=k(N);null!==t;){if(null===t.callback)F(N);else{if(!(t.startTime<=e))break;F(N),t.sortIndex=t.expirationTime,x(S,t)}t=k(N)}}function P(e){if(V=!1,R(e),!T)if(null!==k(S))T=!0,n(O);else{var t=k(N);null!==t&&r(P,t.startTime-e)}}function O(e,n){T=!1,V&&(V=!1,s()),j=!0;var o=M;try{for(R(n),_=k(S);null!==_&&(!(_.expirationTime>n)||e&&!t.unstable_shouldYield());){var i=_.callback;if("function"==typeof i){_.callback=null,M=_.priorityLevel;var a=i(_.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?_.callback=a:_===k(S)&&F(S),R(n)}else F(S);_=k(S)}if(null!==_)var l=!0;else{var u=k(N);null!==u&&r(P,u.startTime-n),l=!1}return l}finally{_=null,M=o,j=!1}}var A=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){T||j||(T=!0,n(O))},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return k(S)},t.unstable_next=function(e){switch(M){case 1:case 2:case 3:var t=3;break;default:t=M}var n=M;M=t;try{return e()}finally{M=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=A,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=M;M=e;try{return t()}finally{M=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"==typeof i&&null!==i?i="number"==typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:E++,callback:o,priorityLevel:e,startTime:i,expirationTime:l=i+l,sortIndex:-1},i>a?(e.sortIndex=i,x(N,e),null===k(S)&&e===k(N)&&(V?s():V=!0,r(P,i-a))):(e.sortIndex=l,x(S,e),T||j||(T=!0,n(O))),e},t.unstable_wrapCallback=function(e){var t=M;return function(){var n=M;M=t;try{return e.apply(this,arguments)}finally{M=n}}}},840:(e,t,n)=>{e.exports=n(53)},978:(e,t,n)=>{n.d(t,{fF:()=>i});const r=["debug","log","warn","error"];function s(){return r.indexOf(function(){if("object"==typeof window)return window.QFORMS_LOG_LEVEL||"debug";if("object"==typeof global)return process.env.QFORMS_LOG_LEVEL||"log";return"debug"}())}function o(){return"undefined"!=typeof jest}function i(e,...t){s()<=r.indexOf("debug")&&(o()?process.stdout.write(`${[e,...t].join(" ")}\n`):console.debug(e,...t))}},65:(e,t,n)=>{n.d(t,{G:()=>FormatHelper});var r=n(920);class FormatHelper{static formatNumber(e){return new Intl.NumberFormat("ru-RU").format(e)}static formatDate(e,t){const n=e.getFullYear(),r=e.getMonth()+1,s=e.getDate(),o=e.getHours(),i=e.getMinutes(),a=e.getSeconds(),l={YYYY:n,M:r,D:s,h:o,m:i,s:a,MM:r<10?`0${r}`:r,DD:s<10?`0${s}`:s,hh:o<10?`0${o}`:o,mm:i<10?`0${i}`:i,ss:a<10?`0${a}`:a};return t.replace(/\{([\w.]+)\}/g,((e,t)=>l[t]?l[t]:e))}static formatTime(e){let t=e,n="";e<0&&(t=-t,n="-");let r=Math.floor(t/3600),s=Math.floor((t-3600*r)/60),o=Math.floor(t-3600*r-60*s);return r<10&&(r="0"+r),s<10&&(s="0"+s),o<10&&(o="0"+o),0===Math.floor(t/3600)?`${n}${s}:${o}`:`${n}${r}:${s}:${o}`}static formatTime2(e){let t=e,n="";e<0&&(t=-t,n="-");let r=Math.floor(t/3600),s=Math.floor((t-3600*r)/60),o=Math.floor(t-3600*r-60*s);return r<10&&(r="0"+r),s<10&&(s="0"+s),o<10&&(o="0"+o),0===Math.floor(t/3600)?`${n}${s}m:${o}s`:`${n}${r}h:${s}m:${o}s`}}r.W.registerGlobalClass(FormatHelper)},920:(e,t,n)=>{n.d(t,{W:()=>Helper});class Helper{static encodeObject(e){const t={};for(const n in e)t[n]=Helper.encodeValue(e[n]);return t}static encodeValue(e){return JSON.stringify(e)}static decodeObject(e){if(!e)throw new Error("Helper.decodeObject: no object");const t={};for(const n in e){if("string"!=typeof e[n])throw new Error(`decodeObject: cannot decode field: ${n}, type: ${typeof e[n]}, value: ${e[n]}`);t[n]=Helper.decodeValue(e[n])}return t}static decodeValue(e){if(void 0===e)throw new Error("decodeValue: undefined");if(null===e)throw new Error("decodeValue: null");if(""===e)throw new Error("decodeValue: empty string");try{return JSON.parse(e,Helper.dateTimeReviver)}catch(t){throw new Error(`decodeValue failed: ${t.message}, raw: "${e}"`)}}static dateTimeReviver(e,t){if("string"==typeof t){if(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\.\d{3})?(Z|([+-])(\d{2}):(\d{2}))?$/.exec(t))return new Date(t)}return t}static moveArrItem(e,t,n){const r=e.indexOf(t);if(-1===r)throw new Error("cannot find element");const s=r+n;if(s<0)throw new Error("cannot up top element");if(s>e.length-1)throw new Error("cannot down bottom element");e.splice(s,0,e.splice(r,1)[0])}static fillArray(e){return Array.from(Array(e).keys())}static sleep(e){return new Promise((t=>setTimeout(t,e)))}static registerGlobalClass(e){if("object"==typeof window){if(window[e.name])throw new Error(`window.${e.name} already used`);window[e.name]=e}else{if(global[e.name])throw new Error(`global.${e.name} already used`);global[e.name]=e}}static getGlobalClass(e){return"object"==typeof window?window[e]:global[e]}static addClassToDocumentElement(e){"object"==typeof document&&document.documentElement.classList.add(e)}static headersToRecord(e){return Array.from(e.entries()).reduce(((e,t)=>{const[n,r]=t;return e[n]=r,e}),{})}static queryToString(e){return Object.keys(e).filter((t=>"object"==typeof e[t]&&null!==e[t]?Object.keys(e[t]).length>0:void 0!==e[t])).map((t=>{const n=e[t];return"string"==typeof n?`${t}=${encodeURIComponent(n)}`:Helper.queryRecordToString(t,n)})).join("&")}static queryRecordToString(e,t){return Object.keys(t).filter((e=>void 0!==t[e])).map((n=>{const r=encodeURIComponent(t[n]).replace(/^%22/,'"').replace(/%22$/,'"').replace(/%20/g,"+");return`${e}[${n}]=${r}`})).join("&")}static keyTupleToKey(e){return JSON.stringify(e)}static keyToKeyTuple(e){return JSON.parse(e)}static getFirstField(e){const[t]=Object.keys(e);if(!t)throw new Error("getFirstField: no fields");return e[t]}static mapObject(e,t){return Object.keys(e).reduce(((n,r)=>{const[s,o]=t(r,e[r]);return n[s]=o,n}),{})}static templateArray(e){return e.map((e=>{const t=typeof e;if("number"===t||"boolean"===t)return e;if("string"===t)return`'${e}'`;throw new Error(`wrong type for array item: ${t}`)}))}static templateToJsString(e,t){return e.replace(/\$\{([\w.@]+)\}/g,((e,n)=>t.hasOwnProperty(n)?`Helper.decodeValue('${Helper.encodeValue(t[n])}')`:"undefined"))}}Helper.registerGlobalClass(Helper)},958:(e,t,n)=>{n.d(t,{e0:()=>y,Iq:()=>BinaryHelper,xu:()=>Box,zx:()=>Button,FB:()=>CancelIcon,Jg:()=>CheckBox,$:()=>CheckBoxList,hi:()=>ClipboardHelper,Tw:()=>m,BX:()=>v,Ct:()=>ComboBox,Ax:()=>CookieHelper,IH:()=>DateIcon,Mt:()=>DatePicker,HD:()=>DateTimeHelper,pJ:()=>DeleteIcon,qw:()=>DoneIcon_DoneIcon,KL:()=>DownIcon,PS:()=>DropdownButton,Ol:()=>DropdownDatePicker,dY:()=>EditIcon,M0:()=>Expand,Gq:()=>d.G,Qh:()=>FrontHostApp,rj:()=>Grid,r8:()=>GridCell,Jn:()=>GridRow,Wt:()=>r.W,Ee:()=>Image,Ey:()=>w,_t:()=>LocationIcon,v2:()=>Menu,u_:()=>Modal,Yv:()=>MoreVertIcon,r$:()=>C,ro:()=>Password,CW:()=>PasswordIcon,Fg:()=>PhoneBox,qW:()=>PhoneIcon,Y8:()=>Radio,rN:()=>ReactComponent,mm:()=>ReactHelper,m9:()=>b,ol:()=>Search,Ph:()=>Select,ew:()=>SettingsIcon,iR:()=>Slider,XW:()=>Statusbar,OK:()=>Tab,db:()=>Tab2,Kx:()=>TextArea,zC:()=>TextBox,DB:()=>TimeBox,jh:()=>TimeBox2,wZ:()=>TimeIcon,u:()=>Tooltip,K3:()=>VisibilityIcon,X0:()=>VisibilityOffIcon,i7:()=>h,Rd:()=>p,TG:()=>g});var r=n(920);class Search{static getObj(){const e=new URLSearchParams(window.location.search),t={};for(const[n,r]of e)t[n]=r;return t}static objToString(e){const t=new URLSearchParams(e).toString();return t?`?${t}`:""}static filter(...e){const t=Search.getObj(),n={};for(const r of e)t.hasOwnProperty(r)&&(n[r]=t[r]);return Search.objToString(n)}}var s=n(978),o=n(855);class CookieHelper{static setCookie(e,t,n){let r="";if(n){r="; expires="+new Date(n).toUTCString()}document.cookie=e+"="+(encodeURIComponent(t)||"")+r+"; path=/"}static getCookie(e){const t=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let r=n[e];for(;" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}}static eraseCookie(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}}class FrontHostApp{constructor(e){this.options=e,this.alertCtrl=null,this.documentTitle=""}init(){window.addEventListener("error",this.onWindowError.bind(this)),window.addEventListener("unhandledrejection",this.onWindowUnhandledrejection.bind(this)),window.addEventListener("popstate",this.onWindowPopState.bind(this))}async run(){throw new Error("FrontHostApp.run not implemented")}async onWindowUnhandledrejection(e){(0,s.fF)("FrontHostApp.onWindowUnhandledrejection");try{e.preventDefault();const t=e instanceof Error?e:e.reason||e.detail.reason;this.logError(t),await this.alert({title:"Unhandled Rejection",message:t.message})}catch(e){console.error(`onWindowUnhandledrejection error: ${e.message}`)}}async onWindowError(e){(0,s.fF)("FrontHostApp.onWindowError",e);try{e.preventDefault();const t=e.error;this.logError(t)}catch(e){console.error(`onWindowError error: ${e.message}`)}}logError(e){console.error("FrontHostApp.logError",e)}static async doHttpRequest(e){console.warn("FrontHostApp.doHttpRequest","POST",window.location.href,e);const[,t]=await FrontHostApp.fetchJson("POST",window.location.href,e);return console.warn(`body ${FrontHostApp.composeHandlerName(e)}:`,t),t}static async doHttpRequest2(e,t,n){console.warn("FrontHostApp.doHttpRequest2",e,t,n);const[r,s]=await FrontHostApp.fetchJson(e,t,n);return n?console.warn(`body ${FrontHostApp.composeHandlerName(n)}:`,s):console.warn(s),[r,s]}static composeHandlerName(e){return e.action===o.aU.rpc?e.form?`${e.page}.${e.form}.${e.name}.${e.action}`:e.page?`${e.page}.${e.name}.${e.action}`:`${e.name}.${e.action}`:`${e.page}.${e.form}.${e.ds}.${e.action}`}static async fetchJson(e,t,n){return await FrontHostApp.fetch(e,t,n?JSON.stringify(n):void 0,"application/json")}static async fetch(e,t,n,s){try{FrontHostApp.startWait();const o=await fetch(t,Object.assign({method:e,body:n},s?{headers:{"Content-Type":s}}:{}));if(o.ok){const e=r.W.headersToRecord(o.headers);return[e,await o.json()]}throw new Error(`${o.status} ${o.statusText}: ${await o.text()}`)}finally{FrontHostApp.stopWait()}}static startWait(){document.querySelector("html").classList.add("wait")}static stopWait(){document.querySelector("html").classList.remove("wait")}async onWindowPopState(e){(0,s.fF)("FrontHostApp.onWindowPopState",e.state)}async alert(e){(0,s.fF)("FrontHostApp.alert",e),alert(e.message)}async confirm(e){return(0,s.fF)("FrontHostApp.confirm",e),confirm(e.message)}setDocumentTitle(e){"object"==typeof document?document.title=e:this.documentTitle=e}getDocumentTitle(){return"object"==typeof document?document.title:this.documentTitle}createLink(e){const t=this.getPathName();return e?[t,r.W.queryToString(e)].join("?"):t}getPathName(){return"object"==typeof window?window.location.pathname:this.getOptions().url.pathname}getOptions(){if(!this.options)throw new Error("no options");return this.options}filterSearch(...e){if("object"==typeof window)return Search.filter(...e);const t={},n=this.getOptions().url.searchParams;for(const r of e)n.hasOwnProperty(r)&&(t[r]=n.get(r));return Search.objToString(t)}getSearchParams(){return"object"==typeof window?Search.getObj():Object.fromEntries(this.getOptions().url.searchParams)}getCookie(e){return"object"==typeof window?CookieHelper.getCookie(e):this.getOptions().cookies[e]}getLocation(){return"object"==typeof window?window.location:this.getOptions().url}}var i=n(294);class ReactComponent extends i.Component{constructor(e){super(e),e.onCreate&&e.onCreate(this,this.props.name),this.allowRerender=!0}getElement(){return this.el.current}getParent(){return this.props.parent}checkParent(){if(!this.props.parent)throw new Error(`${this.constructor.name}: no parent`)}getClassList(){return[this.getCssBlockName(),...this.props.classList||[],...this.state&&this.state.classList?this.state.classList:[]]}addCssClass(e){-1===this.state.classList.indexOf(e)&&this.state.classList.push(e)}removeCssClass(e){this.state.classList.splice(this.state.classList.indexOf(e),1)}getCssBlockName(){return this.constructor.name}getCssClassNames(){return this.getClassList().join(" ")}rerender(e=!0){return this.canRerender()?new Promise((t=>{const n=Date.now();this.forceUpdate((()=>{e&&console.debug(`${this.constructor.name}.rerender time:`,Date.now()-n),t()}))})):Promise.resolve()}canRerender(){return!!this.allowRerender&&(!this.props.parent||this.props.parent.canRerender())}disableRerender(){console.debug(`${this.constructor.name}.disableRerender`),this.allowRerender=!1}enableRerender(){console.debug(`${this.constructor.name}.enableRerender`),this.allowRerender=!0}componentWillUnmount(){this.props.onUnmount&&this.props.onUnmount(this,this.props.name)}isEnabled(){return!this.isDisabled()}isDisabled(){return this.state&&void 0!==this.state.disabled?this.state.disabled:void 0!==this.props.disabled?this.props.disabled:void 0!==this.props.enabled&&!this.props.enabled}disable(){if(!this.state)throw new Error("no state");this.setState({disabled:!0})}enable(){if(!this.state)throw new Error("no state");this.setState({disabled:void 0})}}"object"==typeof window&&(window.ReactComponent=ReactComponent);var a=n(935);class ReactHelper{static createReactComponent(e,t,n={},r){let s;const o=i.createElement(i.StrictMode,{},[i.createElement(t,Object.assign(Object.assign({},n),{onCreate:(e,t)=>{s=e}}),r)]);return a.render(o,e),s}static createReactComponent2(e,t,n={},r){let s;const o=i.createElement(i.StrictMode,{},[i.createElement(t,Object.assign(Object.assign({},n),{onCreate:(e,t)=>{s=e}}),r)]);return a.hydrate(o,e),s}}class BinaryHelper{static readFileAsDataURL(e){return new Promise((t=>{const n=new FileReader;n.onload=()=>t(n.result),n.readAsDataURL(e)}))}}var l;!function(e){e.debug="debug",e.log="log",e.warn="warn",e.error="error"}(l||(l={}));const u=[l.debug,l.log,l.warn,l.error];const c=new Proxy(console,{get:(e,t,n)=>"function"==typeof e[t]?function(...r){if(u.indexOf(t)>=u.indexOf("object"==typeof window?window.QFORMS_LOG_LEVEL||"debug":"object"==typeof global?process.env.QFORMS_LOG_LEVEL||"log":"debug")){if("undefined"==typeof jest)return e[t].apply(n,r);"error"===t?process.stderr.write(`${r.join(" ")}\n`):process.stdout.write(`${r.join(" ")}\n`)}}:e[t]});class ClipboardHelper{static async copyTextToClipboard(e){c.debug("Helper.copyTextToClipboard",e),navigator.clipboard?await navigator.clipboard.writeText(e):ClipboardHelper.fallbackCopyTextToClipboard(e)}static fallbackCopyTextToClipboard(e){const t=document.activeElement,n=document.createElement("textarea");n.value=e,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select(),document.execCommand("copy"),document.body.removeChild(n),t.focus()}}class DateTimeHelper{static today(e){let t=Date.now();null!=e&&(t+=DateTimeHelper.MINUTE()*e);const n=new Date(t);return t=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime(),null!=e&&(t-=DateTimeHelper.MINUTE()*e),new Date(t)}static today2(){const e=new Date;return DateTimeHelper.getStartOfDay(e)}static getStartOfDay(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}static SECOND(){return 1e3}static MINUTE(){return 60*DateTimeHelper.SECOND()}static HOUR(){return 60*DateTimeHelper.MINUTE()}static DAY(){return 24*DateTimeHelper.HOUR()}static WEEK(){return 7*DateTimeHelper.DAY()}static addMinutes(e,t){e.setMinutes(e.getMinutes()+t)}static removeTimezoneOffset(e){DateTimeHelper.addMinutes(e,-e.getTimezoneOffset())}static addTimezoneOffset(e){DateTimeHelper.addMinutes(e,e.getTimezoneOffset())}static cloneDate(e){return new Date(e.getTime())}static currentTime(){const e=new Date,t=[e.getHours(),e.getMinutes(),e.getSeconds()],n=t.map((e=>e.toString()));for(let e=0;e<t.length;e++)t[e]<10&&(n[e]="0"+n[e]);return n.join(":")}}r.W.registerGlobalClass(DateTimeHelper);var d=n(65);function h(e,t,n,s){const i={action:o.aU.read,page:e,form:t,ds:n};return s&&(i.params=r.W.encodeObject(s)),i}function g(e){if("object"==typeof window){if(window[e.name])throw new Error(`window.${e.name} already used`);window[e.name]=e}else{if(global[e.name])throw new Error(`global.${e.name} already used`);global[e.name]=e}}function p(e){return"object"==typeof window?window[e]:global[e]}var f=n(893);const m=e=>(0,f.jsxs)("svg",Object.assign({width:"10px",height:"10px",viewBox:"0 0 10 10"},{children:[(0,f.jsx)("line",{x1:"2",y1:"2",x2:"8",y2:"8",stroke:"#aaa",strokeWidth:1,strokeMiterlimit:"10"}),(0,f.jsx)("line",{x1:"8",y1:"2",x2:"2",y2:"8",stroke:"#aaa",strokeWidth:1,strokeMiterlimit:"10"})]}));"object"==typeof window&&(window.CloseIcon=m);const w=e=>{const t=e.size||24;return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:t,width:t,viewBox:"0 0 24 24",fill:"#000000"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M15.61 7.41L14.2 6l-6 6 6 6 1.41-1.41L11.03 12l4.58-4.59z"})]}))};"object"==typeof window&&(window.LeftIcon=w);const b=e=>{const t=e.size||24;return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:t,width:t,viewBox:"0 0 24 24",fill:"#000000"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})]}))};"object"==typeof window&&(window.RightIcon=b);const C=()=>(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"})]}));"object"==typeof window&&(window.OpenInNewIcon=C);class MoreVertIcon extends i.Component{render(){return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})]}))}}"object"==typeof window&&(window.MoreVertIcon=MoreVertIcon);const v=e=>{const t=e.size||24;return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})]}))};"object"==typeof window&&(window.CloseIcon2=v);class VisibilityIcon extends i.Component{render(){return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"})]}))}}"object"==typeof window&&(window.VisibilityIcon=VisibilityIcon);class VisibilityOffIcon extends i.Component{render(){return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0zm0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5-.59 1.22-1.42 2.27-2.41 3.12l1.41 1.41c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l1.65 1.65C10.66 6.09 11.32 6 12 6zm-1.07 1.14L13 9.21c.57.25 1.03.71 1.28 1.28l2.07 2.07c.08-.34.14-.7.14-1.07C16.5 9.01 14.48 7 12 7c-.37 0-.72.05-1.07.14zM2.01 3.87l2.68 2.68C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.98-.29 4.32-.82l3.42 3.42 1.41-1.41L3.42 2.45 2.01 3.87zm7.5 7.5l2.61 2.61c-.04.01-.08.02-.12.02-1.38 0-2.5-1.12-2.5-2.5 0-.05.01-.08.01-.13zm-3.4-3.4l1.75 1.75c-.23.55-.36 1.15-.36 1.78 0 2.48 2.02 4.5 4.5 4.5.63 0 1.23-.13 1.77-.36l.98.98c-.88.24-1.8.38-2.75.38-3.79 0-7.17-2.13-8.82-5.5.7-1.43 1.72-2.61 2.93-3.53z"})]}))}}"object"==typeof window&&(window.VisibilityOffIcon=VisibilityOffIcon);class LocationIcon extends i.Component{render(){const e=this.props.size||24;return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zM7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9z"}),(0,f.jsx)("circle",{cx:"12",cy:"9",r:"2.5"})]}))}}"object"==typeof window&&(window.LocationIcon=LocationIcon);class SettingsIcon extends i.Component{render(){return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})]}))}}"object"==typeof window&&(window.SettingsIcon=SettingsIcon);class DoneIcon_DoneIcon extends i.Component{render(){return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})]}))}}"object"==typeof window&&(window.DoneIcon=DoneIcon_DoneIcon);class CancelIcon extends i.Component{render(){return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none",opacity:".87"}),(0,f.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"})]}))}}"object"==typeof window&&(window.CancelIcon=CancelIcon);class PhoneIcon extends i.Component{render(){const e=this.props.size||24;return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:e,width:e,viewBox:"0 0 24 24"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"})]}))}}"object"==typeof window&&(window.PhoneIcon=PhoneIcon);class PasswordIcon extends i.Component{render(){return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},{children:[(0,f.jsx)("g",{children:(0,f.jsx)("path",{d:"M0,0h24v24H0V0z",fill:"none"})}),(0,f.jsx)("g",{children:(0,f.jsx)("g",{children:(0,f.jsx)("path",{d:"M2,17h20v2H2V17z M3.15,12.95L4,11.47l0.85,1.48l1.3-0.75L5.3,10.72H7v-1.5H5.3l0.85-1.47L4.85,7L4,8.47L3.15,7l-1.3,0.75 L2.7,9.22H1v1.5h1.7L1.85,12.2L3.15,12.95z M9.85,12.2l1.3,0.75L12,11.47l0.85,1.48l1.3-0.75l-0.85-1.48H15v-1.5h-1.7l0.85-1.47 L12.85,7L12,8.47L11.15,7l-1.3,0.75l0.85,1.47H9v1.5h1.7L9.85,12.2z M23,9.22h-1.7l0.85-1.47L20.85,7L20,8.47L19.15,7l-1.3,0.75 l0.85,1.47H17v1.5h1.7l-0.85,1.48l1.3,0.75L20,11.47l0.85,1.48l1.3-0.75l-0.85-1.48H23V9.22z"})})})]}))}}"object"==typeof window&&(window.PasswordIcon=PasswordIcon);class DeleteIcon extends i.Component{render(){return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4h-3.5z"})]}))}}"object"==typeof window&&(window.DeleteIcon=DeleteIcon);class EditIcon extends i.Component{render(){return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})]}))}}"object"==typeof window&&(window.EditIcon=EditIcon);const y=e=>(0,f.jsx)("svg",Object.assign({width:"10px",height:"6px",viewBox:"0 0 10 6"},{children:(0,f.jsx)("path",{d:"M1.429.253a.819.819 0 0 0-1.184 0 .883.883 0 0 0 0 1.22l4.142 4.274A.821.821 0 0 0 5 6a.821.821 0 0 0 .612-.253l4.143-4.273a.883.883 0 0 0 0-1.221.819.819 0 0 0-1.184 0L5 3.937 1.429.253z"})}));"object"==typeof window&&(window.ArrowIcon=y);class DownIcon extends i.Component{render(){const e=this.props.size||24;return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:e,width:e,viewBox:"0 0 24 24"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})]}))}}"object"==typeof window&&(window.DoneIcon=DoneIcon);class DateIcon extends i.Component{render(){return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"#000000"},{children:[(0,f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,f.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V10h16v11zm0-13H4V5h16v3z"})]}))}}"object"==typeof window&&(window.DateIcon=DateIcon);class TimeIcon extends i.Component{render(){return(0,f.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"#000000"},{children:[(0,f.jsx)("g",{children:(0,f.jsx)("rect",{fill:"none",height:"24",width:"24",x:"0"})}),(0,f.jsx)("g",{children:(0,f.jsx)("g",{children:(0,f.jsx)("path",{d:"M12,2C6.5,2,2,6.5,2,12s4.5,10,10,10s10-4.5,10-10S17.5,2,12,2z M12,20c-4.41,0-8-3.59-8-8s3.59-8,8-8s8,3.59,8,8 S16.41,20,12,20z M12.5,7H11v6l5.2,3.2l0.8-1.3l-4.5-2.7V7z"})})})]}))}}"object"==typeof window&&(window.TimeIcon=TimeIcon);class Button extends ReactComponent{constructor(e){super(e),this.state={disabled:void 0},this.el=(0,i.createRef)()}isVisible(){return void 0===this.props.visible||this.props.visible}getStyle(){return{display:this.isVisible()?void 0:"none",width:this.props.width}}render(){return(0,f.jsx)("button",Object.assign({className:this.getCssClassNames(),ref:this.el,id:this.props.id,type:this.props.type,name:this.props.name,disabled:this.isDisabled(),onClick:this.props.onClick,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onKeyDown:this.props.onKeyDown,style:this.getStyle()},{children:this.props.title||this.props.children}))}}"object"==typeof window&&(window.Button=Button);class Box extends ReactComponent{constructor(e){super(e),this.update=()=>{console.debug("Box.update"),this.setState({backgroundColor:"green"})},this.state={backgroundColor:"purple"}}componentDidMount(){console.debug("Box.componentDidMount")}componentWillUnmount(){console.debug("Box.componentWillUnmount")}shouldComponentUpdate(e,t){return console.debug("Box.shouldComponentUpdate",e,t),!0}componentDidUpdate(){console.debug("Box.componentDidUpdate")}render(){return console.debug("Box.render"),(0,f.jsxs)("div",Object.assign({className:"Box"},{children:[(0,f.jsx)(Button,{name:"one"}),(0,f.jsx)(Button,{name:"two"}),(0,f.jsx)(Button,{name:"three"})]}))}}"object"==typeof window&&(window.Box=Box);class CheckBox extends ReactComponent{constructor(e){if(super(e),this.onChange=e=>{this.props.readOnly||this.setState((t=>(this.props.onChange&&this.props.onChange(!t.checked,e),{checked:!t.checked})))},this.onClick=e=>{this.props.readOnly||(this.props.onChange&&this.props.onChange(!0),this.setState({checked:!0}))},void 0!==this.props.checked&&null!==this.props.checked&&"boolean"!=typeof this.props.checked)throw new Error(`wrong checked prop: ${this.props.checked}`);this.state={checked:"boolean"==typeof this.props.checked?this.props.checked:null}}getValue(){return this.state.checked}shouldComponentUpdate(e,t){return this.state.checked="boolean"==typeof e.checked?e.checked:null,!0}render(){return null===this.state.checked?(0,f.jsx)("div",Object.assign({className:`${this.getCssClassNames()} ${this.isDisabled()?"disabled":""}`,onClick:this.onClick},{children:"?"})):(0,f.jsx)("input",{className:this.getCssClassNames(),type:"checkbox",id:this.props.id,checked:this.state.checked,readOnly:this.props.readOnly,disabled:this.props.disabled,"data-tag":this.props.tag,onChange:this.onChange})}}"object"==typeof window&&(window.CheckBox=CheckBox);class ComboBox extends ReactComponent{constructor(e){if(super(e),this.onChange=async e=>{this.setState({value:e.target.value}),this.props.onChange&&await this.props.onChange(e.target.value)},this.onMouseDown=async e=>{this.props.onMouseDown&&await this.props.onMouseDown(e)},!e.items)throw new Error("no ComboBox items");this.state={value:this.getInitialValue()}}getInitialValue(){let e=null;if(void 0!==this.props.value&&null!==this.props.value){e=this.props.value;this.props.items.find((e=>e.value===this.props.value))||this.props.nullable&&""===e||(console.error("ComboBox: no item for value:",JSON.stringify(this.props.value)),console.debug("items:",this.props.items))}else e=this.props.items.length?this.props.items[0].value:"";if(null===e)throw new Error("null is wrong value for ComboBox");return e}getValue(){return this.state.value}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}render(){return(0,f.jsxs)("select",Object.assign({className:this.getCssClassNames(),onChange:this.onChange,value:this.state.value,disabled:this.props.readOnly,size:this.props.size,style:this.props.style,id:this.props.id,onDoubleClick:this.props.onDoubleClick,onMouseDown:this.onMouseDown},{children:[this.props.nullable&&(0,f.jsx)("option",Object.assign({value:""},{children:this.props.placeholder})),this.props.items&&this.props.items.map((e=>(0,f.jsx)("option",Object.assign({value:e.value},{children:e.title||e.value}),e.value)))]}))}}"object"==typeof window&&(window.ComboBox=ComboBox);class Tab extends ReactComponent{constructor(e){super(e),this.onLiMouseDown=e=>{if(e.target.classList.contains("close"))return;const t=parseInt(e.currentTarget.dataset.i);this.props.getActive?this.props.onTabMouseDown&&this.props.onTabMouseDown(t):t!==this.getActive()&&this.selectTab(t)},this.onLiClick=e=>{if(e.target.classList.contains("close")){const t=parseInt(e.currentTarget.dataset.i);this.props.onTabClose&&this.props.onTabClose(t)}},this.state={active:0}}getActive(){return this.props.getActive?this.props.getActive():this.state.active}selectTab(e){if(e===this.getActive())return;const t=Date.now();this.setState({active:e},(()=>console.debug("selectTab time:",Date.now()-t)))}renderTitles(){return this.props.tabs.map(((e,t)=>(0,f.jsxs)("li",Object.assign({className:t===this.getActive()?"active":void 0,onMouseDown:this.onLiMouseDown,onClick:this.onLiClick,"data-i":t},{children:[(0,f.jsx)("span",{children:e.title}),this.props.canClose&&(0,f.jsx)("span",Object.assign({className:"close"},{children:""}))]}),e.name)))}renderContents(){return this.props.tabs.map(((e,t)=>(0,f.jsx)("div",Object.assign({className:t===this.getActive()?"active":void 0},{children:e.content}),e.name)))}render(){return(0,f.jsxs)("div",Object.assign({className:this.getCssClassNames()},{children:[(0,f.jsx)("ul",{children:this.props.tabs&&this.renderTitles()}),(0,f.jsx)("div",{children:this.props.tabs&&this.renderContents()})]}))}}"object"==typeof window&&(window.Tab=Tab);class DropdownButton extends ReactComponent{constructor(e){super(e),this.onButtonClick=e=>{this.setState((e=>({open:!e.open})))},this.onButtonBlur=e=>{this.state.open&&this.setState({open:!1})},this.onKeyDown=e=>{"Escape"===e.key&&this.state.open&&(this.setState({open:!1}),e.stopPropagation())},this.onUlMouseDown=e=>{e.preventDefault()},this.onLiClick=async e=>{const t=e.currentTarget;this.setState({open:!1},(()=>{this.props.onClick&&this.props.onClick(t)}))},this.state={open:!1,disabled:!1}}isEnabled(){return void 0!==this.props.enabled?this.props.enabled:!this.state.disabled}render(){return(0,f.jsxs)("div",Object.assign({className:`${this.getCssClassNames()} ${this.state.open&&"show"}`},{children:[(0,f.jsx)(Button,Object.assign({classList:[`${this.getCssBlockName()}__button`],onClick:this.onButtonClick,onBlur:this.onButtonBlur,enabled:this.isEnabled(),onKeyDown:this.onKeyDown},{children:this.props.title||this.props.children})),(0,f.jsx)("ul",Object.assign({className:`${this.getCssBlockName()}__dropdown`,onMouseDown:this.onUlMouseDown},{children:this.props.actions&&this.props.actions.map((e=>(0,f.jsx)("li",Object.assign({className:`${this.getCssBlockName()}__item ${!1===e.enabled?"disabled":""}`,"data-action":e.name,onClick:!1!==e.enabled?this.onLiClick:void 0},{children:e.title}),e.name)))}))]}))}}r.W.registerGlobalClass(DropdownButton);class TextBox extends ReactComponent{constructor(e){super(e),this.onChange=e=>{this._setValue(e.target.value)},this.el=(0,i.createRef)(),this.state={value:this.props.value||""}}getValue(){return this.state.value}_setValue(e){this.state.value=e,this.forceUpdate(),this.props.onChange&&this.props.onChange(e)}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}render(){return(0,f.jsx)("input",{ref:this.el,className:this.getCssClassNames(),type:this.props.type||"text",id:this.props.id,name:this.props.name,readOnly:this.props.readOnly,disabled:this.isDisabled(),placeholder:this.props.placeholder,autoFocus:this.props.autoFocus,spellCheck:this.props.spellCheck,autoComplete:this.props.autocomplete,required:this.props.required,value:this.state.value,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onChange:this.onChange})}}"object"==typeof window&&(window.TextBox=TextBox);class GridRow extends ReactComponent{isCellActive(e){return this.props.active&&this.props.activeColumn===e}shouldComponentUpdate(e,t){return!this.props.updated||(!!(e.updated-this.props.updated)||(!!(e.resized-this.props.resized)||(this.props.active!==e.active||!(!this.props.active||this.props.activeColumn===e.activeColumn))))}render(){const e=this.props.grid,t=this.props.row,n=this.props.i,r=this.props.rowKey,s=e.props.createLinkCallback?e.props.createLinkCallback(r):null;return(0,f.jsxs)("a",Object.assign({className:`${e.getCssBlockName()}__tr ${this.props.active?"active":""}`,"data-key":r,href:s,onClick:e.onLinkClick},{children:[e.props.columns.map(((s,o)=>(0,f.jsx)("div",Object.assign({className:`${e.getCssBlockName()}__td ${this.isCellActive(o)?"active":""}`,style:{width:e.getColumnWidth(o)},"data-rc":`[${n},${o}]`,"data-row":r,onMouseDown:e.onCellMouseDown,onDoubleClick:e.onCellDoubleClick},{children:e.renderCell(t,s)}),s.name))),!!e.props.extraColumn&&(0,f.jsx)("div",{className:`${e.getCssBlockName()}__td`,"data-r":n,"data-row":r,onMouseDown:e.onRowMouseDown,onDoubleClick:e.onRowDoubleClick})]}))}}"object"==typeof window&&(window.GridRow=GridRow);class GridCell extends ReactComponent{constructor(e){super(e),this.span=i.createRef()}getSpanOffsetWidth(){return this.span.current?this.span.current.offsetWidth:0}renderCellValue(e){const t=this.props.grid.props.decodeValue?r.W.decodeValue(e):e;return"boolean"==typeof t?t.toString():t}render(){const e=this.props.row,t=this.props.column;return(0,f.jsx)("div",Object.assign({className:`${this.getCssClassNames()} ellipsis`},{children:(0,f.jsx)("span",Object.assign({ref:this.span},{children:this.renderCellValue(e[t.name])}))}))}}"object"==typeof window&&(window.GridCell=GridCell);class Grid extends ReactComponent{constructor(e){super(e),this.onCellMouseDown=async e=>{if(console.debug("Grid.onCellMouseDown",this.isLink()),e.preventDefault(),this.isDisabled())return;this.getElement().focus();const t=e.button,[n,r]=JSON.parse(e.currentTarget.dataset.rc),s=this.props.rows[n],o=e.currentTarget.dataset.row;await this.selectCell(o,r),0===t&&this.props.onClick&&this.props.onClick(s,o)},this.onRowMouseDown=async e=>{console.debug("Grid.onRowMouseDown",this.isLink());const t=e.currentTarget.dataset.row;await this.selectRow(t)},this.onCellDoubleClick=async e=>{const t=e.button,[n,r]=JSON.parse(e.currentTarget.dataset.rc),s=this.props.rows[n],o=e.currentTarget.dataset.row;0===t&&this.props.onDoubleClick&&await this.props.onDoubleClick(s,o)},this.onRowDoubleClick=async e=>{const t=parseInt(e.currentTarget.dataset.r),n=this.props.rows[t],r=e.currentTarget.dataset.row;this.props.onDoubleClick&&await this.props.onDoubleClick(n,r)},this.onKeyDown=async e=>{if(!this.isDisabled())switch(e.keyCode){case 37:e.preventDefault(),await this.onLeft();break;case 38:e.preventDefault(),await this.onUp();break;case 39:e.preventDefault(),await this.onRight();break;case 40:e.preventDefault(),await this.onDown();break;case 13:e.preventDefault(),await this.onEnter();break;case 46:e.preventDefault(),await this.onDelete();break;case 67:e.ctrlKey&&(e.preventDefault(),await this.onCopy())}},this.onResizeDoubleClick=async e=>{console.debug("Grid.onResizeDoubleClick",e.target);const t=parseInt(e.target.dataset.i),n=this.props.columns[t];this.state.columnWidth[n.name]!==this.getMaxColumnWidth(n)&&(this.state.columnWidth[n.name]=this.getMaxColumnWidth(n),this.state.resized=Date.now(),await this.rerender())},this.onCellViewCreate=e=>{const t=e.props.column.name;void 0===this.columns[t]&&(this.columns[t]=[]),this.columns[t].push(e)},this.onCellViewUnmount=e=>{const t=e.props.column.name,n=this.columns[t].indexOf(e);if(-1===n)throw new Error("cannot find FieldView in Grid.columns");this.columns[t].splice(n,1)},this.onBodyScroll=async e=>{this.head.current.scrollLeft=e.target.scrollLeft},this.onLinkClick=async e=>{console.debug("Grid.onLinkClick",e.ctrlKey),e.ctrlKey||e.preventDefault()},this.state={key:this.props.selectedKey||null,column:this.props.selectedKey&&this.props.columns&&this.props.columns.length?0:null,columnWidth:{},resized:Date.now()},this.columns={},this.el=i.createRef(),this.head=i.createRef()}getActiveColumn(){return this.state.column}setActiveColumn(e){this.state.column=e}getActiveRowKey(){return this.state.key}setActiveRowKey(e){this.state.key=e}isRowActive(e,t){return this.getActiveRowKey()===t}async onCopy(){console.debug("Grid.onCopy");const e=this.findRow(this.getActiveRowKey())[this.props.columns[this.getActiveColumn()].name];await ClipboardHelper.copyTextToClipboard(e)}findRow(e){return this.props.rows.find((t=>this.getRowKey(t)===e))}async onLeft(){console.debug("Grid.onLeft");const e=this.getActiveColumn();e-1>=0&&(this.setActiveColumn(e-1),await this.rerender())}async onUp(){console.debug("Grid.onUp");const e=this.getActiveRowKey(),t=this.findRow(e),n=this.props.rows.indexOf(t);if(n-1>=0){const e=this.props.rows[n-1],t=this.getRowKey(e);this.setActiveRowKey(t),await this.rerender()}}async onRight(){console.debug("Grid.onRight");const e=this.getActiveColumn();e+1<=this.props.columns.length-1&&(this.setActiveColumn(e+1),await this.rerender())}async onDown(){console.debug("Grid.onDown");const e=this.getActiveRowKey(),t=this.findRow(e),n=this.props.rows.indexOf(t);if(n+1<=this.props.rows.length-1){const e=this.props.rows[n+1],t=this.getRowKey(e);this.setActiveRowKey(t),await this.rerender()}}async onEnter(){console.debug("Grid.onEnter");const e=this.getActiveRowKey(),t=this.findRow(e);this.props.onDoubleClick&&await this.props.onDoubleClick(t,e)}async onDelete(){console.debug("Grid.onDelete");const e=this.getActiveRowKey(),t=this.findRow(e);this.props.onDeleteKeyDown&&await this.props.onDeleteKeyDown(t,e)}async selectCell(e,t){this.getActiveRowKey()===e&&this.getActiveColumn()===t||(this.setActiveRowKey(e),this.setActiveColumn(t),this.props.onSelectionChange?await this.props.onSelectionChange(e):await this.rerender())}async selectRow(e){this.getActiveRowKey()!==e&&(this.setActiveRowKey(e),this.props.onSelectionChange?await this.props.onSelectionChange(e):await this.rerender())}getMaxColumnWidth(e){return Math.max(...this.columns[e.name].map((e=>e.getSpanOffsetWidth())))+10+2}getColumnWidth(e){const t=this.props.columns[e];return void 0!==this.state.columnWidth[t.name]?this.state.columnWidth[t.name]:t.width}renderColumns(){return this.props.columns.map(((e,t)=>(0,f.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__th`,style:{width:this.getColumnWidth(t)}},{children:[(0,f.jsx)("div",Object.assign({className:"ellipsis",style:{textAlign:e.align}},{children:e.title||e.name})),(0,f.jsx)("span",{className:"Grid__resize","data-i":t,onDoubleClick:this.onResizeDoubleClick})]}),e.name)))}renderRows(){return this.props.rows.map(((e,t)=>{const n=this.getRowKey(e);return(0,f.jsx)(GridRow,{rowKey:n,grid:this,row:e,i:t,active:this.isRowActive(t,n),activeColumn:this.getActiveColumn(),updated:this.props.updated,resized:this.state.resized},n)}))}getRowKey(e){return this.props.getRowKey?this.props.getRowKey(e):this.props.rows.indexOf(e).toString()}renderCell(e,t){let n;return this.props.renderGridCellView&&(n=this.props.renderGridCellView(e,t,this.onCellViewCreate,this.onCellViewUnmount)),n||(0,f.jsx)(GridCell,{grid:this,row:e,column:t,onCreate:this.onCellViewCreate,onUnmount:this.onCellViewUnmount})}shouldComponentUpdate(e,t){return!this.props.updated||!!(e.updated-this.props.updated)}render(){return(0,f.jsxs)("div",Object.assign({className:`${this.getCssClassNames()} ${this.isDisabled()?"disabled":""}`,ref:this.el,tabIndex:0,onKeyDown:this.onKeyDown},{children:[(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__head`,ref:this.head},{children:(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__table`},{children:(0,f.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__tr`},{children:[this.props.columns&&this.renderColumns(),!!this.props.extraColumn&&(0,f.jsx)("div",{className:`${this.getCssBlockName()}__th`})]}))}))})),(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__body`,onScroll:this.onBodyScroll},{children:(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__table`},{children:this.props.rows&&this.renderRows()}))}))]}))}isLink(){return!!this.props.createLinkCallback}}"object"==typeof window&&(window.Grid=Grid);class Modal extends ReactComponent{render(){return(0,f.jsx)("div",Object.assign({className:this.getCssClassNames()},{children:(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__container`},{children:this.props.children}))}))}}"object"==typeof window&&(window.Modal=Modal);class Password extends ReactComponent{constructor(e){super(e),this.onChange=e=>{this._setValue(e.target.value)},this.onCloseClick=e=>{this._setValue(""),this.getInputElement().focus()},this.onIconClick=e=>{this.setState((e=>({type:"password"===e.type?"text":"password"}))),this.getInputElement().focus()},this.el=i.createRef(),this.inputEl=i.createRef(),this.state={value:this.props.value||"",type:"password"}}getInputElement(){return this.inputEl.current}getValue(){return this.state.value}_setValue(e){this.state.value=e,this.forceUpdate(),this.props.onChange&&this.props.onChange(e)}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}isCloseVisible(){return""!==this.state.value}render(){return(0,f.jsxs)("div",Object.assign({ref:this.el,className:this.getCssClassNames()},{children:[(0,f.jsx)("input",{ref:this.inputEl,className:`${this.getCssBlockName()}__input`,type:this.state.type,id:this.props.id,name:this.props.name,readOnly:this.props.readOnly,disabled:this.props.disabled,placeholder:this.props.placeholder,autoFocus:this.props.autoFocus,spellCheck:this.props.spellCheck,autoComplete:this.props.autocomplete,value:this.state.value,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onChange:this.onChange}),(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__close ${this.isCloseVisible()?"visible":""}`,onClick:this.onCloseClick},{children:(0,f.jsx)(m,{})})),(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__icon`,onClick:this.onIconClick},{children:"password"===this.state.type?(0,f.jsx)(VisibilityIcon,{}):(0,f.jsx)(VisibilityOffIcon,{})}))]}))}}"object"==typeof window&&(window.Password=Password);class Menu extends ReactComponent{constructor(e){super(e),this.onMenuClick=async e=>{await this.toggleMenu(e.currentTarget.dataset.menu)},this.onBlur=async e=>{await this.closeMenu(e.currentTarget.dataset.menu)},this.onMouseDown=e=>{e.preventDefault()},this.onMenuItemClick=async e=>{e.persist();const{menu:t,type:n,name:r}=e.target.dataset;await this.closeMenu(t),this.props.onClick&&this.props.onClick(t,n,r)},this.state={}}toggleMenu(e){return new Promise((t=>{this.setState((t=>({[e]:!t[e]})),t)}))}closeMenu(e){return new Promise((t=>this.setState({[e]:!1},t)))}render(){return(0,f.jsx)("div",Object.assign({className:"Menu"},{children:this.props.items&&this.props.items.map((e=>(0,f.jsxs)("div",Object.assign({className:this.state[e.name]?"active":void 0},{children:[(0,f.jsx)("button",Object.assign({"data-menu":e.name,onClick:this.onMenuClick,onBlur:this.onBlur},{children:e.title})),(0,f.jsx)("div",Object.assign({onMouseDown:this.onMouseDown,onClick:this.onMenuItemClick},{children:e.items.map((t=>(0,f.jsx)("a",Object.assign({href:this.props.hostApp.createLink({page:t.name}),"data-menu":e.name,"data-type":t.type,"data-name":t.name},{children:t.title}),t.name)))}))]}),e.name)))}))}}"object"==typeof window&&(window.Menu=Menu);class Statusbar extends ReactComponent{constructor(e){super(e),this.state={}}setLastQueryTime(e){this.setState({lastQueryTime:e})}render(){return(0,f.jsx)("div",Object.assign({className:"Statusbar"},{children:(0,f.jsxs)("div",{children:["Last query time:"," ",this.state.lastQueryTime?`${this.state.lastQueryTime} ms`:"-"]})}))}}"object"==typeof window&&(window.Statusbar=Statusbar);class Tooltip extends ReactComponent{render(){return(0,f.jsxs)("div",Object.assign({className:`Tooltip ${this.props.type} ${this.props.hidden?"hidden":""}`},{children:["alert"!==this.props.type&&(0,f.jsx)("div",{children:"tooltip"}),(0,f.jsx)("span",Object.assign({className:this.props.position},{children:this.props.tip||"tip"}))]}))}}"object"==typeof window&&(window.Tooltip=Tooltip);class DatePicker extends ReactComponent{constructor(e){if(super(e),this.onClick=e=>{if(console.debug("DatePicker.onClick",e.target),"TD"===e.target.nodeName&&e.target.classList.contains("selectable"))return this.onDateClick(e.target)},this.onMouseDown=e=>{if(this.props.onMouseDown)return this.props.onMouseDown(e)},this.onNextClick=e=>{this.setState((e=>{const t=new Date(e.selectedMonth[0],e.selectedMonth[1]);return t.setMonth(t.getMonth()+1),{selectedMonth:[t.getFullYear(),t.getMonth()]}}))},this.onPrevClick=e=>{this.setState((e=>{const t=new Date(e.selectedMonth[0],e.selectedMonth[1]);return t.setMonth(t.getMonth()-1),{selectedMonth:[t.getFullYear(),t.getMonth()]}}))},this.props.minDate&&!(this.props.minDate instanceof Array))throw new Error("minDate must be array");this.state={selectedMonth:this.calcSelectedMonth()},this.MONTH=["","","","","","","","","","","",""]}static createDateFromArr(e){return new Date(e[0],e[1],e[2])}isVisible(){return!1!==this.props.visible}calcSelectedMonth(){if(this.props.selectedDate)return[this.props.selectedDate[0],this.props.selectedDate[1]];if(this.props.highlightedDate)return[this.props.highlightedDate[0],this.props.highlightedDate[1]];{const e=[DateTimeHelper.today2().getTime()];this.props.minDate&&e.push(DatePicker.createDateFromArr(this.props.minDate).getTime());const t=new Date(Math.min(...e));return[t.getFullYear(),t.getMonth()]}}static getTodayArr(){return DatePicker.dateToArray(new Date)}static dateToArray(e){return[e.getFullYear(),e.getMonth(),e.getDate()]}static getDay(e){let t=e.getDay()-1;return-1===t&&(t=6),0===t&&(t=7),t}createSelectedDate(){if(!this.isDateSelected())throw new Error("date not selected");return new Date(...this.props.selectedDate)}isDateSelected(){return!!this.props.selectedDate}getFirstDateOfTable(){const e=new Date(this.state.selectedMonth[0],this.state.selectedMonth[1],1);return e.setDate(e.getDate()-DatePicker.getDay(e)),e}createMinDate(){if(!this.props.minDate)throw new Error("no min date");return new Date(this.props.minDate[0],this.props.minDate[1],this.props.minDate[2])}isMinDate(){return!!this.props.minDate}isPrevAllowed(){const e=new Date(this.state.selectedMonth[0],this.state.selectedMonth[1]);return e.setMonth(e.getMonth()-1),this.isMonthAllowed(e)}isMonthAllowed(e){if(this.isMinDate()){const t=new Date(this.props.minDate[0],this.props.minDate[1]);return e.getTime()>=t.getTime()}return!0}onDateClick(e){this.props.onDateSelected&&this.props.onDateSelected(JSON.parse(e.dataset.date))}render(){const e=this.getFirstDateOfTable(),t=DateTimeHelper.today2(),n=this.isMinDate()?this.createMinDate():null,r=this.isDateSelected()?this.createSelectedDate():null,s=this.props.highlightedDate?new Date(...this.props.highlightedDate):null;return(0,f.jsxs)("table",Object.assign({className:`${this.getCssClassNames()} ${this.isVisible()?"visible":""}`,onClick:this.onClick,onMouseDown:this.onMouseDown},{children:[(0,f.jsx)("caption",Object.assign({className:`${this.getCssBlockName()}__caption`},{children:(0,f.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__caption-content`},{children:[(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__caption-link ${this.isPrevAllowed()?"enabled":""}`,onClick:this.onPrevClick},{children:(0,f.jsx)(w,{size:18})})),(0,f.jsx)("span",Object.assign({className:`${this.getCssBlockName()}__caption-title`},{children:`${this.MONTH[this.state.selectedMonth[1]]}, ${this.state.selectedMonth[0]}`})),(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__caption-link enabled`,onClick:this.onNextClick},{children:(0,f.jsx)(b,{size:18})}))]}))})),(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",Object.assign({className:`${this.getCssBlockName()}__th`},{children:""})),(0,f.jsx)("th",Object.assign({className:`${this.getCssBlockName()}__th`},{children:""})),(0,f.jsx)("th",Object.assign({className:`${this.getCssBlockName()}__th`},{children:""})),(0,f.jsx)("th",Object.assign({className:`${this.getCssBlockName()}__th`},{children:""})),(0,f.jsx)("th",Object.assign({className:`${this.getCssBlockName()}__th`},{children:""})),(0,f.jsx)("th",Object.assign({className:`${this.getCssBlockName()}__th weekend`},{children:""})),(0,f.jsx)("th",Object.assign({className:`${this.getCssBlockName()}__th weekend`},{children:""}))]})}),(0,f.jsx)("tbody",{children:Array.from(Array(6).keys()).map((o=>(0,f.jsx)("tr",{children:Array.from(Array(7).keys()).map((o=>{const i=[];5!==o&&6!==o||i.push("weekend"),this.isSelectToday()&&e.getTime()===t.getTime()&&i.push("today"),e.getMonth()!==this.state.selectedMonth[1]&&i.push("out"),n?e.getTime()>=n.getTime()&&i.push("selectable"):i.push("selectable"),r&&e.getTime()===r.getTime()&&i.push("selected"),s&&s.getTime()===e.getTime()&&i.push("highlight");const a=e.getDate().toString(),l=JSON.stringify(DatePicker.dateToArray(e)),u=this.props.getDateStyle?this.props.getDateStyle(e):null;return e.setDate(e.getDate()+1),(0,f.jsx)("td",Object.assign({className:`${this.getCssBlockName()}__td  ${i.join(" ")}`,style:u,"data-date":l},{children:a}),a)}))},o)))})]}))}isSelectToday(){return!1!==this.props.selectToday}}"object"==typeof window&&(window.DatePicker=DatePicker);class DropdownDatePicker extends ReactComponent{constructor(e){if(super(e),this.onInputClick=e=>{this.props.readOnly||this.setState((e=>({open:!e.open})))},this.onInputKeyDown=e=>{"Escape"===e.key&&this.state.open&&(this.setState({open:!1}),e.stopPropagation())},this.onCloseDown=async e=>{this.setState({value:null}),this.props.onChange&&this.props.onChange(null)},this.onBlur=e=>{this.state.open&&this.setState({open:!1})},this.onDatePickerMouseDown=e=>{e.preventDefault()},this.onDatePickerDateSelected=e=>{const t=new Date(e[0],e[1],e[2]);this.setState({open:!1,value:t}),this.props.onChange&&this.props.onChange(t)},this.state={open:!1,value:e.value||null},e.value&&!(e.value instanceof Date))throw new Error("need Date type, got "+typeof e.value)}getFormat(){return this.props.format||"{DD}.{MM}.{YYYY} {hh}:{mm}:{ss}"}getStringValue(){const e=this.getValue();if(e){let t=this.getFormat();if(this.isDebugMode()){const n=d.G.formatDate(e,"{hh}:{mm}:{ss}");"{DD}.{MM}.{YYYY}"===t&&"00:00:00"!==n&&(t="{DD}.{MM}.{YYYY} {hh}:{mm}:{ss}")}return d.G.formatDate(e,t)}return""}getSelectedMonth(){return this.getValue()?[this.getValue().getFullYear(),this.getValue().getMonth()]:null}getSelectedDate(){return this.getValue()?[this.getValue().getFullYear(),this.getValue().getMonth(),this.getValue().getDate()]:null}getValue(){return this.state.value}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}getClassList(){return[...super.getClassList(),...this.props.readOnly?["read-only"]:[]]}renderInput(){return(0,f.jsx)("input",{className:`${this.getCssBlockName()}__input`,type:"text",readOnly:!0,onClick:this.onInputClick,onBlur:this.onBlur,value:this.getStringValue(),placeholder:this.props.placeholder,onKeyDown:this.onInputKeyDown})}renderCloseIcon(){return(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__close ${""===this.getStringValue()||this.props.readOnly?"":"visible"}`,onMouseDown:this.onCloseDown},{children:(0,f.jsx)(m,{})}))}renderDateIcon(){return(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__icon`},{children:(0,f.jsx)(DateIcon,{})}))}renderDatePicker(){return(0,f.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__date-picker-container`},{children:[(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__date-picker-close`},{children:(0,f.jsx)(v,{})})),(0,f.jsx)(DatePicker,{minDate:this.props.minDate,selectedMonth:this.getSelectedMonth(),selectedDate:this.getSelectedDate(),onMouseDown:this.onDatePickerMouseDown,onDateSelected:this.onDatePickerDateSelected,selectToday:this.props.selectToday,highlightedDate:this.props.highlightedDate})]}))}render(){return(0,f.jsxs)("div",Object.assign({className:this.getCssClassNames()},{children:[this.renderInput(),this.renderCloseIcon(),this.renderDateIcon(),this.state.open&&this.renderDatePicker()]}))}isDebugMode(){return!0===this.props.debug}}"object"==typeof window&&(window.DropdownDatePicker=DropdownDatePicker);class Select extends ReactComponent{constructor(e){super(e),this.onKeyDown=async e=>{this.isVisible()&&(this.setState({visible:!1}),e.stopPropagation())},this.onInputMouseDown=async e=>{if(console.debug("Select.onInputMouseDown"),!this.props.readOnly)if(this.props.onMouseDown)await this.props.onMouseDown(e);else{if(!this.isVisible()){const[e]=this.el.current.querySelectorAll("li.selected");if(e){const t=e.offsetTop-this.dropdown.current.getBoundingClientRect().height/2+e.getBoundingClientRect().height/2;console.debug("scrollTop:",t),this.dropdown.current.scrollTop=t,console.debug("this.dropdown.current.scrollTop",this.dropdown.current.scrollTop)}}this.setState((e=>({visible:!e.visible})))}},this.onInputBlur=async e=>{console.debug("Select.onInputBlur",e.target),this.setState({visible:!1})},this.onDropdownMouseDown=async e=>{e.preventDefault()},this.onDropdownClick=async e=>{console.debug("Select.onDropdownClick",e.target.offsetTop);const t=JSON.parse(e.target.dataset.value);this.setState({value:t,visible:!1},(async()=>{this.props.onChange&&await this.props.onChange(t.toString())}))},this.onCloseClick=async e=>{this.setState({value:""}),this.props.onChange&&await this.props.onChange(""),this.getElement()},this.el=i.createRef(),this.dropdown=i.createRef(),this.state={value:this.getInitialValue(),visible:!1}}isVisible(){return this.state.visible}getInitialValue(){let e=null;if(void 0!==this.props.value&&null!==this.props.value){e=this.props.value;this.getItems().find((e=>e.value===this.props.value))||this.isNullable()&&""===e||(console.error("Select: no item for value:",JSON.stringify(this.props.value)),console.debug("items:",this.getItems()))}else e=this.isNullable()?"":this.props.items.length?this.props.items[0].value:"";if(null===e)throw new Error("null is wrong value for Select");return e}getValue(){return this.state.value}isNullable(){return void 0===this.props.nullable||this.props.nullable}getVisibility(){return this.isVisible()?"visible":"hidden"}getDisplay(){return this.isVisible()?"block":"none"}getItems(){return this.props.items||[]}getValueTitle(e){if(""===e)return"";const t=this.getItems().find((t=>t.value===e));if(!t)throw new Error(`cannot find item by value: ${e}`);return t.title||t.value}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}isCloseVisible(){return!this.props.readOnly&&""!==this.state.value}renderInput(){return(0,f.jsx)("input",{className:`${this.getCssBlockName()}__input`,readOnly:!0,disabled:this.props.readOnly,placeholder:this.props.placeholder,onBlur:this.onInputBlur,value:this.getValueTitle(this.getValue()),onMouseDown:this.onInputMouseDown,onKeyDown:this.onKeyDown})}renderClose(){return(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__close ${this.isCloseVisible()?"visible":""}`,onClick:this.onCloseClick},{children:(0,f.jsx)(m,{})}))}renderIcon(){return(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__icon ${this.isVisible()?"up":""}`},{children:(0,f.jsx)(y,{})}))}renderDropdown(){return(0,f.jsxs)("ul",Object.assign({ref:this.dropdown,className:`${this.getCssBlockName()}__dropdown`,style:{display:this.getDisplay()},onMouseDown:this.onDropdownMouseDown,onClick:this.onDropdownClick},{children:[this.isNullable()&&(0,f.jsx)("li",Object.assign({className:`${this.getCssBlockName()}__item`,"data-value":'""'},{children:""})),this.getItems().map((e=>(0,f.jsx)("li",Object.assign({className:`${this.getCssBlockName()}__item ellipsis ${this.getValue()===e.value?"selected":""}`,"data-value":JSON.stringify(e.value)},{children:e.title||e.value}),e.value)))]}))}render(){return(0,f.jsxs)("div",Object.assign({ref:this.el,className:this.getCssClassNames()},{children:[this.renderInput(),this.isNullable()&&this.renderClose(),this.renderIcon(),this.renderDropdown()]}))}}"object"==typeof window&&(window.Select=Select);class TextArea extends ReactComponent{constructor(e){super(e),this.onChange=e=>{this.setState({value:e.target.value}),this.props.onChange&&this.props.onChange(e.target.value)},this.state={value:this.props.value||""}}getValue(){return this.state.value}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}render(){return(0,f.jsx)("textarea",{className:this.getCssClassNames(),readOnly:this.props.readOnly,disabled:this.props.disabled,placeholder:this.props.placeholder,rows:this.props.rows,cols:this.props.cols,value:this.state.value,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur})}}"object"==typeof window&&(window.TextArea=TextArea);class Tab2 extends ReactComponent{constructor(e){super(e),this.onLiMouseDown=e=>{if(e.target.classList.contains("close"))return;const t=parseInt(e.currentTarget.dataset.i);this.props.getActive?this.props.onTabMouseDown&&this.props.onTabMouseDown(t):t!==this.getActive()&&this.selectTab(t)},this.onLiClick=e=>{if(e.target.classList.contains("close")){const t=parseInt(e.currentTarget.dataset.i);this.props.onTabClose&&this.props.onTabClose(t)}},this.state={active:0}}getActive(){return this.props.getActive?this.props.getActive():this.state.active}selectTab(e){if(e===this.getActive())return;const t=Date.now();this.setState({active:e},(()=>console.debug("selectTab time:",Date.now()-t)))}renderTitles(){return this.props.tabs.map(((e,t)=>(0,f.jsxs)("li",Object.assign({className:`${this.getCssBlockName()}__button ${t===this.getActive()?"active":""}`,onMouseDown:this.onLiMouseDown,onClick:this.onLiClick,"data-i":t},{children:[(0,f.jsx)("span",{children:e.title}),this.props.canClose&&(0,f.jsx)("span",Object.assign({className:"close"},{children:""}))]}),e.name)))}renderContents(){return this.props.tabs.map(((e,t)=>(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__page full ${t===this.getActive()?"active":""}`},{children:e.content}),e.name)))}render(){return(0,f.jsxs)("div",Object.assign({className:this.getCssClassNames()},{children:[(0,f.jsx)("ul",Object.assign({className:`${this.getCssBlockName()}__buttons`},{children:this.props.tabs&&this.renderTitles()})),(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__pages`},{children:this.props.tabs&&this.renderContents()}))]}))}}"object"==typeof window&&(window.Tab2=Tab2);class TimeBox extends ReactComponent{constructor(e){if(super(e),this.onKeyPress=e=>{["0","1","2","3","4","5","6","7","8","9"].includes(e.key)||(console.debug("cancel",e.key),e.preventDefault())},this.onChange=e=>{const t=e.target,n=t.selectionStart,r=t.selectionEnd;if(t.value.length>5)return;const s=n===r&&n===t.value.length,o=this.formatValue(t.value);this.setState({value:o},(()=>{if(s||(t.selectionStart=n,t.selectionEnd=r),this.props.onChange){let e;try{e=this.getValue()}catch(t){console.debug(t.message),e=NaN}this.props.onChange(e)}}))},this.onBlur=e=>{if(this.props.onBlur){let e;try{e=this.getValue()}catch(t){console.debug(t.message),e=NaN}this.props.onBlur(e)}},e.value&&"number"!=typeof e.value)throw new Error("need number type, got "+typeof e.value);this.state={value:TimeBox.getStringValue(e.value)},this.el=i.createRef()}formatValue(e){let t="",n="";const r=e.replace(":","");switch(r.length){case 0:break;case 1:case 2:t=r;break;case 3:t=r.substr(0,2),n=r.substr(2,1);break;case 4:t=r.substr(0,2),n=r.substr(2,2)}return[t,...n?[n]:[]].join(":")}getValue(){return TimeBox.getIntegerValue(this.state.value)}setValue(e){this.setState({value:TimeBox.getStringValue(e)})}static getStringValue(e){if(null===e)return"";if(void 0!==e){let t=Math.floor(e/60),n=Math.floor(e-60*t);return t<10&&(t="0"+t),n<10&&(n="0"+n),`${t}:${n}`}return""}static getIntegerValue(e){if(""===e)return null;const t=e.split(":");if(!t[0])throw new Error(`no hours: ${e}`);if(!t[1])throw new Error(`no minutes: ${e}`);if(2!==t[0].length)throw new Error(`hours incomplete: ${e}`);if(2!==t[1].length)throw new Error(`minutes incomplete: ${e}`);const n=parseInt(t[0]),r=parseInt(t[1]);if(n>23)throw new Error(`hours out of range: ${r}, ${e}`);if(r>59)throw new Error(`minutes out of range: ${r}, ${e}`);return 60*n+r}static splitTime(e){const t=Math.floor(e/60);return[t,e-60*t]}shouldComponentUpdate(e,t){return this.props.value!==e.value?(this.state.value=TimeBox.getStringValue(e.value),!0):this.props.readOnly!==e.readOnly||(this.props.placeholder!==e.placeholder||this.state.value!==t.value)}render(){return(0,f.jsx)("input",{ref:this.el,className:this.getCssClassNames(),type:"text",id:this.props.id,readOnly:this.props.readOnly,placeholder:this.props.placeholder,value:this.state.value,onChange:this.onChange,onKeyPress:this.onKeyPress,onBlur:this.onBlur})}}"object"==typeof window&&(window.TimeBox=TimeBox);class PhoneBox extends ReactComponent{constructor(e){super(e),this.onKeyPress=e=>{["+","0","1","2","3","4","5","6","7","8","9"].includes(e.key)||e.preventDefault(),"+"===e.key&&e.target.value.length&&Math.abs(e.target.selectionEnd-e.target.selectionStart)!==e.target.value.length&&e.preventDefault()},this.onChange=e=>{const t=e.target.selectionStart,n=e.target.selectionEnd,r=e.target.value.length;if(t!==n||t!==r)return;let s=PhoneBox.clearValue(e.target.value);s=PhoneBox.ifNoCodeAddRussianCode(s),this.state.value=PhoneBox.formatPhoneNumber(s),this.setState({value:this.state.value}),this.props.onChange&&this.props.onChange(s)},this.onBlur=e=>{let t=PhoneBox.clearValue(e.target.value);t=PhoneBox.ifNoCodeAddRussianCode(t),this.props.onBlur&&this.props.onBlur(t)},this.el=i.createRef(),this.state={value:PhoneBox.formatPhoneNumber(this.props.value||"")}}getValue(){return PhoneBox.clearValue(this.state.value)}shouldComponentUpdate(e,t){return void 0!==e.value&&(this.state.value=PhoneBox.formatPhoneNumber(e.value)),!0}render(){return(0,f.jsx)("input",{ref:this.el,className:this.getCssClassNames(),type:"text",id:this.props.id,name:this.props.name,readOnly:this.props.readOnly,disabled:this.props.disabled,placeholder:this.props.placeholder,autoFocus:this.props.autoFocus,spellCheck:this.props.spellCheck,autoComplete:this.props.autocomplete,value:this.state.value,onFocus:this.props.onFocus,onChange:this.onChange,onBlur:this.onBlur,onKeyPress:this.onKeyPress})}static clearValue(e){return e.replace(/[^\+0-9]/g,"")}static ifNoCodeAddRussianCode(e){if(""===e);else{if(e.match(/^8/))return e.replace(/^8/,"+7");if(e.match(/^7/))return`+${e}`;if("+"!==e[0])return`+7${e}`}return e}static formatPhoneNumber(e){const t=PhoneBox.clearValue(e),n=/(^\+7)(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/.exec(t);if(n){if(n[5])return`${n[1]} ${n[2]} ${n[3]}-${n[4]}-${n[5]}`;if(n[4])return`${n[1]} ${n[2]} ${n[3]}-${n[4]}`;if(n[3])return`${n[1]} ${n[2]} ${n[3]}`;if(n[2])return`${n[1]} ${n[2]}`;if(n[1])return`${n[1]}`}return t}}"object"==typeof window&&(window.PhoneBox=PhoneBox);class TimeBox2 extends TimeBox{constructor(e){super(e),this.onClear=e=>{this.setState({value:""},(()=>{this.props.onClear&&this.props.onClear()}))},this.inputEl=i.createRef()}isCloseVisible(){return!!this.state.value}getInputElement(){return this.inputEl.current}render(){return(0,f.jsxs)("div",Object.assign({ref:this.el,className:this.getCssClassNames()},{children:[(0,f.jsx)("input",{ref:this.inputEl,className:`${this.getCssBlockName()}__input`,type:"text",readOnly:this.props.readOnly,placeholder:this.props.placeholder,value:this.state.value,onChange:this.onChange,onKeyPress:this.onKeyPress,onBlur:this.onBlur}),(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__close-icon ${this.isCloseVisible()?"visible":""}`,onMouseDown:this.onClear},{children:(0,f.jsx)(m,{})})),(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__time-icon`},{children:(0,f.jsx)(TimeIcon,{})}))]}))}}class Image extends ReactComponent{constructor(e){super(e),this.onImgClick=async e=>{if(console.debug("Image.onImgClick"),this.props.onClick)return await this.props.onClick();this.setState((e=>e.classList?{classList:null}:{classList:["Image_full"]}))},this.img=i.createRef(),this.state={classList:null}}getNaturalSize(){return[this.img.current.naturalWidth,this.img.current.naturalHeight]}render(){return(0,f.jsx)("img",{className:this.getCssClassNames(),ref:this.img,src:this.props.src,onClick:this.onImgClick})}}"object"==typeof window&&(window.Image=Image);class CheckBoxList extends ReactComponent{constructor(e){if(super(e),this.onCheckBoxChange=e=>{const t=e.target.checked,n=e.target.dataset.value;this.setState((e=>{const r=[...e.value||[]];if(t){if(r.indexOf(n)>-1)throw console.debug("value:",n,t,r),new Error("CheckBoxList value error");r.push(n)}else{if(-1===r.indexOf(n))throw console.debug("value:",n,t,r),new Error("CheckBoxList value error");r.splice(r.indexOf(n),1)}return{value:r}}),(()=>{this.props.onChange&&this.props.onChange(this.getValue())}))},!this.props.name)throw new Error("no CheckBoxList name");this.state={value:this.props.value||[]}}getItems(){return this.props.items||[]}getValue(){return this.state.value||[]}isValueChecked(e){return this.getValue().indexOf(e)>-1}composeItemId(e){return`${this.props.name}.${e}`}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}render(){return(0,f.jsx)("ul",Object.assign({className:this.getCssClassNames()},{children:this.getItems().map((e=>{if(void 0===e.value)throw new Error("no item value");return(0,f.jsxs)("li",{children:[(0,f.jsx)("input",{type:"checkbox",id:this.composeItemId(e.value),checked:this.isValueChecked(e.value),onChange:this.onCheckBoxChange,"data-value":e.value,readOnly:this.props.readOnly}),(0,f.jsx)("label",Object.assign({htmlFor:this.composeItemId(e.value)},{children:e.title||e.value}))]},e.value)}))}))}}"object"==typeof window&&(window.CheckBoxList=CheckBoxList);class Slider extends ReactComponent{constructor(e){if(super(e),this.onPrevClick=e=>{this.setState((e=>{let t=e.image-1;return t<0&&(t=this.props.images.length-1),{image:t}}))},this.onNextClick=e=>{this.setState((e=>{let t=e.image+1;return t>this.props.images.length-1&&(t=0),{image:t}}))},this.onImageClick=e=>{console.debug("Slider.onImageClick"),this.state.classList?this.setState({classList:null}):this.setState({classList:["full"]})},this.onCloseClick=e=>{this.setState({classList:null})},!this.props.images)throw new Error("Slider: no images");this.state={image:0,classList:null}}render(){const e=this.props.images||[];return(0,f.jsxs)("div",Object.assign({className:this.getCssClassNames()},{children:[(0,f.jsx)("img",{className:"Slider_image",src:e[this.state.image],onClick:this.onImageClick}),e.length>1&&(0,f.jsxs)("div",Object.assign({className:"Slider__label"},{children:[e.length>0?this.state.image+1:0," / ",e.length]})),e.length>1&&(0,f.jsx)("div",Object.assign({className:"Slider__arrow left",onClick:this.onPrevClick},{children:(0,f.jsx)(w,{})})),e.length>1&&(0,f.jsx)("div",Object.assign({className:"Slider__arrow right",onClick:this.onNextClick},{children:(0,f.jsx)(b,{})})),(0,f.jsx)("div",Object.assign({className:"Slider__close",onClick:this.onCloseClick},{children:(0,f.jsx)(v,{})}))]}))}}"object"==typeof window&&(window.Slider=Slider);class Expand extends ReactComponent{constructor(e){super(e),this.onTitleClick=e=>{console.debug("Expand.onTitleClick"),this.setState((e=>({opened:!e.opened})))},this.state={opened:void 0!==this.props.opened&&this.props.opened}}isOpened(){return this.state.opened}isHighlighted(){return!!this.props.highlighted}render(){return(0,f.jsxs)("div",Object.assign({className:`${this.getCssClassNames()} ${this.isOpened()?"opened":""} ${this.isHighlighted()?"highlighted":""}`},{children:[(0,f.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__header`,onClick:this.onTitleClick},{children:[(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__icon`},{children:(0,f.jsx)(DownIcon,{})})),(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__title`},{children:this.props.title}))]})),(0,f.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__content`},{children:this.props.children}))]}))}}"object"==typeof window&&(window.Expand=Expand);class Radio extends ReactComponent{constructor(e){if(super(e),this.onChange=async e=>{this.setState({value:e.target.value}),this.props.onChange&&await this.props.onChange(e.target.value)},!e.name)throw new Error("no name");this.state={value:this.getInitialValue()},console.debug("value:",JSON.stringify(this.getValue()))}getInitialValue(){let e=null;if(void 0!==this.props.value&&null!==this.props.value){e=this.props.value;this.props.items.find((e=>e.value===this.props.value))||(console.error("Radio: no item for value:",JSON.stringify(this.props.value)),console.debug("items:",this.props.items))}return e}getValue(){return this.state.value}renderItem(e,t){return[(0,f.jsx)("input",{type:"radio",name:this.props.name,id:`${this.props.name}${t}`,value:e.value,onChange:this.onChange,checked:e.value===this.getValue(),readOnly:this.isReadOnly(),disabled:this.isReadOnly()}),(0,f.jsx)("label",Object.assign({htmlFor:`${this.props.name}${t}`},{children:e.title||e.value}))]}isReadOnly(){return void 0!==this.props.readOnly&&this.props.readOnly}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}render(){const e=this.props.items||[];return(0,f.jsx)("div",Object.assign({className:this.getCssClassNames()},{children:e.map(((e,t)=>this.renderItem(e,t)))}))}}},982:(e,t,n)=>{n.d(t,{v:()=>EventEmitter});class EventEmitter{constructor(){this.list={}}on(e,t){this.list[e]||(this.list[e]=[]),this.list[e].push(t)}off(e,t){const n=this.list[e].indexOf(t);if(-1===n)throw new Error(`cannot find cb for ${e}`);this.list[e].splice(n,1)}async emit(e,t){if(this.list[e]&&this.list[e].length){const n=await Promise.allSettled(this.list[e].map((e=>e(t))));for(const e of n)if("rejected"===e.status)throw e.reason}}}},518:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>Field});var _Model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(106),_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(958),_Form_RowForm_RowForm__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(169);class Field extends _Model__WEBPACK_IMPORTED_MODULE_0__.H{init(){}replaceThis(e){return e.replace(/\{([@\w\.]+)\}/g,((e,t)=>{if(-1===t.indexOf("."))return e;let n=t.split(".");return"this"===n[0]&&(n[0]=this.getPage().getName()),`{${n.join(".")}}`}))}fillDefaultValue(row){const column=this.getAttr("column");if(!column)return;const defaultValue=this.replaceThis(this.getAttr("defaultValue")),js=_common__WEBPACK_IMPORTED_MODULE_1__.Wt.templateToJsString(defaultValue,this.getPage().getParams());if("string"!=typeof js)throw new Error(`${this.getFullName()}: defaultValue must be templated to js string`);try{const value=eval(js);void 0!==value&&(row[column]=this.valueToRaw(value))}catch(e){throw new Error(`[${this.getFullName()}] fillDefaultValue: ${e.toString()}`)}}valueToPageParams(e){if(this.isParam()){const t=this.getValue(e),n=this.valueToRaw(t),r=void 0!==n?_common__WEBPACK_IMPORTED_MODULE_1__.Wt.decodeValue(n):void 0;this.getPage().setParam(this.getFullName(),r)}}isChanged(e){if(!this.getAttr("column"))throw new Error(`${this.getFullName()}: field has no column`);return this.getDefaultDataSource().isRowColumnChanged(e,this.getAttr("column"))}hasColumn(){return!!this.getAttr("column")}getValue(row){if(!row&&this.getParent()instanceof _Form_RowForm_RowForm__WEBPACK_IMPORTED_MODULE_2__.e&&(row=this.getForm().getRow()),!row)throw new Error(`${this.getFullName()}: need row`);let rawValue;if(this.getAttr("column"))rawValue=this.getRawValue(row);else{if(!this.getAttr("value"))throw new Error(`${this.getFullName()}: no column and no value in field`);{const js=this.getAttr("value");try{rawValue=eval(js)}catch(e){throw console.error(e),new Error(`${this.getFullName()}: value eval error: ${e.message}`)}}}if(void 0!==rawValue){if(null===rawValue)throw new Error(`[${this.getFullName()}]: null is wrong raw value`);try{return this.rawToValue(rawValue)}catch(e){throw console.debug("raw value decode error:",this.getFullName(),rawValue),e}}}setValue(e,t){if(!this.getAttr("column"))throw new Error(`field has no column: ${this.getFullName()}`);const n=this.valueToRaw(t);this.getForm().getDefaultDataSource().setValue(e,this.getAttr("column"),n),this.valueToPageParams(e)}rawToValue(e){return _common__WEBPACK_IMPORTED_MODULE_1__.Wt.decodeValue(e)}valueToRaw(e){return _common__WEBPACK_IMPORTED_MODULE_1__.Wt.encodeValue(e)}getRawValue(e){if(!this.hasColumn())throw new Error(`${this.getFullName()}: no column`);return this.getForm().getDefaultDataSource().getValue(e,this.getAttr("column"))}getDefaultDataSource(){return this.getForm().getDefaultDataSource()}getType(){if(this.getAttr("type"))return this.getAttr("type");if(this.getAttr("column")){const e=this.getDefaultDataSource();if(e.isSurrogate())return e.getType(this.getAttr("column"));throw new Error("field type empty")}throw new Error("field type and column empty")}getForm(){return this.getParent()}getPage(){return this.getForm().getPage()}getApp(){return this.getForm().getApp()}isReadOnly(){return"true"===this.getData().readOnly}isNotNull(){return"true"===this.getData().notNull}isNullable(){return"false"===this.getData().notNull}getWidth(){const e=parseInt(this.getData().width);return isNaN(e)?null:0===e?100:e}getFullName(){return`${this.getPage().getName()}.${this.getForm().getName()}.${this.getName()}`}isParam(){return"true"===this.getData().param}validateOnChange(){return void 0===this.getData().validateOnChange||"true"===this.getData().validateOnChange}validateOnBlur(){return void 0!==this.getData().validateOnBlur&&"true"===this.getData().validateOnBlur}getCaption(){const e=this.getAttr("caption");if(""===e){const e=this.getAttr("column");if(e&&this.getForm().hasDefaultPersistentDataSource()){const t=this.getForm().getDataSource("default");if(t.getAttr("table")){return t.getTable().getColumn(e).getCaption()}}}return e}}},2:(e,t,n)=>{n.d(t,{l:()=>Form});var r=n(106),s=n(958),o=n(855);class Form extends r.H{constructor(){super(...arguments),this.dataSources=[],this.fields=[]}init(){this.createDataSources();for(const e of this.getData().fields){const t=s.Wt.getGlobalClass(e.class);if(!t)throw new Error(`no ${e.class} class`);const n=new t(e,this);n.init(),this.fields.push(n)}}deinit(){this.deinitDataSources();for(const e of this.fields)e.deinit();super.deinit()}fillDefaultValues(e){for(const t of this.fields)t.fillDefaultValue(e)}onDataSourceRefresh(e){this.emit("refresh",e)}onDataSourceInsert(e){this.getPage().onFormInsert(e),this.emit("insert",e)}onDataSourceUpdate(e){this.emit("update",e)}onDataSourceDelete(e){this.emit("delete",e)}async update(){if(console.debug("Form.update",this.getFullName(),this.isChanged()),this.getPage().deinited)throw new Error("page already deinited");if(!this.isChanged()&&!this.getDefaultDataSource().hasNewRows())throw new Error(`form model not changed or does not have new rows: ${this.getFullName()}`);await this.getDefaultDataSource().update()}isChanged(){return this.getDefaultDataSource().isChanged()}hasNew(){return this.getDefaultDataSource().hasNew()}async rpc(e,t){if(console.debug("Form.rpc",this.getFullName(),e,t),!e)throw new Error("no name");const n={action:o.aU.rpc,uuid:this.getApp().getAttr("uuid"),name:e,page:this.getPage().getName(),form:this.getName(),params:t},r=await this.getApp().request("POST",n);if(r.errorMessage)throw new Error(r.errorMessage);return r}getKey(){return null}getDefaultDataSource(){const e=this.getDataSource("default");if(!e)throw new Error(`${this.getFullName()}: no default data source`);return e}getPage(){return this.getParent()}getApp(){return this.getPage().getApp()}async refresh(){await this.getDefaultDataSource().refresh()}findField(e){return this.fields.find((t=>t.getName()===e))}getField(e){const t=this.findField(e);if(!t)throw new Error(`${this.getFullName()}: no field ${e}`);return t}hasDefaultPersistentDataSource(){return this.getDefaultDataSource().isPersistent()}decodeRow(e){const t={};for(const n of this.fields){const r=n.getAttr("column");r&&(t[r]=n.getValue(e))}return t}}},169:(e,t,n)=>{n.d(t,{e:()=>RowForm});var r=n(2),s=n(920);class RowForm extends r.l{init(){super.init(),this.isNewMode()&&this.getDefaultDataSource().newRow(this.createRow()),this.fillParams(this.getRow())}isNewMode(){const e=this.getAttr("newMode");return"true"===e||"false"!==e&&this.getPage().isNewMode()}fillParams(e){for(const t of this.fields)t.valueToPageParams(e)}onDataSourceUpdate(e){this.fillParams(this.getRow()),super.onDataSourceUpdate(e)}onDataSourceInsert(e){this.fillParams(this.getRow()),super.onDataSourceInsert(e)}getRow(e=!1){return this.getDefaultDataSource().getSingleRow(e)}getKey(){const e=this.getDefaultDataSource();if(e.isPersistent()){const t=this.getRow();return e.getRowKey(t)}return null}createRow(){const e={};return this.fillDefaultValues(e),e}discard(e=[]){console.debug("RowForm.discard",e),this.getDefaultDataSource().isChanged()&&(this.getDefaultDataSource().discard(),e.forEach((e=>{this.getField(e).valueToPageParams(this.getRow())})))}}s.W.registerGlobalClass(RowForm)},106:(e,t,n)=>{n.d(t,{H:()=>Model});var r=n(982),s=n(920);class Model extends r.v{constructor(e,t){if(!e.name)throw new Error("name required for model");super(),this.data=e,this.parent=t,this.deinited=!1}init(){}deinit(){if(this.deinited)throw new Error(`${this.getFullName()}: model already deinited`);this.deinited=!0}static getAttr(e,t){return e[t]}static getCol(e,t){return e[t]}static getName(e){return Model.getAttr(e,"name")}static getClassName(e){return Model.getAttr(e,"class")}isAttr(e){return this.data.hasOwnProperty(e)}getAttr(e){return this.data[e]}getCol(e){return this.data[e]}getClassName(){return this.getAttr("class")}getName(){return this.getAttr("name")}getFullName(){return this.parent?`${this.parent.getFullName()}.${this.getName()}`:this.getName()}getCaption(){return this.getAttr("caption")}findDataSource(e){return this.dataSources.find((t=>t.getName()===e))}getDataSource(e){const t=this.findDataSource(e);if(!t)throw new Error(`${this.getFullName()}: no data source ${e}`);return t}createDataSources(){for(const e of this.data.dataSources)try{const t=s.W.getGlobalClass(e.class);if(!t)throw new Error(`no ${e.class} class`);const n=new t(e,this);n.init(),this.dataSources.push(n)}catch(t){throw t.message=`${this.getFullName()}.${e.name}: ${t.message}`,t}}deinitDataSources(){for(const e of this.dataSources)e.deinit()}hasActions(){return this.data.actions.length>0}getParent(){if(!this.parent)throw new Error("np parent");return this.parent}getData(){return this.data}}},855:(e,t,n)=>{n.d(t,{DW:()=>r,aU:()=>o,mV:()=>s});const r=e=>JSON.stringify(e),s=e=>JSON.parse(e);var o;!function(e){e.page="page",e.create="create",e.read="read",e.update="update",e.delete="delete",e.rpc="rpc",e.login="login",e.logout="logout"}(o||(o={}))}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ApplicationController:()=>ApplicationController,ApplicationView:()=>ApplicationView,ArrowIcon:()=>e.e0,BinaryHelper:()=>e.Iq,Box:()=>e.xu,Button:()=>e.zx,CancelIcon:()=>e.FB,CheckBox:()=>e.Jg,CheckBoxField:()=>CheckBoxField,CheckBoxList:()=>e.$,CheckBoxListField:()=>CheckBoxListField,ClipboardHelper:()=>e.hi,CloseIcon:()=>e.Tw,CloseIcon2:()=>e.BX,Column:()=>Column,ComboBox:()=>e.Ct,ComboBoxField:()=>ComboBoxField,CookieHelper:()=>e.Ax,DataSource:()=>DataSource,Database:()=>Database,DateField:()=>DateField,DateIcon:()=>e.IH,DatePicker:()=>e.Mt,DateTimeField:()=>DateTimeField,DateTimeHelper:()=>e.HD,DeleteIcon:()=>e.pJ,DoneIcon:()=>e.qw,DownIcon:()=>e.KL,DropdownButton:()=>e.PS,DropdownDatePicker:()=>e.Ol,EditIcon:()=>e.dY,Expand:()=>e.M0,FileField:()=>FileField,Form:()=>l.l,FormatHelper:()=>e.Gq,FrontHostApp:()=>e.Qh,Grid:()=>e.rj,GridCell:()=>e.r8,GridRow:()=>e.Jn,Helper:()=>e.Wt,Image:()=>e.Ee,LeftIcon:()=>e.Ey,LinkField:()=>LinkField,LocationIcon:()=>e._t,LoginController:()=>LoginController,LoginFrontHostApp:()=>LoginFrontHostApp,LoginView:()=>LoginView,Menu:()=>e.v2,Modal:()=>e.u_,MoreVertIcon:()=>e.Yv,NoSqlDataSource:()=>NoSqlDataSource,OpenInNewIcon:()=>e.r$,Page:()=>Page,PageController:()=>PageController,PageView:()=>PageView,Password:()=>e.ro,PasswordField:()=>PasswordField,PasswordIcon:()=>e.CW,PersistentDataSource:()=>PersistentDataSource,PhoneBox:()=>e.Fg,PhoneField:()=>PhoneField,PhoneIcon:()=>e.qW,Radio:()=>e.Y8,RadioField:()=>RadioField,ReactComponent:()=>e.rN,ReactHelper:()=>e.mm,RightIcon:()=>e.m9,RowForm:()=>d.e,RowFormCheckBoxFieldController:()=>RowFormCheckBoxFieldController,RowFormCheckBoxListFieldController:()=>RowFormCheckBoxListFieldController,RowFormCheckBoxListFieldView:()=>RowFormCheckBoxListFieldView,RowFormComboBoxFieldController:()=>RowFormComboBoxFieldController,RowFormComboBoxFieldView:()=>RowFormComboBoxFieldView,RowFormController:()=>RowFormController,RowFormDateFieldController:()=>RowFormDateFieldController,RowFormDateFieldView:()=>RowFormDateFieldView,RowFormDateTimeFieldController:()=>RowFormDateTimeFieldController,RowFormDateTimeFieldView:()=>RowFormDateTimeFieldView,RowFormFieldController:()=>RowFormFieldController,RowFormFieldView:()=>RowFormFieldView,RowFormFileFieldController:()=>RowFormFileFieldController,RowFormLinkFieldController:()=>RowFormLinkFieldController,RowFormPasswordFieldController:()=>RowFormPasswordFieldController,RowFormPhoneFieldController:()=>RowFormPhoneFieldController,RowFormPhoneFieldView:()=>RowFormPhoneFieldView,RowFormRadioFieldController:()=>RowFormRadioFieldController,RowFormTextAreaFieldController:()=>RowFormTextAreaFieldController,RowFormTextAreaFieldView:()=>RowFormTextAreaFieldView,RowFormTextBoxFieldController:()=>RowFormTextBoxFieldController,RowFormTextBoxFieldView:()=>RowFormTextBoxFieldView,RowFormTimeFieldController:()=>RowFormTimeFieldController,RowFormView:()=>RowFormView,Search:()=>e.ol,Select:()=>e.Ph,SettingsIcon:()=>e.ew,Slider:()=>e.iR,SqlDataSource:()=>SqlDataSource,Statusbar:()=>e.XW,Tab:()=>e.OK,Tab2:()=>e.db,Table:()=>Table,TableForm:()=>TableForm,TableFormCheckBoxFieldController:()=>TableFormCheckBoxFieldController,TableFormCheckBoxFieldView:()=>TableFormCheckBoxFieldView,TableFormComboBoxFieldController:()=>TableFormComboBoxFieldController,TableFormComboBoxFieldView:()=>TableFormComboBoxFieldView,TableFormController:()=>TableFormController,TableFormDateFieldController:()=>TableFormDateFieldController,TableFormDateFieldView:()=>TableFormDateFieldView,TableFormDateTimeFieldController:()=>TableFormDateTimeFieldController,TableFormDateTimeFieldView:()=>TableFormDateTimeFieldView,TableFormLinkFieldController:()=>TableFormLinkFieldController,TableFormPhoneFieldController:()=>TableFormPhoneFieldController,TableFormTextBoxFieldController:()=>TableFormTextBoxFieldController,TableFormTextBoxFieldView:()=>TableFormTextBoxFieldView,TableFormView:()=>TableFormView,TextArea:()=>e.Kx,TextAreaField:()=>TextAreaField,TextBox:()=>e.zC,TextBoxField:()=>TextBoxField,TimeBox:()=>e.DB,TimeBox2:()=>e.jh,TimeIcon:()=>e.wZ,Tooltip:()=>e.u,ViewerFrontHostApp:()=>ViewerFrontHostApp,VisibilityIcon:()=>e.K3,VisibilityOffIcon:()=>e.X0,createReadQuery:()=>e.i7,getGlobal:()=>e.Rd,registerGlobal:()=>e.TG});var e=__webpack_require__(958),t=__webpack_require__(294),n=__webpack_require__(982);class Controller extends n.v{constructor(){super(...arguments),this.view=null,this.onViewCreate=e=>{this.view=e}}async rerender(){if(this.view)return await this.view.rerender();console.error(`${this.constructor.name}.rerender no view`)}getView(){if(!this.view)throw new Error("no view");return this.view}getViewClass(){throw new Error(`${this.constructor.name}.getViewClass not implemented`)}createElement(){return t.createElement(this.getViewClass(),{ctrl:this,onCreate:this.onViewCreate})}}var r=__webpack_require__(893);class View extends e.rN{constructor(e){if(super(e),!e.ctrl)throw new Error(`${this.constructor.name}: no ctrl`)}getCtrl(){return this.props.ctrl}}class LoginView extends View{constructor(e){super(e),this.onLoginFormSubmit=e=>{document.querySelector(".LoginView__button").disabled=!0},this.onChange=e=>{this.errMsgRef.current.innerHTML=""},this.errMsgRef=t.createRef()}renderLogo(){return null}renderTitle(){return this.getCtrl().getFrontHostApp().getData().title}render(){return(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__container`},{children:(0,r.jsxs)("form",Object.assign({className:`${this.getCssBlockName()}__form`,method:"post",onSubmit:this.onLoginFormSubmit},{children:[(0,r.jsx)("input",{type:"hidden",name:"tzOffset",value:JSON.stringify((new Date).getTimezoneOffset())}),(0,r.jsx)("input",{type:"hidden",name:"action",value:"login"}),(0,r.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__logo-title`},{children:[(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__logo`},{children:this.renderLogo()})),(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__title`},{children:this.renderTitle()}))]})),(0,r.jsx)(e.zC,{classList:[`${this.getCssBlockName()}__field`],name:"username",placeholder:this.getCtrl().getText().login.username,required:!0,autoFocus:!0,spellCheck:!1,value:this.getCtrl().getFrontHostApp().getData().username||"",onChange:this.onChange}),(0,r.jsx)(e.ro,{classList:[`${this.getCssBlockName()}__field2`],name:"password",placeholder:this.getCtrl().getText().login.password,value:this.getCtrl().getFrontHostApp().getData().password||"",onChange:this.onChange}),(0,r.jsx)("p",Object.assign({className:`${this.getCssBlockName()}__err-msg`,ref:this.errMsgRef},{children:this.getCtrl().getFrontHostApp().getData().errMsg})),(0,r.jsx)("button",Object.assign({className:`${this.getCssBlockName()}__button`,type:"submit"},{children:this.getCtrl().getText().login.signIn}))]}))}))}}class LoginController extends Controller{constructor(e){super(),console.debug(`${this.constructor.name}.constructor`),this.frontHostApp=e}static create(t){const n=t.getData();if(!n.name)throw new Error("no app name");return new(e.Wt.getGlobalClass(`${n.name}LoginController`)||LoginController)(t)}getViewClass(){return LoginView}getText(){return this.frontHostApp.getText()}getFrontHostApp(){return this.frontHostApp}getViewClassCssBlockName(){return this.getViewClass().name}}class LoginFrontHostApp extends e.Qh{constructor(e){console.debug("LoginFrontHostApp.constructor",e),super(),this.data=e}async run(){console.debug("LoginFrontHostApp.run");const t=LoginController.create(this),n=document.querySelector(`.${t.getViewClassCssBlockName()}__root`);if(!n)throw new Error("no root element");e.mm.createReactComponent(n,t.getViewClass(),{ctrl:t})}getText(){return this.data.text}getData(){return this.data}}e.Wt.registerGlobalClass(LoginFrontHostApp);var s=__webpack_require__(935),o=__webpack_require__(855),i=__webpack_require__(106),a=__webpack_require__(920);class Column extends i.H{constructor(e,t){if(super(e,t),!this.getAttr("type"))throw new Error(`column ${this.getFullName()}: no type`);if(!["string","number","boolean","object","date"].includes(this.getAttr("type")))throw new Error(`${this.getFullName()}: wrong column type: ${this.getAttr("type")}`)}init(){}getType(){return this.getAttr("type")}}a.W.registerGlobalClass(Column);class Table extends i.H{constructor(){super(...arguments),this.columns=[]}init(){for(const e of this.getData().columns){const t=new Column(e,this);t.init(),this.addColumn(t)}}addColumn(e){this.columns.push(e)}getColumn(e){const t=this.columns.find((t=>t.getName()===e));if(!t)throw new Error(`table ${this.getFullName()}: no column ${e}`);return t}emitResult(e,t=null){return console.debug("Table.emitResult"),[...e.insert?[this.emitInsert(t,e.insert)]:[],...e.update?[this.emitUpdate(t,e.update)]:[],...e.delete?[this.emitDelete(t,e.delete)]:[],...e.refresh?[this.emitRefresh(t)]:[]]}emitInsert(e,t){return this.emit("insert",{source:e,inserts:t})}emitUpdate(e,t){return this.emit("update",{source:e,updates:t})}emitDelete(e,t){return this.emit("delete",{source:e,deletes:t})}emitRefresh(e){return this.emit("refresh",{source:e})}}a.W.registerGlobalClass(Table);class Database extends i.H{constructor(){super(...arguments),this.tables=[]}init(){for(const e of this.getData().tables){const t=new Table(e,this);t.init(),this.addTable(t)}}addTable(e){this.tables.push(e)}findTable(e){return this.tables.find((t=>t.getName()===e))}getTable(e){const t=this.findTable(e);if(!t)throw new Error(`${this.getFullName()}: no table with name: ${e}`);return t}emitResult(e,t=null){console.debug("Database.emitResult");const n=[];for(const r in e)n.push(...this.getTable(r).emitResult(e[r],t));return n}}a.W.registerGlobalClass(Database);class Application extends i.H{constructor(e){super(e),this.databases=[],this.dataSources=[]}init(){if(!this.getData().theme)throw new Error("no theme attr");this.createDatabases(),this.createDataSources()}createDatabases(){for(const e of this.getData().databases){const t=new Database(e,this);t.init(),this.addDatabase(t)}}deinit(){this.deinitDataSources(),super.deinit()}addDatabase(e){this.databases.push(e)}async logout(){await this.request("POST",{action:"logout"});this.emit("logout",{source:this})}async request(t,n){const r=Date.now(),[s,o]=await e.Qh.doHttpRequest2(t,window.location.pathname,n);if(!s["qforms-platform-version"])throw new Error("no qforms-platform-version header");return this.emit("request",{time:Date.now()-r,remotePlatformVersion:s["qforms-platform-version"],remoteAppVersion:s["qforms-app-version"]||null}),o}async request2(t,n,r){const s=Date.now(),[o,i]=await e.Qh.doHttpRequest2(t,n,r);if(!o["qforms-platform-version"])throw new Error("no qforms-platform-version header");return this.emit("request",{time:Date.now()-s,remotePlatformVersion:o["qforms-platform-version"],remoteAppVersion:o["qforms-app-version"]||null}),i}findDatabase(e){return this.databases.find((t=>t.getName()===e))}getDatabase(e){const t=this.findDatabase(e);if(!t)throw new Error(`no database: ${e}`);return t}getText(){return this.getData().text}getUser(){return this.getData().user}getDomain(){return this.getAttr("domain")}getVirtualPath(){return this.getData().virtualPath}async rpc(e,t){if(console.debug("Application.rpc",this.getFullName(),e,t),!e)throw new Error("no name");const n={action:o.aU.rpc,name:e,uuid:this.getAttr("uuid"),params:t},r=await this.request("POST",n);if(r.errorMessage)throw new Error(r.errorMessage);return r}emitResult(e,t){console.debug("Application.emitResult",e,t);const n=[];for(const r in e)n.push(...this.getDatabase(r).emitResult(e[r],t));return Promise.allSettled(n)}getNodeEnv(){return this.getData().nodeEnv}isDevelopment(){return"dev"===this.getNodeEnv()}getRoute(){return this.getAttr("route")}}a.W.registerGlobalClass(Application);class ModelView extends View{constructor(){super(...arguments),this.renderActionIcon=void 0}getActionsForDropdownButton(){return this.getCtrl().getModel().getCol("actions").map((e=>{const t=i.H.getName(e);return{name:t,title:this.renderActionIcon?[(0,r.jsx)("div",{children:this.renderActionIcon(t)},"icon"),(0,r.jsx)("div",{children:i.H.getAttr(e,"caption")},"title")]:i.H.getAttr(e,"caption"),enabled:this.getCtrl().isActionEnabled(t)}}))}getCssBlockName(){const e=this.getCtrl().getModel();return e.isAttr("cssBlock")&&e.getAttr("cssBlock")?e.getAttr("cssBlock"):super.getCssBlockName()}getStyle(e){}}class ModelController extends Controller{constructor(e,t){super(),this.model=e,this.parent=t,this.deinited=!1}init(){}deinit(){if(this.deinited)throw new Error(`${this.getModel().getFullName()}: controller already deinited`);this.deinited=!0}getModel(){return this.model}getParent(){if(!this.parent)throw new Error(`${this.getModel().getFullName()}: no controller parent`);return this.parent}getTitle(){return this.getModel().getCaption()}getViewClass(){const t=this.getModel();if(!t.isAttr("viewClass"))throw new Error(`${this.constructor.name} not supports view`);const n=t.getAttr("viewClass");if(n){const t=e.Wt.getGlobalClass(n);if(!t)throw new Error(`no class ${n}`);if(!(t.prototype instanceof ModelView))throw new Error(`view class ${n} is not inherited from ModelView`);return t}return null}isActionEnabled(e){return!1}}var l=__webpack_require__(2),u=__webpack_require__(518),c=__webpack_require__(978);class DataSource extends i.H{constructor(e,t){super(e,t),this.rows=null,this.rowsByKey=null,this.news=[],this.changes=new Map,this.frame=1,this.count=null,this.lastFrame=1,this.onTableInsert=async e=>{if(this.deinited)throw new Error(`${this.getFullName()}: this data source deinited for onTableUpdate`);if(e.source!==this){if(console.debug("DataSource.onTableInsert",this.getFullName(),e),!e.inserts.length)throw new Error(`${this.getFullName()}: no inserts`);for(const t of e.inserts){if(this.getRow(t))throw console.debug("rows:",this.rows),console.debug("rowsByKey:",this.rowsByKey),new Error(`${this.getFullName()}: row already in this data source: ${t}`);const n=e.source.getRow(t),r={};DataSource.copyNewValues(r,n),this.addRow(r)}this.getParent()instanceof l.l&&this.getForm().onDataSourceInsert(e),this.emit("insert",e)}},this.onTableUpdate=async e=>{if(this.deinited)throw new Error(`${this.getFullName()}: this data source deinited for onTableUpdate`);if(e.source!==this){if(console.debug("DataSource.onTableUpdate",this.getFullName(),e),!Object.keys(e.updates).length)throw new Error(`${this.getFullName()}: no updates`);for(const t in e.updates)if(this.getRow(t)){const n=e.updates[t],r=e.source.getRow(n);this.updateRow(t,r)}this.getParent()instanceof l.l&&this.getForm().onDataSourceUpdate(e),this.emit("update",e)}},this.onTableDelete=async e=>{if(this.deinited)throw new Error(`${this.getFullName()}: this data source deinited for onTableDelete`);if(e.source!==this){if(console.debug("DataSource.onTableDelete",this.getFullName(),e),!e.deletes.length)throw new Error(`${this.getFullName()}: no deletes`);for(const t of e.deletes)this.getRow(t)&&this.removeRow(t);this.getParent()instanceof l.l&&this.getForm().onDataSourceDelete(e),this.emit("delete",e)}},this.onTableRefresh=async e=>{throw new Error("DataSource.onTableRefresh: not implemented")},void 0!==e.count&&(this.count=e.count)}init(){if(this.setRows(this.getData().rows),this.getAttr("table")){const e=this.getTable();e.on("insert",this.onTableInsert),e.on("update",this.onTableUpdate),e.on("delete",this.onTableDelete),e.on("refresh",this.onTableRefresh)}}deinit(){if(this.getAttr("table")){const e=this.getTable();e.off("insert",this.onTableInsert),e.off("update",this.onTableUpdate),e.off("delete",this.onTableDelete),e.off("refresh",this.onTableRefresh)}super.deinit()}setRows(e){this.rows=e,this.fillRowsByKey()}addRow(e){this.rows.push(e);const t=this.getRowKey(e);this.rowsByKey[t]=e}addRows(e){for(let t=0;t<e.length;t++)this.rows.push(e[t]);this.fillRowsByKey()}getRowsLength(){return this.rows.length}fillRowsByKey(){this.rowsByKey={};for(let e=0;e<this.rows.length;e++){const t=this.rows[e],n=this.getRowKey(t);this.rowsByKey[n]=t}}discardRowColumn(e,t){this.changes.has(e)&&void 0!==this.changes.get(e)[t]&&delete this.changes.get(e)[t]}changeRowColumn(e,t,n){this.changes.has(e)||this.changes.set(e,{}),this.changes.get(e)[t]=n}setValue(e,t,n){if(void 0===n)throw new Error(`${this.getFullName()}: undefined is wrong value for data source`);if("object"==typeof n&&null!==n)throw new Error(`setValue: ${this.getFullName()}.${t}: object must be in JSON format`);e[t]!==n?(this.changeRowColumn(e,t,n),void 0===e[t]&&null===n&&this.discardRowColumn(e,t)):this.discardRowColumn(e,t),this.changes.has(e)&&!Object.keys(this.changes.get(e)).length&&this.changes.delete(e)}isChanged(){return!!this.changes.size}hasNew(){return!!this.news.length}isRowColumnChanged(e,t){return e[t]!==this.getValue(e,t)}getValue(e,t){let n;if(n=this.changes.has(e)&&void 0!==this.changes.get(e)[t]?this.changes.get(e)[t]:e[t],void 0!==n&&"string"!=typeof n)throw new Error(`getValue: ${this.getFullName()}.${t}: object must be in JSON format, value: ${n}`);return n}getKeyValues(e){return this.getData().keyColumns.reduce(((t,n)=>(t[n]=JSON.parse(e[n]),t)),{})}getRowKey(e){const t=[];for(const n of this.getData().keyColumns){if(void 0===e[n])return null;if(null===e[n])throw new Error("wrong value null for data source value");try{const r=JSON.parse(e[n]);t.push(r)}catch(t){throw console.debug("getRowKey: cannot parse: ",e[n]),t}}return(0,o.DW)(t)}removeRow(e){const t=this.getRow(e);if(!t)throw new Error(`${this.getFullName()}: no row with key ${e} to remove`);const n=this.rows.indexOf(t);if(-1===n)throw new Error(`${this.getFullName()}: no row with i ${n} to remove`);this.rows.splice(n,1),delete this.rowsByKey[e]}newRow(e){if(console.debug("DataSource.newRow",this.getFullName(),e),this.rows.length>0)throw new Error("rows can be added to empty data sources only in new mode");this.news.push(e)}getSingleRow(e=!1){if(this.news[0])return this.news[0];const t=this.rows[0];if(!t)throw new Error("no single row");return e?this.getRowWithChanges(t):t}getForm(){return this.getParent()instanceof l.l?this.getParent():null}getPage(){return this.getParent()instanceof l.l?this.getParent().getParent():this.getParent()instanceof Page?this.getParent():null}getApp(){if((0,c.fF)("DataSource.getApp",this.getFullName()),this.getParent()instanceof Application)return this.getParent();if(this.getParent()instanceof Page)return this.getParent().getParent();if(this.getParent()instanceof l.l)return this.getParent().getParent().getParent();if(this.getParent()instanceof u.g)return this.getParent().getParent().getParent().getParent();throw new Error(`unknown parent: ${this.getParent().constructor.name}(${this.getParent().getFullName()})`)}getRow(e){return this.rowsByKey[e]||null}getRows(){if(!this.rows)throw new Error("no rows");return this.rows}getRowByIndex(e){return this.rows[e]}discard(){if(console.debug("DataSource.discard",this.getFullName()),!this.isChanged())throw new Error(`no changes in data source ${this.getFullName()}`);this.changes.clear()}static keyToParams(e,t="key"){if("string"!=typeof e)throw new Error("key not string");const n={},r=JSON.parse(e);if(1===r.length)n[t]=r[0];else{if(!(r.length>1))throw new Error(`invalid key: ${e}`);for(let e=0;e<r.length;e++)n[`${t}${e+1}`]=r[e]}return n}getChangesByKey(){const e={};for(const t of this.changes.keys())e[this.getRowKey(t)]=this.changes.get(t);return e}getRowWithChanges(e){return this.changes.has(e)?Object.assign(Object.assign({},e),this.changes.get(e)):e}hasNewRows(){return this.news.length>0}static copyNewValues(e,t){for(const n in t)e[n]=t[n]}updateRow(e,t){if(console.debug("DataSource.updateRow",this.getFullName(),e,t),!e)throw new Error("no key");const n=this.getRow(e);if(!n)throw new Error(`${this.getFullName()}: no row with key ${e}`);const r=this.getRowKey(t);DataSource.copyNewValues(n,t),e!==r&&(delete this.rowsByKey[e],this.rowsByKey[r]=n)}getTable(){if(!this.getAttr("table"))throw new Error(`${this.getFullName()}: table attr empty`);return this.getDatabase().getTable(this.getAttr("table"))}getDatabase(){if(!this.getAttr("database"))throw new Error(`${this.getFullName()}: database attr empty`);return this.getApp().getDatabase(this.getAttr("database"))}getType(e){return this.getTable().getColumn(e).getType()}async insert(e){if(console.debug("DataSource.insert",this.news),!this.news.length)throw new Error("no new rows to insert");const t=[];for(const e of this.news){const n=this.getRowWithChanges(e);DataSource.copyNewValues(e,n);const r=this.getRowKey(e);if(!r)throw new Error("invalid insert row, no key");t.push(r)}this.changes.clear();for(const e of this.news)this.addRow(e);this.news=[],console.debug("rows:",this.getRows()),console.debug("inserts:",t),this.getParent()instanceof l.l&&this.getForm().onDataSourceInsert({source:this,inserts:t}),this.emit("insert",{source:this,inserts:t});const n=this.getAttr("database"),r=this.getAttr("table");if(n&&r){const e={[n]:{[r]:{insert:t}}};return await this.getApp().emitResult(e,this),e}return null}async delete(e){if(console.debug("DataSource.delete",e),!e)throw new Error("no key");this.removeRow(e);const t=[e];this.getParent()instanceof l.l&&this.getForm().onDataSourceDelete({source:this,deletes:t}),this.emit("delete",{source:this,deletes:t});const n=this.getAttr("database"),r=this.getAttr("table");if(n&&r){const e={[n]:{[r]:{delete:t}}};return await this.getApp().emitResult(e,this),e}return null}async update(){if(console.debug("DataSource.update",this.getFullName()),this.news.length)return await this.insert(),null;if(!this.changes.size)throw new Error(`no changes: ${this.getFullName()}`);const e=this.getChangesByKey(),t={};for(const n in e){const e=this.getRow(n),r=this.getRowWithChanges(e),s=this.getRowKey(r);this.updateRow(n,r),t[n]=s}this.changes.clear(),this.getParent()instanceof l.l&&this.getForm().onDataSourceUpdate({source:this,updates:t}),this.emit("update",{source:this,updates:t});const n=this.getAttr("database"),r=this.getAttr("table");if(n&&r){const e={[n]:{[r]:{update:t}}};return await this.getApp().emitResult(e,this),e}return null}isSurrogate(){return this.isAttr("database")}moveRow(t,n){console.debug("DataSource.moveRow"),e.Wt.moveArrItem(this.rows,t,n);const r={source:this};this.getParent()instanceof l.l&&this.getForm().onDataSourceRefresh(r),this.emit("refresh",r)}getLimit(){return this.getAttr("limit")?parseInt(this.getAttr("limit")):null}getCount(){if(null===this.count)throw new Error(`${this.getFullName()}: no count info`);return this.count}getFrame(){return this.frame}getLastFrame(){return this.lastFrame}setFrame(e){this.frame=e}getFramesCount(){if(null===this.count)throw new Error(`${this.getFullName()}: no count info`);return 0===this.count?1:this.getLimit()?Math.ceil(this.count/this.getLimit()):1}hasMore(){return this.lastFrame<this.getFramesCount()}isPersistent(){return!1}async refresh(){throw new Error("DataSource.refresh not implemented")}}e.Wt.registerGlobalClass(DataSource);var d=__webpack_require__(169);class Page extends i.H{constructor(e,t,n){super(e,t),this.options=n,this.dataSources=[],this.forms=[],this.params={},n.onCreate&&n.onCreate(this)}init(){this.createDataSources(),this.createForms(),(0,c.fF)("page options:",this.options),(0,c.fF)("page params:",this.getParams())}deinit(){if(this.deinited)throw new Error(`page ${this.getFullName()} is already deinited`);this.deinitDataSources(),this.deinitForms(),super.deinit()}getOptions(){return this.options}createForms(){for(const e of this.getData().forms){const t=a.W.getGlobalClass(i.H.getClassName(e));if(!t)throw new Error(`no ${i.H.getClassName(e)} class`);const n=new t(e,this);n.init(),this.forms.push(n)}}deinitForms(){for(const e of this.forms)e.deinit()}getParams(){return Object.assign(Object.assign({},this.getData().params),this.params)}setParam(e,t){this.params[e]=void 0!==t?t:null}async update(){(0,c.fF)("Page.update",this.getFullName());for(const e of this.forms)(e.isChanged()||e.hasNew())&&await e.update()}discard(){(0,c.fF)("Page.discard",this.getFullName());for(const e of this.forms)e instanceof d.e&&e.discard()}getKey(){for(const e of this.forms)if("RowForm"===e.getClassName())return e.getKey();return null}hasRowFormWithDefaultDs(){for(const e of this.forms)if("RowForm"===e.getClassName()&&e.getDefaultDataSource())return!0;return!1}hasRowFormWithDefaultSqlDataSource(){for(const e of this.forms)if("RowForm"===e.getClassName()&&e.hasDefaultPersistentDataSource())return!0;return!1}hasRowForm(){for(const e of this.forms)if("RowForm"===e.getClassName()&&"true"===e.getAttr("visible"))return!0;return!1}hasTableForm(){for(const e of this.forms)if("TableForm"===e.getClassName()&&"true"===e.getAttr("visible"))return!0;return!1}isNewMode(){return!!this.options.newMode}hasNew(){for(const e of this.forms)if(e.hasNew())return!0;return!1}getApp(){return this.getParent()}isModal(){return!!this.options.modal}onFormInsert(e){(0,c.fF)("Page.onFormInsert",e);for(const t of e.inserts){const e=DataSource.keyToParams(t);for(const t in e)this.setParam(t,e[t])}}async rpc(e,t){if(!e)throw new Error("no name");const n={action:o.aU.rpc,uuid:this.getApp().getAttr("uuid"),name:e,page:this.getName(),params:t},r=await this.getApp().request("POST",n);if(r.errorMessage)throw new Error(r.errorMessage);return r}findForm(e){return this.forms.find((t=>t.getName()===e))}getForm(e){const t=this.findForm(e);if(!t)throw new Error(`${this.getFullName()}: no form ${e}`);return t}isSelectMode(){return!!this.options.selectMode}isFormInTab(){return this.isAttr("formInTab")&&"true"===this.getAttr("formInTab")}}a.W.registerGlobalClass(Page);class FieldController extends ModelController{static create(e,t){const{ctrlClass:n}=e.getData();if(n){const r=a.W.getGlobalClass(n);if(!r)throw new Error(`no global class ${n}`);return new r(e,t)}const r=`${t.getModel().getClassName()}${e.getClassName()}Controller`,s=a.W.getGlobalClass(r);if(!s)throw new Error(`no global class ${r}`);return new s(e,t)}valueToString(e){switch(typeof e){case"string":return e;case"object":return null===e?"":e instanceof Date?e.toISOString():JSON.stringify(e,null,4);case"number":case"boolean":return e.toString();case"undefined":return"";default:throw new Error(`${this.getModel().getFullName()}: unknown value type: ${typeof e}, value: ${e}`)}}stringToValue(e){const t=this.getModel().getType();if(""===e.trim())return null;if("object"===t||"boolean"===t)return JSON.parse(e);if("date"===t){const t=new Date(e);if("Invalid Date"===t.toString())throw new Error(`${this.getApp().getModel().getText().error.invalidDate}: ${e}`);return t}if("number"===t){const t=Number(e);if(isNaN(t))throw new Error(this.getApp().getModel().getText().error.notNumber);return t}return e}getViewStyle(e){}async openPage(e){return await this.getParent().openPage(e)}getForm(){return this.getParent()}getPage(){return this.getParent().getParent()}getApp(){return this.getParent().getParent().getParent()}isVisible(){return"true"===this.getModel().getAttr("visible")}isAutoFocus(){return"true"===this.getModel().getAttr("autoFocus")}getAutocomplete(){return this.getModel().getAttr("autocomplete")||null}getFormat(){return this.getModel().getAttr("format")}}class FormController extends ModelController{static create(t,n){const{ctrlClass:r}=t.getData();if(r){const s=e.Wt.getGlobalClass(r);if(!s)throw new Error(`no class ${r}`);return new s(t,n)}return new(e.Wt.getGlobalClass(`${t.getClassName()}Controller`))(t,n)}constructor(e,t){super(e,t),this.fields={},"object"==typeof window&&console.debug(`${this.constructor.name}.constructor`,e)}init(){for(const e of this.getModel().fields){(this.fields[e.getName()]=FieldController.create(e,this)).init()}}deinit(){for(const e in this.fields)this.fields[e].deinit();super.deinit()}isValid(){return!0}async openPage(e){return await this.getPage().openPage(e)}getPage(){return this.getParent()}isChanged(){return!1}async onFieldChange(e){await this.getPage().onFormChange(e)}getUpdated(){return this.state.updated}invalidate(){this.state.updated=Date.now()}async onActionClick(e,t){console.debug("FormController.onActionClick",e,t)}getField(e){return this.fields[e]}getApp(){return this.getParent().getParent()}getSelectedRowKey(){return null}isAutoFocus(){for(const e in this.fields)if(this.fields[e].isAutoFocus())return!0;return!1}isVisible(){return"true"===this.getModel().getAttr("visible")}getActiveRow(){throw new Error("FormController.getActiveRow not implemented")}getRow(){throw new Error("FormController.getRow not implemented")}}class FormView extends ModelView{constructor(e){super(e),this.onActionsClick=async e=>{const t=this.getCtrl(),n=e.dataset.action;try{if(!await t.onActionClick(n,t.getActiveRow()))throw new Error(`no handler for action '${n}'`)}catch(e){console.error(e),await this.getCtrl().getApp().alert({message:e.message})}},this.checkParent()}shouldComponentUpdate(e,t){return console.debug("FormView.shouldComponentUpdate",this.getCtrl().getModel().getFullName(),e.updated-this.props.updated),!!(e.updated-this.props.updated)}}class RowFormView extends FormView{renderToolbar(){const{ctrl:t}=this.props,n=t.getModel().getApp().getText();return(0,r.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__toolbar flex grid-gap-5`},{children:[t.getModel().hasDefaultPersistentDataSource()&&(0,r.jsx)(e.zx,Object.assign({classList:["toolbar-button"],onClick:t.onEditClick,visible:"view"===t.getMode()},{children:(0,r.jsx)("div",{children:n.form.edit})}),"edit"),t.getModel().hasDefaultPersistentDataSource()&&(0,r.jsx)(e.zx,Object.assign({classList:["toolbar-button"],enabled:(t.state.changed||t.state.hasNew)&&t.state.valid,onClick:t.onSaveClick,visible:"edit"===t.getMode()},{children:(0,r.jsx)("div",{children:n.form.save})}),"save"),t.getModel().hasDefaultPersistentDataSource()&&t.getModel().getKey()&&(0,r.jsx)(e.zx,Object.assign({classList:["toolbar-button"],visible:"edit"===t.getMode()&&!t.state.changed&&t.state.valid,onClick:t.onCancelClick},{children:(0,r.jsx)("div",{children:n.form.cancel})}),"cancel"),t.getModel().hasDefaultPersistentDataSource()&&t.getModel().getKey()&&(0,r.jsx)(e.zx,Object.assign({classList:["toolbar-button"],enabled:t.state.changed||!t.isValid(),onClick:t.onDiscardClick,visible:"edit"===t.getMode()&&(t.state.changed||!t.state.valid)},{children:(0,r.jsx)("div",{children:n.form.discard})}),"discard"),t.getModel().hasDefaultPersistentDataSource()&&"true"===t.getModel().getAttr("refreshButton")&&(0,r.jsx)(e.zx,Object.assign({classList:["toolbar-button"],enabled:!t.state.changed&&!t.state.hasNew,onClick:t.onRefreshClick,visible:"view"===t.getMode()},{children:(0,r.jsx)("div",{children:n.form.refresh})}),"refresh"),this.isActionsVisible()&&t.getModel().hasActions()&&(0,r.jsx)(e.PS,Object.assign({classList:["toolbar-dropdown-button"],actions:this.getActionsForDropdownButton(),onClick:this.onActionsClick,enabled:this.isActionsEnabled()},{children:(0,r.jsx)(e.Yv,{})}))]}))}isActionsEnabled(){return!0}isActionsVisible(){return!this.getCtrl().getModel().hasDefaultPersistentDataSource()||!!this.getCtrl().getModel().getKey()}renderLabel(e){const t=e.getModel(),n=t.getName();return(0,r.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__label`},{children:[t.getCaption(),":",t.isNotNull()&&(0,r.jsx)("span",Object.assign({style:{color:"red"}},{children:"*"}))]}),`label.${n}`)}renderField(e){const t=e.getModel().getName();return(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__field`},{children:this.renderFieldView(e)}),`field.${t}`)}renderFieldView(e){return RowFormView.renderFieldView(e)}static renderFieldView(e){return e.renderView()}renderError(t){const n=t.getModel().getName();return(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__error`},{children:(0,r.jsx)(e.u,{position:"left",type:"alert",hidden:null===t.getErrorMessage(),tip:t.getErrorMessage()})}),`tooltip.${n}`)}renderGroup(e){return[this.renderLabel(e),this.renderField(e),this.renderError(e)]}renderGroups(){const e=this.getCtrl();return(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__groups`},{children:Object.keys(e.fields).filter((t=>e.getField(t).isVisible())).map((t=>this.renderGroup(e.getField(t))))}))}render(){return(0,c.fF)("RowFormView.render",this.getCtrl().getModel().getFullName()),(0,r.jsxs)("div",Object.assign({className:`${this.getCssClassNames()} flex-column grid-gap-5`,style:this.getStyle()},{children:[(this.getCtrl().getModel().hasDefaultPersistentDataSource()||this.getCtrl().getModel().hasActions())&&this.renderToolbar(),this.renderGroups()]}))}}class RowFormController extends FormController{constructor(){super(...arguments),this.fields={},this.state={updated:Date.now(),mode:"edit",hasNew:!1,changed:!1,valid:!0},this.onModelRefresh=async e=>{console.debug("RowFormController.onModelRefresh",this.getModel().getFullName()),this.view&&(this.refill(),this.invalidate(),this.rerender())},this.onModelInsert=async e=>{console.debug("RowFormController.onModelInsert",this.getModel().getFullName()),this.refill(),this.invalidate(),this.calcState(),this.getParent().onFormInsert(e)},this.onModelUpdate=async e=>{console.debug("RowFormController.onModelUpdate",this.getModel().getFullName(),e),this.refill(),this.invalidate(),this.calcState(),this.getParent().onFormUpdate(e)},this.onSaveClick=async()=>{if(console.debug("RowFormController.onSaveClick"),this.validate(),this.calcState(),this.isValid())try{this.getApp().getView().disableRerender(),await this.getModel().update(),this.state.mode="view",console.debug("form model updated",this.getModel().getFullName())}finally{this.getApp().getView().enableRerender(),await this.getApp().getView().rerender()}else console.error(`cannot update invalid row form: ${this.getModel().getFullName()}`),await this.rerender()},this.onDiscardClick=()=>{console.debug("RowFormController.onDiscardClick",this.getModel().getFullName());const e=[];for(const t in this.fields){const n=this.fields[t];!n.isChanged()&&n.isValid()||e.push(t)}this.getModel().discard(e),e.forEach((e=>{this.fields[e].refill()})),this.calcState(),this.getModel().hasDefaultPersistentDataSource()&&(this.state.mode="view"),this.rerender(),this.getParent().onFormDiscard(this)},this.onRefreshClick=async()=>{await this.getModel().refresh()},this.onEditClick=e=>{console.debug("RowFormController.onEditClick"),this.state.mode="edit",this.rerender()},this.onCancelClick=e=>{console.debug("RowFormController.onCancelClick"),this.state.mode="view",this.rerender()}}init(){super.init(),this.getModel().on("refresh",this.onModelRefresh),this.getModel().on("insert",this.onModelInsert),this.getModel().on("update",this.onModelUpdate),this.getModel().getDefaultDataSource().isPersistent()&&(this.state.mode="view"),this.calcState(),this.state.hasNew&&(this.state.mode="edit")}deinit(){this.getModel().off("refresh",this.onModelRefresh),this.getModel().off("insert",this.onModelInsert),this.getModel().off("update",this.onModelUpdate),super.deinit()}calcState(){this.state.hasNew=this.getModel().hasNew(),this.state.changed=this.isChanged(),this.state.valid=this.isValid()}refill(){console.debug("RowFormController.refill",this.getModel().getFullName());for(const e in this.fields)this.fields[e].refill()}isValid(){for(const e in this.fields){if(!this.fields[e].isValid())return!1}return!0}validate(){for(const e in this.fields)this.fields[e].validate();this.invalidate()}clearFieldsError(){for(const e in this.fields)this.fields[e].setError(null)}isChanged(){if(this.getModel().isChanged())return!0;for(const e in this.fields){if(this.fields[e].isChanged())return!0}return!1}async onFieldChange(e){this.calcState(),this.invalidate(),await super.onFieldChange(e)}getViewClass(){return super.getViewClass()||RowFormView}getActiveRow(){return this.getModel().getRow(!0)}getRow(){return this.getModel().getRow(!0)}getMode(){return this.state.mode}isActionEnabled(e){return this.isViewMode()}isEditMode(){return"edit"===this.getMode()}isViewMode(){return"view"===this.getMode()}getField(e){return this.fields[e]}}a.W.registerGlobalClass(RowFormController);class PageView extends ModelView{constructor(e){super(e),this.onActionsClick=async e=>{const t=this.getCtrl(),n=e.dataset.action;try{if(!await t.onActionClick(n))throw new Error(`no handler for action '${n}'`)}catch(e){console.error(e),await this.getCtrl().getApp().alert({message:e.message})}},this.checkParent(),this.el=t.createRef()}render(){return(0,c.fF)("PageView.render",this.getCtrl().getModel().getFullName()),(0,r.jsxs)("div",Object.assign({className:`${this.getCssClassNames()} ${this.getCtrl().isModal()?"":"full"} flex-column`,style:this.getStyle(),ref:this.el,tabIndex:0,onKeyDown:this.getCtrl().onKeyDown},{children:[this.renderHeader(),this.renderMain(),this.getCtrl().isModal()&&this.renderFooter()]}))}renderHeader(){const e=this.getCtrl().getModel();return(0,r.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__header`},{children:[this.renderTitle(),e.isModal()&&[...e.getKey()?[this.renderOpenPageHeaderButton()]:[],this.renderClosePageHeaderButton()]]}))}isToolbar(){return this.getCtrl().getModel().hasActions()}getFormTabs(e){return e.map((e=>({name:e.getModel().getName(),title:e.getTitle(),content:this.renderForm(e)})))}getRowForms(){return this.getCtrl().forms.filter((e=>"RowForm"===e.getModel().getClassName())).filter((e=>e.isVisible()))}getTableForms(){return this.getCtrl().forms.filter((e=>"TableForm"===e.getModel().getClassName())).filter((e=>e.isVisible()))}renderForm(e,n={}){return t.createElement(e.getViewClass(),Object.assign({parent:this,key:e.getModel().getName(),ctrl:e,onCreate:e.onViewCreate,updated:e.getUpdated()},n))}renderRowForms(){return this.getRowForms().map((e=>this.renderForm(e)))}renderTitle(){const e=this.getCtrl(),t=e.getModel();return(0,r.jsxs)("h1",Object.assign({className:`${this.getCssBlockName()}__title`},{children:[e.getTitle(),t.hasRowFormWithDefaultSqlDataSource()&&(e.isChanged()||t.hasNew())&&[" ",(0,r.jsx)("span",Object.assign({className:`${this.getCssBlockName()}__star`},{children:"*"}),"star")]]}))}renderSelectButton(){const t=this.getCtrl(),n=t.getModel();return(0,r.jsx)(e.zx,Object.assign({classList:["toolbar-button","default"],onClick:t.onSelectClick,enabled:!!t.getSelectedRowKey()},{children:(0,r.jsx)("div",{children:n.getApp().getText().page.select})}))}renderSaveAndCloseButton(){const t=this.getCtrl(),n=t.getModel();return(0,r.jsx)(e.zx,Object.assign({classList:["toolbar-button","default"],onClick:t.onSaveAndCloseClick,enabled:t.isValid()&&(n.hasNew()||t.isChanged())},{children:(0,r.jsx)("div",{children:n.getApp().getText().page.saveAndClose})}))}renderCloseButton(){const t=this.getCtrl(),n=t.getModel();return(0,r.jsx)(e.zx,Object.assign({classList:["toolbar-button"],onClick:t.onClosePageClick},{children:(0,r.jsx)("div",{children:n.getApp().getText().page.close})}))}renderActionsDropdownButton(){return(0,r.jsx)(e.PS,Object.assign({classList:["toolbar-dropdown-button"],actions:this.getActionsForDropdownButton(),onClick:this.onActionsClick},{children:(0,r.jsx)(e.Yv,{})}))}renderToolbar(){const e=this.getCtrl().getModel();return(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__toolbar`},{children:e.hasActions()&&this.renderActionsDropdownButton()}))}renderTableForms(){const t=this.getTableForms();return 1===t.length?this.renderForm(t[0]):(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__table-forms flex-max frame`},{children:(0,r.jsx)("div",Object.assign({className:"frame__container"},{children:(0,r.jsx)(e.db,{tabs:this.getFormTabs(t),classList:["Tab-blue","full"]})}))}))}renderOpenPageHeaderButton(){const t=this.getCtrl();return(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__open`,onClick:t.onOpenPageClick},{children:(0,r.jsx)(e.r$,{})}),"open")}renderClosePageHeaderButton(){const t=this.getCtrl();return(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__close`,onClick:t.onClosePageClick},{children:(0,r.jsx)(e.BX,{})}),"close")}renderMain(){return(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__main flex-max frame`},{children:(0,r.jsxs)("div",Object.assign({className:"frame__container flex-column grid-gap-10"},{children:[this.isToolbar()&&this.renderToolbar(),this.getCtrl().getModel().isFormInTab()?this.renderForms2():this.renderForms()]}))}))}renderForms(){const e=this.getCtrl().getModel();return[...e.hasRowForm()?[this.renderRowForms()]:[],...e.hasTableForm()?[this.renderTableForms()]:[]]}renderForms2(){return(0,r.jsx)(e.db,{tabs:this.getFormTabs(this.getCtrl().forms.filter((e=>e.isVisible()))),classList:["Tab-blue","full"]})}renderFooter(){const e=this.getCtrl().getModel();return(0,r.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__footer`},{children:[this.renderCloseButton(),e.isModal()&&e.hasRowFormWithDefaultSqlDataSource()&&this.renderSaveAndCloseButton(),e.isSelectMode()&&this.renderSelectButton()]}))}getStyle(){if(this.getCtrl().isModal())return{width:1e3,height:750}}componentDidMount(){this.getCtrl().isAutoFocus()&&!this.getCtrl().getModel().getKey()||this.focus()}focus(){this.getElement()?this.getElement().focus():console.error(`${this.getCtrl().getModel().getFullName()}: el is null (ref={this.el})`)}}class PageController extends ModelController{constructor(e,t,n){if(super(e,t),this.forms=[],this.onSaveAndCloseClick=async()=>{if(console.debug("PageController.onSaveAndCloseClick"),this.validate(),this.isValid()){try{this.getApp().getView().disableRerender(),await this.getModel().update(),console.debug("page model updated",this.getModel().getFullName())}finally{this.getApp().getView().enableRerender()}await this.getApp().closePage(this),this.getModel().getOptions().onClose&&this.getModel().getOptions().onClose()}else await this.rerender()},this.onClosePageClick=async e=>{console.debug("PageController.onClosePageClick",this.getModel().getFullName()),await this.close()},this.onOpenPageClick=async e=>{const t=this.getModel().getName(),n=this.getModel().getKey(),r=this.createOpenInNewLink(t,n);window.open(r,"_blank")},this.onKeyDown=async e=>{"Escape"===e.key&&this.isModal()&&await this.close()},this.onSelectClick=async e=>{console.debug("PageController.onSelectClick"),await this.selectRow(this.getSelectedRowKey())},this.onResetClick=async e=>{console.debug("PageController.onResetClick"),await this.selectRow(null)},"object"==typeof window&&console.debug(`${this.constructor.name}.constructor`,e,n),!n)throw new Error("no id");this.id=n}static create(e,t,n,r=null){const{ctrlClass:s}=e.getData();if(s){const o=a.W.getGlobalClass(s);if(!o)throw new Error(`no class ${s}`);return new o(e,t,n,r)}return new PageController(e,t,n,r)}init(){for(const e of this.getModel().forms){const t=FormController.create(e,this);t.init(),this.forms.push(t)}}deinit(){console.debug("PageController.deinit: "+this.getModel().getFullName());for(const e of this.forms)e.deinit();super.deinit()}createOpenInNewLink(e,t){return this.getApp().getHostApp().createLink({page:e,params:Object.assign({},DataSource.keyToParams(t))})}async close(){const e=this.isChanged();if(this.getModel().hasRowFormWithDefaultSqlDataSource()&&e){if(!await this.getApp().confirm({message:this.getModel().getApp().getText().form.areYouSure}))return}await this.getApp().closePage(this),this.getModel().getOptions().onClose&&this.getModel().getOptions().onClose()}validate(){for(const e of this.forms)e instanceof RowFormController&&e.validate()}isValid(){for(const e of this.forms)if(!e.isValid())return!1;return!0}async onFormChange(e){this.rerender()}onFormDiscard(e){console.debug("PageController.onFormDiscard",this.getModel().getFullName()),this.rerender()}onFormUpdate(e){console.debug("PageController.onFormUpdate:",this.getModel().getFullName(),e),this.rerender()}onFormInsert(e){console.debug("PageController.onFormInsert:",this.getModel().getFullName());for(const e of this.forms)e.invalidate();this.rerender()}async openPage(e){e.params||(e.params={});const t=this.getModel().getParams();for(const n in t)e.params[n]||(e.params[n]=t[n]);return await this.getApp().openPage(e)}isChanged(){for(const e of this.forms)if(e.isChanged())return!0;return!1}getApp(){return this.getParent()}getViewClass(){return super.getViewClass()||PageView}findForm(e){return this.forms.find((t=>t.getModel().getName()===e))}getForm(e){const t=this.findForm(e);if(!t)throw new Error(`${this.getModel().getFullName()}: no form controller ${e}`);return t}async onActionClick(e){console.debug("PageController.onActionClick",e)}getTitle(){return`${this.composeTitle()} - ${this.getApp().getModel().getCaption()}`}composeTitle(){const e=this.getKeyPart();return[this.getModel().getCaption(),...this.getApp().isDebugMode()?[`(${this.getId()})`]:[],...e?[e]:[]].join(" ")}getKeyPart(){const e=this.getModel().getKey();return e?this.composeKeyPart(e):null}composeKeyPart(e){const t=(0,o.mV)(e);return 1===t.length&&"number"==typeof t[0]?`#${t[0]}`:`${e}`}getSelectedRowKey(){for(const e of this.forms){const t=e.getSelectedRowKey();if(t)return t}return null}async selectRow(e){console.debug("PageController.selectRow",e),await this.close(),await this.getModel().getOptions().onSelect(e)}invalidate(){this.forms.forEach((e=>e.invalidate()))}getId(){return this.id}isModal(){return this.getModel().isModal()}isAutoFocus(){for(const e of this.forms)if(e.isAutoFocus())return!0;return!1}}a.W.registerGlobalClass(PageController);class ApplicationView extends ModelView{render(){return(0,c.fF)(`${this.constructor.name}.render`,this.getCtrl().getModel().getFullName()),(0,r.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__container`,style:this.getStyle()},{children:[this.renderHeader(),this.renderMain(),this.renderFooter(),this.renderModals()]}))}renderHeader(){return(0,r.jsx)("header",Object.assign({className:`${this.getCssBlockName()}__header`},{children:(0,r.jsx)(e.v2,{items:this.getCtrl().getMenuItemsProp(),onClick:this.getCtrl().onMenuItemClick,hostApp:this.getCtrl().getHostApp()})}))}renderMain(){return(0,r.jsx)("main",Object.assign({className:`${this.getCssBlockName()}__main`},{children:this.renderActivePage()}))}renderActivePage(){const{ctrl:e}=this.props;return e.activePage?this.renderView(e.activePage):null}renderView(e,n={}){return t.createElement(e.getViewClass(),Object.assign({parent:this,ctrl:e,onCreate:e.onViewCreate},n))}renderFooter(){return(0,r.jsx)("footer",Object.assign({className:`${this.getCssBlockName()}__footer`},{children:(0,r.jsx)(e.XW,{onCreate:this.getCtrl().onStatusbarCreate})}))}renderModals(){return this.getCtrl().modals.map((t=>t instanceof PageController?(0,r.jsx)(e.u_,{children:this.renderView(t)},t.getId()):this.renderView(t,{key:t.getId()})))}}class WebSocketClient{constructor(e={}){if(this.options=e,!e.applicationController)throw new Error("no options.applicationController");if(!e.protocol)throw new Error("no options.protocol");this.url=`${e.protocol}://${window.location.host}/?${this.createUriParamsString(e)}`,this.webSocket=null,this.refreshTimeoutId=null,this.RECONNECT_TIMEOUT=10,this.REFRESH_TIMEOUT=3600}createUriParamsString(e){const t={route:e.route,uuid:e.uuid,userId:e.userId,version:this.getApp().getModel().getData().versions.app};return Object.keys(t).map((e=>`${e}=${encodeURIComponent(t[e])}`)).join("&")}connect(){return console.debug("WebSocketClient.connect",this.url),new Promise(((e,t)=>{this.webSocket=new WebSocket(this.url),this.webSocket.onclose=async e=>{this.webSocket=null,t(new Error(`Connection failed ${e.code}`))},this.webSocket.onopen=t=>{this.webSocket.onclose=this.onClose.bind(this),this.webSocket.onmessage=this.onMessage.bind(this),this.startRefreshTimeout(),e(t)}}))}async onRefreshTimeout(){this.refreshTimeoutId=null,this.send("ping"),this.startRefreshTimeout()}send(e){console.debug("WebSocketClient.send",e),this.webSocket.send(e)}startRefreshTimeout(){this.refreshTimeoutId=setTimeout(this.onRefreshTimeout.bind(this),1e3*this.REFRESH_TIMEOUT)}resetRefreshTimeout(){this.refreshTimeoutId&&(clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=null)}async reconnect(){console.debug("WebSocketClient.reconnect");try{await this.connect()}catch(e){console.error(e),console.debug(`waiting ${this.RECONNECT_TIMEOUT} sec for socket reconnect...`),setTimeout((async()=>await this.reconnect()),1e3*this.RECONNECT_TIMEOUT)}}async onClose(e){console.error("WebSocketClient.onClose",e),this.getApp().getHostApp().logError(new Error(`websocket close ${this.getApp().getModel().getDomain()}/${this.getApp().getModel().getName()}`)),this.resetRefreshTimeout(),this.webSocket.onclose=null,this.webSocket.onmessage=null,this.webSocket=null,await this.reconnect()}async onMessage(e){console.debug("WebSocketClient.onMessage",JSON.parse(e.data));const t=JSON.parse(e.data);"result"===t.type&&(this.getApp().getView().disableRerender(),await this.getApp().getModel().emitResult(t.data),this.getApp().getView().enableRerender(),this.getApp().getView().rerender())}getApp(){return this.options.applicationController}}class ApplicationController extends ModelController{constructor(e,t){super(e),this.frontHostApp=t,this.lastId=0,this.activePage=null,this.modals=[],this.statusbar=null,this.homePageName=null,this.webSocketClient=null,this.onRequest=async e=>{console.debug("onRequest",e),this.statusbar&&this.statusbar.setLastQueryTime(e.time),this.getModel().getData().versions.app&&this.getModel().getData().versions.app!==e.remoteAppVersion&&this.createVersionNotificationIfNotExists()},this.onStatusbarCreate=e=>{this.statusbar=e},this.onLogout=async()=>{console.debug("ApplicationController.onLogout");await this.getModel().request("POST",{action:"logout"});location.reload()},this.onMenuItemClick=async(e,t,n)=>{if(console.debug("ApplicationController.onMenuItemClick",e,t,n),"page"===t)await this.openPage({name:n,modal:!1}),history.pushState({pageName:n},"",this.getHostApp().createLink({page:n}));else if("action"===t)try{if(!await this.onActionClick(n))throw new Error(`no handler for action '${n}'`)}catch(e){console.error(e),await this.alert({message:e.message})}else{if("custom"!==t||"logout"!==n)throw new Error(`unknown menu type/name: ${t}/${n}`);await this.onLogout()}},"object"==typeof window&&console.debug(`${this.constructor.name}.constructor`,e)}static create(t,n){const{ctrlClass:r}=t.getData();if(r){const s=e.Wt.getGlobalClass(r);if(!s)throw new Error(`no class ${r}`);return new s(t,n)}return new ApplicationController(t,n)}init(){super.init(),this.getModel().on("request",this.onRequest);const e=this.getModel().getData().pages[0];this.activePage=e?this.createPage(e,{modal:!1}):null;const t=this.getActivePageName();this.homePageName=t||this.frontHostApp.getDocumentTitle()}deinit(){this.getModel().off("request",this.onRequest),super.deinit()}getViewClass(){return super.getViewClass()||ApplicationView}createView(t){this.view=e.mm.createReactComponent2(t,this.getViewClass(),{ctrl:this,key:this.getModel().getName()}),this.statusbar&&this.statusbar.setLastQueryTime(this.getModel().getAttr("time"))}createVersionNotificationIfNotExists(){if(!document.querySelector(".version-notification")){const e=document.createElement("div");e.innerHTML=this.getModel().getText().application.versionNotification,e.className="version-notification",document.querySelector(`.${this.getView().getCssBlockName()}__body`).append(e)}}getGlobalParams(){return{}}createPage(e,t){if(void 0===t.modal)throw new Error("no options.modal");const n=new Page(e,this.getModel(),t);n.init();const r=PageController.create(n,this,`c${this.getNextId()}`);return r.init(),r}async openPage(t){if(console.debug("ApplicationController.openPage",t),!t.name)throw new Error("no name");const n=this.findPageControllerByPageNameAndKey(t.name,null);if(n)return this.onPageSelect(n),n;const r={action:o.aU.page,page:t.name,newMode:void 0!==t.newMode?e.Wt.encodeValue(t.newMode):void 0,params:t.params?e.Wt.encodeObject(t.params):void 0},{page:s}=await this.getModel().request2("GET",`${window.location.pathname}?${e.Wt.queryToString(r)}`);if(void 0===t.modal&&(t.modal=!0),!t.onClose){const e=document.activeElement;t.onClose=()=>{e&&e.focus()}}const i=this.createPage(s,t);return i.isModal()?this.addModal(i):this.addPage(i),await this.rerender(),i}addModal(e){this.modals.push(e)}removeModal(e){const t=this.modals.indexOf(e);if(-1===t)throw new Error(`cannot find modal: ${e.getId()}`);this.modals.splice(t,1)}getNextId(){return this.lastId++,this.lastId}getNewId(){return`c${this.getNextId()}`}addPage(e){this.activePage&&this.closePage(this.activePage),this.activePage=e,this.frontHostApp.setDocumentTitle(this.getTitle())}findPageControllerByPageNameAndKey(e,t){return this.activePage&&this.activePage.getModel().getName()===e&&this.activePage.getModel().getKey()===t?this.activePage:null}onPageSelect(e){console.debug("ApplicationController.onPageSelect",e.getModel().getName())}async closePage(e){if(console.debug("ApplicationController.closePage",e.getModel().getFullName()),this.modals.indexOf(e)>-1)this.modals.splice(this.modals.indexOf(e),1);else{if(this.activePage!==e)throw new Error("page not found");this.activePage=null,document.title=""}await this.rerender(),e.deinit(),e.getModel().deinit()}async onActionClick(e){console.debug("ApplicationController.onActionClick",e)}getMenuItemsProp(){return[...this.getModel().getData().menu?Object.keys(this.getModel().getData().menu).map((e=>({name:e,title:e,items:this.getModel().getData().menu[e].map((e=>({type:e.type,name:e.page||e.action,title:e.caption})))}))):[],...this.getModel().getUser()?[{name:"user",title:`${this.getModel().getDomain()}/${this.getModel().getUser().login}`,items:[{type:"custom",name:"logout",title:"Logout"}]}]:[]]}getActivePageName(){return this.activePage?this.activePage.getModel().getName():null}async onWindowPopState(e){console.debug("ApplicationController.onWindowPopState",e.state),await this.openPage({name:e.state?e.state.pageName:this.homePageName,modal:!1})}getTitle(){return this.activePage?this.activePage.getTitle():this.getModel().getCaption()}invalidate(){this.activePage&&this.activePage.invalidate(),this.modals.filter((e=>e instanceof PageController)).forEach((e=>e.invalidate()))}async alert(e){e.title||(e.title=this.getModel().getText().application.alert);const t=document.activeElement;try{return await this.frontHostApp.alert(e)}finally{t&&t.focus()}}async confirm(e){e.title||(e.title=this.getModel().getText().application.confirm),e.yesButton||(e.yesButton=this.getModel().getText().confirm.yes),e.noButton||(e.noButton=this.getModel().getText().confirm.no);const t=document.activeElement;try{return await this.frontHostApp.confirm(e)}finally{t&&t.focus()}}getRootPath(){return"/"}async openModal(e){this.addModal(e),await this.rerender()}async closeModal(e){this.removeModal(e),await this.rerender()}getHostApp(){return this.frontHostApp}async connect(){const e=this.getModel().getData();this.webSocketClient=new WebSocketClient({applicationController:this,protocol:"https:"===window.location.protocol?"wss":"ws",route:e.route,uuid:e.uuid,userId:e.user?e.user.id:null}),await this.webSocketClient.connect()}async rpc(e,t={}){return await this.getModel().rpc(e,t)}getDomain(){return this.getModel().getDomain()}getBaseUrl(){return`/${this.getDomain()}`}isDebugMode(){return this.isDev()}isDev(){return"dev"===this.getModel().getData().nodeEnv}}e.Wt.registerGlobalClass(ApplicationController);class AlertView extends View{constructor(e){super(e),this.el=t.createRef()}getHeaderStyle(){return this.getCtrl().options.titleStyle}render(){return(0,r.jsx)("div",Object.assign({className:this.getCssClassNames(),ref:this.el,tabIndex:0,onKeyDown:this.getCtrl().onKeyDown},{children:(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__container`},{children:(0,r.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__content flex-column`},{children:[(0,r.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__header`},{children:[(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__title`,style:this.getHeaderStyle()},{children:this.getCtrl().options.title||"Alert"})),(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__close`,onClick:this.getCtrl().onCloseClick},{children:(0,r.jsx)(e.BX,{})}))]})),(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__main flex-max`},{children:this.getCtrl().options.message})),(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__footer`},{children:(0,r.jsx)(e.zx,{classList:[`${this.getCssBlockName()}__ok-button`],title:"OK",onClick:this.getCtrl().onOkButtonClick})}))]}))}))}))}componentDidMount(){this.getElement().focus()}}class AlertController extends Controller{constructor(e){if(super(),this.onOkButtonClick=async e=>{this.close()},this.onCloseClick=async e=>{this.close()},this.onKeyDown=async e=>{"Escape"===e.key&&this.close()},this.options=e,!e.message)throw new Error("no message");if(!e.onClose)throw new Error("no onClose")}getViewClass(){return AlertView}close(){this.options.onClose()}}class ConfirmView extends View{constructor(e){super(e),this.el=t.createRef()}render(){if(!this.getCtrl().options.yesButton)throw new Error("no yesButton option");if(!this.getCtrl().options.noButton)throw new Error("no noButton option");return(0,r.jsx)("div",Object.assign({className:this.getCssClassNames(),ref:this.el,tabIndex:0,onKeyDown:this.getCtrl().onKeyDown},{children:(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__container`},{children:(0,r.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__content flex-column`},{children:[(0,r.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__header`},{children:[(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__title`,style:this.getCtrl().options.titleStyle},{children:this.getCtrl().options.title||"Confirm"})),(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__close`,onClick:this.getCtrl().onCloseClick},{children:(0,r.jsx)(e.BX,{})}))]})),(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__main flex-max`},{children:this.getCtrl().options.message})),(0,r.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__footer`},{children:[(0,r.jsx)(e.zx,{classList:[`${this.getCssBlockName()}__no-button`],title:this.getCtrl().options.noButton,onClick:this.getCtrl().onCloseClick}),(0,r.jsx)(e.zx,{classList:[`${this.getCssBlockName()}__yes-button`],title:this.getCtrl().options.yesButton,onClick:this.getCtrl().onYesClick})]}))]}))}))}))}componentDidMount(){this.getElement().focus()}}class ConfirmController extends Controller{constructor(e){if(super(),this.onYesClick=e=>{this.close(!0)},this.onCloseClick=e=>{this.close(!1)},this.onKeyDown=async e=>{"Escape"===e.key&&this.close(!1)},this.options=e,!e.message)throw new Error("no message");if(!e.onClose)throw new Error("no onClose")}getViewClass(){return ConfirmView}close(e){this.options.onClose(e)}}class ViewerFrontHostApp extends e.Qh{constructor(e){if(!e.data)throw new Error("ViewerFrontHostApp: no data");super(e),this.options=e,this.applicationController=null}async run(){console.debug("ViewerFrontHostApp.run",this.getData());const e=new Application(this.getData());e.init();const t=this.applicationController=ApplicationController.create(e,this);t.init();const n=`.${t.getViewClass().name}__root`,r=document.querySelector(n);if(!r)throw new Error(`no root element: ${n}`);t.createView(r);try{await t.connect()}catch(e){this.logError(e)}}async onWindowPopState(e){await this.applicationController.onWindowPopState(e)}logError(e){console.error("FrontHostApp.logError",e);const t={type:"error",source:"client",message:e.message,stack:e.stack,data:JSON.stringify({href:window.location.href,platformVersion:this.getData().versions.platform,appVersion:this.getData().versions.app},null,4)};console.debug(`POST ${this.getData().logErrorUrl}`,t),fetch(this.getData().logErrorUrl,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)}).catch((e=>{console.error(e.message)}))}getData(){if(!this.options.data)throw new Error("no data");return this.options.data}alert(t){return console.debug("ViewerFrontHostApp.alert",t),new Promise(((n,r)=>{try{const o=document.querySelector(".alert-root");if(!o)throw new Error("no .alert-root");if(0===o.childElementCount){const r=this.alertCtrl=new AlertController(Object.assign(Object.assign({},t),{onClose:()=>{this.alertCtrl=null,s.unmountComponentAtNode(o),n()}}));e.mm.createReactComponent(o,r.getViewClass(),{ctrl:r,key:0})}else r(new Error("alert already exists"))}catch(e){r(e)}}))}confirm(t){return console.debug("ViewerFrontHostApp.confirm",t),new Promise(((n,r)=>{try{const o=document.querySelector(".alert-root");if(!o)throw new Error("no .alert-root");if(0===o.childElementCount){const r=this.alertCtrl=new ConfirmController(Object.assign(Object.assign({},t),{onClose:e=>{this.alertCtrl=null,s.unmountComponentAtNode(o),n(e)}}));e.mm.createReactComponent(o,r.getViewClass(),{ctrl:r})}else r(new Error("confirm already exists"))}catch(e){r(e)}}))}}e.Wt.registerGlobalClass(ViewerFrontHostApp);class TableForm extends l.l{}a.W.registerGlobalClass(TableForm);class DateField extends u.g{getFormat(){return this.getAttr("format")}rawToValue(t){const n=e.Wt.decodeValue(t);return n&&"false"===this.getAttr("timezone")&&e.HD.addTimezoneOffset(n),n}valueToRaw(t){let n;if(t&&"false"===this.getAttr("timezone")){const r=e.HD.cloneDate(t);e.HD.removeTimezoneOffset(r),n=e.Wt.encodeValue(r)}else n=e.Wt.encodeValue(t);return n}}e.Wt.registerGlobalClass(DateField);class ComboBoxField extends u.g{getDisplayValue(t){let n=null;if(t[this.getData().displayColumn])try{n=e.Wt.decodeValue(t[this.getData().displayColumn])}catch(e){throw console.debug("cannot parse:",t[this.getData().displayColumn]),e}else n=this.getData().displayColumn,n=n.replace(/\{([\w\.]+)\}/g,((e,n)=>t.hasOwnProperty(n)?t[n]||"":e));return n}getValueValue(t){if(!t[this.getData().valueColumn])throw new Error("no valueColumn in ComboBox data source");return e.Wt.decodeValue(t[this.getData().valueColumn])}getComboBoxDataSource(){const e=this.getData().dataSourceName;if(!e)throw new Error(`${this.getFullName()}: no dataSourceName`);if(this.getForm().findDataSource(e))return this.getForm().getDataSource(e);if(this.getPage().findDataSource(e))return this.getPage().getDataSource(e);if(this.getApp().findDataSource(e))return this.getApp().getDataSource(e);throw new Error(`${this.getFullName()}: no data source: ${e}`)}findRowByRawValue(e){return this.getComboBoxDataSource().getRows().find((t=>t[this.getData().valueColumn]===e))}}e.Wt.registerGlobalClass(ComboBoxField);class TextBoxField extends u.g{}a.W.registerGlobalClass(TextBoxField);class PersistentDataSource extends DataSource{constructor(){super(...arguments),this.onTableUpdate=async e=>{if(console.debug("PersistentDataSource.onTableUpdate",this.getFullName(),e),this.deinited)throw new Error(`${this.getFullName()}: this data source deinited for onTableUpdate`);if(e.source!==this){if(!Object.keys(e.updates).length)throw new Error(`${this.getFullName()}: no updates`);await this.refill(),this.getParent()instanceof l.l&&this.getForm().onDataSourceUpdate(e),this.emit("update",e)}},this.onTableInsert=async e=>{if(console.debug("PersistentDataSource.onTableInsert",this.getFullName(),e),this.deinited)throw new Error(`${this.getFullName()}: this data source deinited for onTableInsert`);e.source!==this&&(await this.refill(),this.getParent()instanceof l.l&&this.getForm().onDataSourceInsert(e),this.emit("insert",e))},this.onTableDelete=async e=>{if(console.debug("PersistentDataSource.onTableDelete",this.getFullName(),e),this.deinited)throw new Error(`${this.getFullName()}: this data source deinited for onTableDelete`);e.source!==this&&(await this.refill(),this.getParent()instanceof l.l&&this.getForm().onDataSourceDelete(e),this.emit("delete",e))},this.onTableRefresh=async e=>{if(console.debug("PersistentDataSource.onTableRefresh",this.getFullName(),e),this.deinited)throw new Error(`${this.getFullName()}: this data source deinited for onTableDelete`);if(e.source)throw new Error("refresh is foreign result so source must be null");await this.refill(),this.getParent()instanceof l.l&&this.getForm().onDataSourceRefresh(e),this.emit("refresh",e)}}async insert(e){console.debug("PersistentDataSource.insert",e);const t=this.getAttr("database"),n=this.getAttr("table");if(""===n)throw new Error("no data source table to insert");const r={action:o.aU.create,uuid:this.getApp().getAttr("uuid"),page:this.getForm().getPage().getName(),form:this.getForm().getName(),row:this.getRowWithChanges(e)},s=await this.getApp().request("POST",r),[i]=Object.keys(s[t][n].insertEx);if(!i)throw new Error("no inserted row key");const a=s[t][n].insertEx[i];for(const t in a)e[t]=a[t];this.news.splice(this.news.indexOf(e),1),this.changes.clear(),this.addRow(e);const u={source:this,inserts:s[t][n].insert};return this.getParent()instanceof l.l&&this.getForm().onDataSourceInsert(u),this.emit("insert",u),await this.getApp().emitResult(s,this),s}async update(){console.debug("PersistentDataSource.update",this.getFullName());const e=this.getAttr("database"),t=this.getAttr("table");if(""===t)throw new Error("no data source table to update");if(this.news[0])return await this.insert(this.news[0]);if(!this.changes.size)throw new Error(`no changes: ${this.getFullName()}`);const n={action:o.aU.update,uuid:this.getApp().getAttr("uuid"),page:this.getForm().getPage().getName(),form:this.getForm().getName(),changes:this.getChangesByKey()},r=await this.getApp().request2("PATCH",window.location.pathname,n),[s]=Object.keys(r[e][t].updateEx);if(!s)throw new Error("no updated row");const i=r[e][t].updateEx[s];this.changes.clear(),this.updateRow(s,i);const a={source:this,updates:r[e][t].update};return this.getParent()instanceof l.l&&this.getForm().onDataSourceUpdate(a),this.emit("update",a),await this.getApp().emitResult(r,this),r}async delete(e){if(console.debug("PersistentDataSource.delete:",this.getFullName(),e),!e)throw new Error("no key");const t=this.getAttr("database"),n=this.getAttr("table");if(!n)throw new Error(`no table in data source: ${this.getFullName()}`);const r={action:o.aU.delete,uuid:this.getApp().getAttr("uuid"),page:this.getForm().getPage().getName(),form:this.getForm().getName(),params:{key:e}},s=await this.getApp().request2("DELETE",window.location.pathname,r);await this.refill();const i={source:this,deletes:s[t][n].delete};return this.getParent()instanceof l.l&&this.getForm().onDataSourceDelete(i),this.emit("delete",i),await this.getApp().emitResult(s,this),s}getPageParams(){const e=this.getPage();return e?e.getParams():{}}async refresh(){console.debug("PersistentDataSource.refresh",this.getFullName()),await this.refill(),this.getParent()instanceof l.l&&this.getForm().onDataSourceRefresh({source:this})}async refill(){if(console.debug("PersistentDataSource.refill",this.getFullName()),this.isChanged())throw new Error(`cannot refill changed data source: ${this.getFullName()}`);const e=await this.select(this.getLimit()?{frame:this.frame}:{});this.count=e.count,this.setRows(e.rows),this.lastFrame=1}async fill(e){if(this.isChanged())throw new Error(`cannot fill changed data source: ${this.getFullName()}`);const t=await this.select(this.getLimit()?{frame:e}:{});this.count=t.count,this.addRows(t.rows)}async more(){if(!this.hasMore())throw new Error(`${this.getFullName()}: no more rows`);this.lastFrame++,await this.fill(this.lastFrame)}async select(t={}){console.debug("PersistentDataSource.select",this.getFullName(),t);const n=this.getPage(),r=this.getForm(),s=(0,e.i7)(n?n.getName():void 0,r?r.getName():void 0,this.getName(),Object.assign(Object.assign({},this.getPageParams()),t)),o=await this.getApp().request2("GET",`${window.location.pathname}?${e.Wt.queryToString(s)}`);if(!(o.rows instanceof Array))throw new Error("rows must be array");return o}isPersistent(){return!0}}class SqlDataSource extends PersistentDataSource{}a.W.registerGlobalClass(SqlDataSource);class NoSqlDataSource extends PersistentDataSource{}a.W.registerGlobalClass(NoSqlDataSource);class TextAreaField extends u.g{getRows(){return this.getData().rows}getCols(){return this.getData().cols}}e.Wt.registerGlobalClass(TextAreaField);class PasswordField extends u.g{}e.Wt.registerGlobalClass(PasswordField);class DateTimeField extends u.g{getFormat(){return this.getAttr("format")}rawToValue(t){const n=e.Wt.decodeValue(t);return n&&"false"===this.getAttr("timezone")&&e.HD.addTimezoneOffset(n),n}valueToRaw(t){let n;if(t&&"false"===this.getAttr("timezone")){const r=e.HD.cloneDate(t);e.HD.removeTimezoneOffset(r),n=e.Wt.encodeValue(r)}else n=e.Wt.encodeValue(t);return n}}e.Wt.registerGlobalClass(DateTimeField);class CheckBoxField extends u.g{}a.W.registerGlobalClass(CheckBoxField);class RadioField extends u.g{getDisplayValue(t){const n=this.getAttr("displayColumn");let r=null;if(t[n])try{r=e.Wt.decodeValue(t[n])}catch(e){throw console.debug("cannot parse:",t[n]),e}else r=n,r=r.replace(/\{([\w\.]+)\}/g,((e,n)=>t.hasOwnProperty(n)?t[n]||"":e));return r}getValueValue(t){const n=this.getAttr("valueColumn");if(!t[n])throw new Error("no valueColumn in ComboBox data source");return e.Wt.decodeValue(t[n])}getDataSource(){const e=this.getAttr("dataSourceName");if(!e)throw new Error(`${this.getFullName()}: no dataSourceName`);if(this.getForm().findDataSource(e))return this.getForm().getDataSource(e);if(this.getPage().findDataSource(e))return this.getPage().getDataSource(e);if(this.getApp().findDataSource(e))return this.getApp().getDataSource(e);throw new Error(`${this.getFullName()}: no data source: ${e}`)}findRowByRawValue(e){const t=this.getAttr("valueColumn");return this.getDataSource().getRows().find((n=>n[t]===e))}}e.Wt.registerGlobalClass(RadioField);class FileField extends u.g{}e.Wt.registerGlobalClass(FileField);class PhoneField extends u.g{}e.Wt.registerGlobalClass(PhoneField);class CheckBoxListField extends u.g{getDisplayValue(t){let n=null;if(t[this.getData().displayColumn])try{n=e.Wt.decodeValue(t[this.getData().displayColumn])}catch(e){throw console.debug("cannot parse:",t[this.getData().displayColumn]),e}else n=this.getData().displayColumn,n=n.replace(/\{([\w\.]+)\}/g,((e,n)=>t.hasOwnProperty(n)?t[n]||"":e));return n}getValueValue(t){if(!t[this.getData().valueColumn])throw new Error("no valueColumn in CheckBoxList data source");return e.Wt.decodeValue(t[this.getData().valueColumn])}getDataSource(){const e=this.getData().dataSourceName;if(!e)throw new Error(`${this.getFullName()}: no dataSourceName`);if(this.getForm().findDataSource(e))return this.getForm().getDataSource(e);if(this.getPage().findDataSource(e))return this.getPage().getDataSource(e);if(this.getApp().findDataSource(e))return this.getApp().getDataSource(e);throw new Error(`${this.getFullName()}: no data source: ${e}`)}findRowByRawValue(e){return this.getDataSource().getRows().find((t=>t[this.getData().valueColumn]===e))}}e.Wt.registerGlobalClass(CheckBoxListField);class LinkField extends u.g{}e.Wt.registerGlobalClass(LinkField);class TableFormFieldController extends FieldController{getValueForWidget(e){return this.valueToString(this.getModel().getValue(e))}getForm(){return this.getParent()}getAlign(){return null}}class FieldView extends ModelView{getStyle(e){return this.getCtrl().getViewStyle(e)}}class TableFormFieldView extends FieldView{constructor(e){super(e),this.span=t.createRef()}getSpanOffsetWidth(){return this.span.current?this.span.current.offsetWidth:0}}class TableFormTextBoxFieldView extends TableFormFieldView{render(){const e=this.props.row,t=this.getCtrl();return(0,r.jsx)("div",Object.assign({className:`${this.getCssClassNames()} ellipsis`,style:this.getStyle(e)},{children:(0,r.jsx)("span",Object.assign({ref:this.span},{children:t.getValueForWidget(e)}))}))}}e.Wt.registerGlobalClass(TableFormTextBoxFieldView);class TableFormTextBoxFieldController extends TableFormFieldController{getViewClass(){return super.getViewClass()||TableFormTextBoxFieldView}}e.Wt.registerGlobalClass(TableFormTextBoxFieldController);class RowFormFieldController extends FieldController{constructor(e,t){super(e,t),this.state={value:null,parseError:null,error:null,changed:!1},this.onChange=async(e,t=!0)=>{console.debug("RowFormFieldController.onChange",JSON.stringify("string"==typeof e?e.substring(0,100):e)),this.resetErrors(),this.rerender();try{this.setValueFromWidget(e)}catch(e){console.error(`${this.getModel().getFullName()}: cannot parse view value: ${e.message}`),this.state.parseError=e.message}if(!this.state.parseError&&this.isValidateOnChange()&&(this.validate(),this.isValid()&&this.copyValueToModel()),this.refreshChangedState(),t){try{this.emit("change",{value:e})}catch(e){console.error("unhandled change event error:",this.getModel().getFullName(),e)}this.getParent().onFieldChange({source:this})}},this.onBlur=(e,t=!0)=>{if(console.debug("RowFormFieldController.onBlur",this.getModel().getFullName(),JSON.stringify(e)),this.isEditable()&&(this.rerender(),this.isValidateOnBlur())){try{this.setValueFromWidget(e)}catch(e){console.error(`${this.getModel().getFullName()}: cannot parse view value: ${e.message}`),this.state.parseError=e.message}if(!this.state.parseError&&this.isValidateOnBlur()&&(this.validate(),this.isValid()&&this.copyValueToModel()),this.refreshChangedState(),t){try{this.emit("change",{value:e})}catch(e){console.error("unhandled change event error:",this.getModel().getFullName(),e)}this.getParent().onFieldChange({source:this})}}},this.onChangePure=async(e,t=!0)=>{if(console.debug("RowFormFieldController.onChangePure",JSON.stringify(e)),this.setValue(e),this.resetErrors(),this.rerender(),this.isValidateOnChange()&&(this.validate(),this.isValid()&&this.copyValueToModel()),this.refreshChangedState(),t){try{this.emit("change",{value:e})}catch(e){console.error("unhandled change event error:",this.getModel().getFullName(),e)}this.getParent().onFieldChange({source:this})}}}init(){const e=this.getRow(),t=this.getModel().getValue(e);this.setValue(t)}refill(){if(!this.view)return;const e=this.getModel().getValue(this.getRow());this.setValue(e),this.resetErrors(),this.refreshChangedState()}getRow(){return this.getModel().getForm().getRow()}getForm(){return this.getParent()}copyValueToModel(){this.getModel().setValue(this.getRow(),this.getValue())}putValue(e){this.onChange(e,!1)}getValueForWidget(){const e=this.getValue();return this.valueToString(e)}setValueFromWidget(e){if("string"!=typeof e)throw new Error(`${this.getModel().getFullName()}: widgetValue must be string, but got ${typeof e}`);const t=this.stringToValue(e);this.setValue(t)}setValue(e){this.state.value=e}getValue(){return this.state.value}isChanged(){return this.state.changed}isValid(){return null===this.state.parseError&&null===this.state.error}validate(){this.isVisible()&&(this.state.error=this.getError())}refreshChangedState(){this.state.changed=this.calcChangedState(this.getRow())}getPlaceholder(){if(this.getModel().getAttr("placeholder"))return this.getModel().getAttr("placeholder");if(this.getApp().isDebugMode()){const e=this.getValue();if(void 0===e)return"undefined";if(null===e)return"null";if(""===e)return"empty string"}return null}getError(){if(this.view&&this.view.getWidget())try{this.view.getWidget().getValue()}catch(e){return`can't parse value: ${e.message}`}const e=this.getValue();return this.getModel().isNotNull()&&null==e?this.getNullErrorText():null}getNullErrorText(){return this.getModel().getApp().getText().form.required}isEditable(){return"edit"===this.getParent().getMode()&&!this.getModel().isReadOnly()}isParseError(){return null!==this.state.parseError}calcChangedState(e){if(!e)throw new Error("FieldController: no row");if(this.isParseError())return console.debug(`FIELD CHANGED ${this.getModel().getFullName()}: parse error: ${this.getErrorMessage()}`),!0;if(!this.isValid())return console.debug(`FIELD CHANGED ${this.getModel().getFullName()}: not valid: ${this.getErrorMessage()}`),!0;if(this.getModel().hasColumn()){const t=this.getModel().valueToRaw(this.getValue()),n=this.getModel().getRawValue(e);if(t!==n)return console.debug(`FIELD CHANGED ${this.getModel().getFullName()}`,JSON.stringify(n),JSON.stringify(t)),!0;if(this.getModel().isChanged(e)){let t=e[this.getModel().getAttr("column")],n=this.getModel().getDefaultDataSource().getRowWithChanges(e)[this.getModel().getAttr("column")];return t&&(t=t.substr(0,100)),n&&(n=n.substr(0,100)),console.debug(`MODEL CHANGED ${this.getModel().getFullName()}:`,t,n),!0}}return!1}setError(e){this.state.error=e}resetErrors(){this.setError(null),this.state.parseError=null}getErrorMessage(){return this.state.parseError?this.state.parseError:this.state.error}renderView(){return t.createElement(this.getViewClass(),{onCreate:this.onViewCreate,ctrl:this})}isValidateOnChange(){return this.getModel().validateOnChange()}isValidateOnBlur(){return this.getModel().validateOnBlur()}}class RowFormFieldView extends FieldView{constructor(e){super(e),this.onWidgetCreate=e=>{this.widget=e},this.widget=null}getWidget(){return this.widget}getClassList(){const e=this.getCtrl();return[...super.getClassList(),...e.isEditable()?["editable"]:[],...e.isChanged()?["changed"]:[],...null!==e.getErrorMessage()?["error"]:[]]}}class RowFormDateFieldView extends RowFormFieldView{render(){const t=this.getCtrl();return(0,r.jsx)("div",Object.assign({className:this.getCssClassNames()},{children:(0,r.jsx)(e.Ol,{classList:[`${this.getCssBlockName()}__date-picker`],onCreate:this.onWidgetCreate,value:t.getValueForWidget(),readOnly:!t.isEditable(),onChange:t.onChange,placeholder:t.getPlaceholder(),format:t.getFormat(),oldDates:this.props.oldDates,minDate:this.props.minDate,debug:t.getApp().isDebugMode()})}))}}class RowFormDateFieldController extends RowFormFieldController{getViewClass(){return super.getViewClass()||RowFormDateFieldView}getValueForWidget(){return this.getValue()}setValueFromWidget(e){this.setValue(e)}}a.W.registerGlobalClass(RowFormDateFieldController);class RowFormComboBoxFieldView extends RowFormFieldView{constructor(){super(...arguments),this.onChange=async e=>{this.rerender(),await this.getCtrl().onChange(e)}}isCreateButtonVisible(){return"edit"===this.getCtrl().getForm().getMode()&&("disabled"!==this.getCtrl().getModel().getAttr("newRowMode")&&("editPage"===this.getCtrl().getModel().getAttr("newRowMode")?!!this.getCtrl().getModel().getAttr("itemEditPage")&&!!this.getCtrl().getModel().getAttr("itemCreateForm"):"createPage"===this.getCtrl().getModel().getAttr("newRowMode")?!!this.getCtrl().getModel().getAttr("itemCreatePage")&&!!this.getCtrl().getModel().getAttr("itemCreateForm"):void 0))}renderSelect(){const t=this.getCtrl();return(0,r.jsx)(e.Ph,{classList:[`${this.getCssBlockName()}__select`],onCreate:this.onWidgetCreate,value:t.getValueForWidget(),readOnly:!t.isEditable(),onChange:this.onChange,items:t.getItems(),placeholder:t.getPlaceholder(),onMouseDown:t.getModel().getAttr("itemSelectPage")?t.onItemSelect:null})}renderEditButton(){const t=this.getCtrl();return(0,r.jsx)(e.zx,Object.assign({classList:[`${this.getCssBlockName()}__edit-button`],onClick:t.onEditButtonClick,enabled:!!t.getValue()},{children:"..."}))}renderCreateButton(){const t=this.getCtrl();return(0,r.jsx)(e.zx,Object.assign({classList:[`${this.getCssBlockName()}__create-button`],onClick:t.onCreateButtonClick},{children:"+"}))}render(){return(0,r.jsxs)("div",Object.assign({className:this.getCssClassNames()},{children:[this.renderSelect(),this.getCtrl().getModel().getAttr("itemEditPage")&&!!this.getCtrl().getValue()&&this.renderEditButton(),this.isCreateButtonVisible()&&this.renderCreateButton()]}))}}class RowFormComboBoxFieldController extends RowFormFieldController{constructor(){super(...arguments),this.onEditButtonClick=async e=>{console.debug("RowFormComboBoxFieldController.onEditButtonClick");const t=this.getModel().getAttr("itemEditPage"),n=this.getValue();t&&n&&await this.openPage({name:t,params:{key:n}})},this.onCreateButtonClick=async e=>{console.debug("RowFormComboBoxFieldController.onCreateButtonClick");const t=this.getModel().getAttr("newRowMode"),n=this.getModel().getAttr("itemCreateForm");if(!n)throw new Error("no itemCreateForm");let r;if("editPage"===t)r=this.getModel().getAttr("itemEditPage");else{if("createPage"!==t)throw new Error(`wrong newRowMode value: ${t}`);r=this.getModel().getAttr("itemCreatePage")}const s=(await this.openPage({name:r,newMode:!0})).getModel().getForm(n),o=async e=>{s.off("insert",o);const[t]=e.inserts,[n]=a.W.decodeValue(t);await this.onChange(n.toString())};s.on("insert",o)},this.onListInsert=async e=>{console.debug("RowFormComboBoxFieldController.onListInsert"),await this.rerender()},this.onListUpdate=async e=>{await this.rerender()},this.onListDelete=async e=>{await this.rerender()},this.onItemSelect=async e=>{if(0===e.button){e.preventDefault();const t=this.getValue(),n=t?(0,o.DW)([t]):void 0;await this.openPage({name:this.getModel().getAttr("itemSelectPage"),selectMode:!0,selectedKey:n,onSelect:async e=>{if(e){const[t]=(0,o.mV)(e);this.getValue()!==t&&await this.getView().onChange(t.toString())}else null!==this.getValue()&&await this.getView().onChange("")}})}}}init(){super.init();const e=this.getModel().getComboBoxDataSource();e.on("insert",this.onListInsert),e.on("update",this.onListUpdate),e.on("delete",this.onListDelete)}deinit(){const e=this.getModel().getComboBoxDataSource();e.off("insert",this.onListInsert),e.off("update",this.onListUpdate),e.off("delete",this.onListDelete),super.deinit()}getViewClass(){return super.getViewClass()||RowFormComboBoxFieldView}getItems(){try{return this.getRows().map((e=>({value:this.valueToString(this.getModel().getValueValue(e)),title:this.getModel().getDisplayValue(e)})))}catch(e){throw e.message=`${this.getModel().getFullName()}: ${e.message}`,e}}getRows(){return this.getModel().getComboBoxDataSource().getRows()}getPlaceholder(){return this.getModel().getAttr("placeholder")?this.getModel().getAttr("placeholder"):this.getApp().isDebugMode()?"[null]":null}}a.W.registerGlobalClass(RowFormComboBoxFieldController);class RowFormTextBoxFieldView extends RowFormFieldView{constructor(e){super(e),this.onClear=async e=>{this.getCtrl().onChange(""),setTimeout((()=>{this.getWidget().getElement().focus()}),0)},this.onFocus=async e=>{this.addCssClass("focus"),await this.rerender()},this.onBlur=async e=>{const t=e.target.value;this.removeCssClass("focus"),this.getCtrl().onBlur(t)},this.state={classList:[]}}isCloseVisible(){const e=this.getCtrl();return!!e.isEditable()&&""!==e.getValueForWidget()}renderTextBox(){const t=this.getCtrl();return(0,r.jsx)(e.zC,{classList:[`${this.getCssBlockName()}__input`],value:t.getValueForWidget(),readOnly:!t.isEditable(),enabled:t.isEditable(),autoFocus:t.isAutoFocus(),placeholder:t.getPlaceholder()||null,autocomplete:t.getAutocomplete(),onCreate:this.onWidgetCreate,onChange:t.onChange,onFocus:this.onFocus,onBlur:this.onBlur})}renderCloseIcon(){return(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__close ${this.isCloseVisible()?"visible":""}`,onMouseDown:this.onClear},{children:(0,r.jsx)(e.Tw,{})}))}render(){return(0,r.jsxs)("div",Object.assign({className:this.getCssClassNames()},{children:[this.renderTextBox(),this.renderCloseIcon()]}))}}class RowFormTextBoxFieldController extends RowFormFieldController{getViewClass(){return super.getViewClass()||RowFormTextBoxFieldView}}a.W.registerGlobalClass(RowFormTextBoxFieldController);var h=__webpack_require__(65);class TableFormView extends FormView{constructor(){super(...arguments),this.renderGridCellView=(e,n,r,s)=>{const o=this.getCtrl().getField(n.name);if(!o)throw new Error(`no field: ${n.name}`);return t.createElement(o.getViewClass(),{row:e,column:n,onCreate:r,onUnmount:s,ctrl:o})},this.createLinkCallback=e=>this.getCtrl().getApp().getHostApp().createLink(Object.assign({page:this.getCtrl().getModel().getAttr("itemEditPage")},DataSource.keyToParams(e)))}renderToolbar(){const t=this.getCtrl(),n=t.getModel(),s=n.getDefaultDataSource();return(0,r.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__toolbar flex grid-gap-5`},{children:["disabled"!==n.getData().newRowMode&&(0,r.jsx)(e.zx,Object.assign({classList:["toolbar-button","default"],onClick:t.onNewClick,enabled:!t.getParent().getModel().hasNew()},{children:(0,r.jsx)("div",{children:n.getApp().getText().form.new})}),"new"),"true"===n.getData().refreshButton&&s.isPersistent()&&(0,r.jsx)(e.zx,Object.assign({classList:["toolbar-button"],onClick:t.onRefreshClick,enabled:!t.getParent().getModel().hasNew()},{children:(0,r.jsx)("div",{children:n.getApp().getText().form.refresh})}),"refresh"),"disabled"!==n.getData().deleteRowMode&&(0,r.jsx)(e.zx,Object.assign({classList:["toolbar-button"],onClick:t.onDeleteClick,enabled:t.isRowSelected()},{children:(0,r.jsx)("div",{children:n.getApp().getText().form.delete})}),"delete"),t.getModel().hasActions()&&(0,r.jsx)(e.PS,Object.assign({classList:["toolbar-dropdown-button"],actions:this.getActionsForDropdownButton(),onClick:this.onActionsClick},{children:(0,r.jsx)(e.Yv,{})}))]}))}renderPaging(){const t=this.getCtrl(),n=this.getCtrl().getModel().getDefaultDataSource();return(0,r.jsxs)("div",Object.assign({className:"paging"},{children:[(0,r.jsx)("div",Object.assign({className:"paging__countBlock"},{children:(0,r.jsxs)("span",Object.assign({className:"count"},{children:[n.getRowsLength()," ",n.getLimit()&&`of ${h.G.formatNumber(n.getCount())}`]}))})),n.getLimit()&&(0,r.jsxs)("div",Object.assign({className:"paging__gotoBlock"},{children:[(0,r.jsx)(e.zx,Object.assign({enabled:t.canPrev(),onClick:t.onPreviousClick},{children:(0,r.jsx)(e.Ey,{size:18})})),(0,r.jsx)(e.zC,{value:t.getModel().getDefaultDataSource().getFrame().toString(),onChange:t.onFrameChanged}),(0,r.jsxs)("div",Object.assign({className:"paging__framesCount"},{children:[" ","/ ",h.G.formatNumber(n.getFramesCount())," "]})),(0,r.jsx)(e.zx,Object.assign({enabled:t.canNext(),onClick:t.onNextClick},{children:(0,r.jsx)(e.m9,{size:18})}))]}))]}))}getGridColumns(){const e=this.getCtrl();return Object.keys(e.fields).filter((t=>e.getField(t).isVisible())).map((t=>{const n=e.getField(t);return{name:n.getModel().getName(),title:n.getModel().getCaption(),width:n.getModel().getWidth(),align:n.getAlign()}}))}getRows(){return this.getCtrl().getModel().getDefaultDataSource().getRows()}getGridExtraColumn(){return!0}getGridClass(){return e.rj}renderGrid(){const e=this.getCtrl();return t.createElement(this.getGridClass(),{classList:["flex-max"],onCreate:e.onGridCreate,name:e.getModel().getFullName(),columns:this.getGridColumns(),rows:this.getRows(),getRowKey:t=>e.getModel().getDefaultDataSource().getRowKey(t),onDoubleClick:e.onGridCellDblClick,onDeleteKeyDown:e.onGridDeleteKeyDown,onSelectionChange:e.onGridSelectionChange,onLinkClick:e.onGridLinkClick,renderGridCellView:this.renderGridCellView,updated:e.getUpdated(),extraColumn:this.getGridExtraColumn(),selectedKey:e.getPage().getModel().getOptions().selectedKey,createLinkCallback:this.createLinkCallback})}render(){(0,c.fF)("TableFormView.render",this.getCtrl().getModel().getFullName());const e=this.getCtrl();return(0,r.jsxs)("div",Object.assign({className:`${this.getCssClassNames()} full flex-column grid-gap-5`,style:this.getStyle()},{children:[this.renderToolbar(),this.renderGrid(),e.getModel().hasDefaultPersistentDataSource()&&this.renderPaging()]}))}}class TableFormController extends FormController{constructor(){super(...arguments),this.fields={},this.state={updated:Date.now()},this.grid=null,this.onGridCreate=e=>{this.grid=e},this.onNewClick=async e=>{console.debug("TableFormController.onNewClick"),await this.new()},this.onRefreshClick=async e=>{console.debug("TableFormController.onRefreshClick",this.getModel().getFullName()),await this.getModel().refresh()},this.onDeleteClick=async e=>{console.debug("TableFormController.onDeleteClick",this.getModel().getFullName(),this.grid.getActiveRowKey());await this.getApp().confirm({message:this.getModel().getApp().getText().form.areYouSure})&&await this.getModel().getDefaultDataSource().delete(this.grid.getActiveRowKey())},this.onGridCellDblClick=async(e,t)=>{if("form"===this.getModel().getAttr("editMethod"))this.getPage().getModel().isSelectMode()?await this.getPage().selectRow(t):await this.edit(t)},this.onGridLinkClick=async e=>{console.debug("TableFormController.onGridLinkClick",e),await this.edit(e)},this.onGridDeleteKeyDown=async(e,t)=>{if(console.debug("TableFormController.onGridDeleteKeyDown",e,t),"disabled"!==this.getModel().getAttr("deleteRowMode")){await this.getApp().confirm({message:this.getModel().getApp().getText().form.areYouSure})&&await this.getModel().getDefaultDataSource().delete(t)}},this.onModelRefresh=async e=>{console.debug("TableFormController.onModelRefresh",this.getModel().getFullName(),e),this.view&&(this.invalidate(),await this.rerender())},this.onModelInsert=async e=>{if(console.debug("TableFormController.onModelInsert",this.getModel().getFullName(),e),this.view){if(this.grid&&e.source)for(const t of e.inserts)this.grid.setActiveRowKey(t);this.invalidate(),await this.rerender()}},this.onModelUpdate=async e=>{if(console.debug("TableFormController.onModelUpdate",this.getModel().getFullName(),e,this.view),this.view){if(this.grid)for(const t in e.updates)if(this.grid.getActiveRowKey()===t){const n=e.updates[t];t!==n&&this.grid.setActiveRowKey(n)}this.invalidate(),await this.rerender()}},this.onModelDelete=async e=>{if(console.debug("TableFormController.onModelDelete",this.getModel().getFullName(),e),this.view){if(this.grid)for(const t of e.deletes)this.grid.getActiveRowKey()===t&&this.grid.setActiveRowKey(null);this.invalidate(),await this.rerender()}},this.onGridSelectionChange=async e=>{this.invalidate(),await this.getPage().rerender()},this.isRowSelected=()=>!!this.grid&&!!this.grid.getActiveRowKey(),this.onFrameChanged=async e=>{console.debug("TableFormController.onFrameChanged",e);let t=parseInt(e);console.debug("frame:",t);const n=this.getModel().getDefaultDataSource().getFramesCount();t<1&&(t=1),t>n&&(t=n),this.getModel().getDefaultDataSource().setFrame(t),this.getModel().getDefaultDataSource().refresh(),await this.rerender()},this.onNextClick=async()=>{console.debug("TableFormController.onNextClick");const e=this.getModel().getDefaultDataSource().getFrame()+1;this.getModel().getDefaultDataSource().setFrame(e),this.getModel().getDefaultDataSource().refresh(),await this.rerender()},this.onPreviousClick=async()=>{console.debug("TableFormController.onPreviousClick");const e=this.getModel().getDefaultDataSource().getFrame()-1;this.getModel().getDefaultDataSource().setFrame(e),this.getModel().getDefaultDataSource().refresh(),this.rerender()}}getViewClass(){return super.getViewClass()||TableFormView}init(){super.init(),this.getModel().on("refresh",this.onModelRefresh),this.getModel().on("update",this.onModelUpdate),this.getModel().on("delete",this.onModelDelete),this.getModel().on("insert",this.onModelInsert)}deinit(){this.getModel().off("refresh",this.onModelRefresh),this.getModel().off("update",this.onModelUpdate),this.getModel().off("delete",this.onModelDelete),this.getModel().off("insert",this.onModelInsert),super.deinit()}async new(){if("oneclick"===this.getModel().getAttr("newRowMode")){const e={};this.getModel().fillDefaultValues(e),await this.getModel().getDefaultDataSource().insert(e)}else if("editform"===this.getModel().getAttr("newRowMode")){if(!this.getModel().getAttr("itemEditPage"))throw new Error(`[${this.getModel().getFullName()}] itemEditPage is empty`);await this.openPage({name:this.getModel().getAttr("itemEditPage"),newMode:!0,modal:!0})}else if("createform"===this.getModel().getAttr("newRowMode")){if(!this.getModel().getAttr("itemCreatePage"))throw new Error(`[${this.getModel().getFullName()}] itemCreatePage is empty`);await this.openPage({name:this.getModel().getAttr("itemCreatePage"),newMode:!0,modal:!0})}else if("oneclick editform"===this.getModel().getAttr("newRowMode")){if(!this.getModel().getAttr("itemEditPage"))throw new Error(`[${this.getModel().getFullName()}] itemEditPage is empty`);const e={};this.getModel().fillDefaultValues(e);const t=await this.getModel().getDefaultDataSource().insert(e),n=this.getModel().getDefaultDataSource().getAttr("database"),r=this.getModel().getDefaultDataSource().getAttr("table"),[s]=t[n][r].insert;await this.openPage({name:this.getModel().getAttr("itemEditPage"),modal:!0,params:Object.assign({},DataSource.keyToParams(s))})}else if("oneclick createform"===this.getModel().getAttr("newRowMode")){if(!this.getModel().getAttr("itemCreatePage"))throw new Error(`[${this.getModel().getFullName()}] itemCreatePage is empty`);const e={};this.getModel().fillDefaultValues(e);const t=await this.getModel().getDefaultDataSource().insert(e),n=this.getModel().getDefaultDataSource().getAttr("database"),r=this.getModel().getDefaultDataSource().getAttr("table"),[s]=t[n][r].insert;await this.openPage({name:this.getModel().getAttr("itemCreatePage"),modal:!0,params:Object.assign({},DataSource.keyToParams(s))})}}async edit(e){if(!this.getModel().getAttr("itemEditPage"))throw new Error(`${this.getModel().getFullName()}: itemEditPage is empty`);try{await this.openPage({name:this.getModel().getAttr("itemEditPage"),modal:!0,params:Object.assign({},DataSource.keyToParams(e))})}catch(e){throw e.message=`${this.getModel().getFullName()} edit: ${e.message}`,e}}getActiveRow(){const e=this.grid.getActiveRowKey();if(!e)throw new Error(`${this.getModel().getFullName()}: no active row key`);return this.getModel().getDefaultDataSource().getRow(e)}canPrev(){return this.getModel().getDefaultDataSource().getFrame()>1}canNext(){const e=this.getModel().getDefaultDataSource();return e.getFrame()<e.getFramesCount()}getSelectedRowKey(){return this.grid?this.grid.getActiveRowKey():null}isActionEnabled(e){return this.isRowSelected()}getField(e){return this.fields[e]}}e.Wt.registerGlobalClass(TableFormController);class TableFormDateFieldView extends TableFormFieldView{render(){const e=this.props.row,t=this.getCtrl();return(0,r.jsx)("div",Object.assign({className:`${this.getCssClassNames()} ellipsis`,style:this.getStyle(e)},{children:(0,r.jsx)("span",Object.assign({ref:this.span},{children:t.getValueForWidget(e)}))}))}}class TableFormDateFieldController extends TableFormFieldController{getViewClass(){return super.getViewClass()||TableFormDateFieldView}getValueForWidget(t){const n=this.getModel().getValue(t);return n?e.Gq.formatDate(n,this.getFormat()||"{DD}.{MM}.{YYYY} {hh}:{mm}:{ss}"):""}}e.Wt.registerGlobalClass(TableFormDateFieldController);class RowFormTextAreaFieldView extends RowFormFieldView{constructor(e){super(e),this.onFocus=async e=>{this.addCssClass("focus"),await this.rerender()},this.onBlur=async e=>{this.removeCssClass("focus"),await this.rerender()},this.state={classList:[]}}render(){const t=this.getCtrl();return(0,r.jsx)("div",Object.assign({className:this.getCssClassNames()},{children:(0,r.jsx)(e.Kx,{classList:[`${this.getCssBlockName()}__textarea`],onCreate:this.onWidgetCreate,value:t.getValueForWidget(),readOnly:!t.isEditable(),disabled:!t.isEditable(),onChange:t.onChange,placeholder:t.getPlaceholder(),rows:t.getModel().getRows(),cols:t.getModel().getCols(),onFocus:this.onFocus,onBlur:this.onBlur})}))}}class RowFormTextAreaFieldController extends RowFormFieldController{getViewClass(){return super.getViewClass()||RowFormTextAreaFieldView}}a.W.registerGlobalClass(RowFormTextAreaFieldController);class RowFormPasswordFieldView extends RowFormFieldView{constructor(e){super(e),this.onCloseClick=async e=>{const t=this.getCtrl();this.getWidget().state.value="",this.getWidget().setState({value:""}),t.onChange(""),this.getWidget().getElement().focus()},this.onFocus=async e=>{this.addCssClass("focus"),await this.rerender()},this.onBlur=async e=>{this.removeCssClass("focus"),await this.rerender()},this.onIconClick=e=>{this.setState((e=>({type:"password"===e.type?"text":"password"})))},this.state={classList:[],type:"password"}}isCloseVisible(){return!!this.getCtrl().isEditable()&&(this.getWidget()?""!==this.getWidget().state.value:void 0!==this.props.value)}render(){const t=this.getCtrl();return(0,r.jsxs)("div",Object.assign({className:this.getCssClassNames()},{children:[(0,r.jsx)(e.zC,{classList:[`${this.getCssBlockName()}__input`],type:this.state.type,value:t.getValueForWidget(),readOnly:!t.isEditable(),disabled:!t.isEditable(),autoFocus:t.isAutoFocus(),placeholder:t.getPlaceholder()||null,autocomplete:t.getAutocomplete(),onCreate:this.onWidgetCreate,onChange:t.onChange,onFocus:this.onFocus,onBlur:this.onBlur}),(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__close ${this.isCloseVisible()?"visible":""}`,onClick:this.onCloseClick},{children:(0,r.jsx)(e.Tw,{})})),(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__icon`,onClick:this.onIconClick},{children:"password"===this.state.type?(0,r.jsx)(e.K3,{}):(0,r.jsx)(e.X0,{})}))]}))}}class RowFormPasswordFieldController extends RowFormFieldController{getViewClass(){return super.getViewClass()||RowFormPasswordFieldView}}a.W.registerGlobalClass(RowFormPasswordFieldController);class TableFormCheckBoxFieldView extends TableFormFieldView{render(){const t=this.props.row,n=this.getCtrl();return(0,r.jsx)("div",Object.assign({className:this.getCssClassNames(),style:Object.assign(Object.assign({},this.getStyle(t)),{textAlign:n.getAlign()})},{children:(0,r.jsx)(e.Jg,{ref:this.span,checked:n.getValueForWidget(t),readOnly:!0,disabled:!0})}))}}class TableFormComboBoxFieldView extends TableFormFieldView{render(){const e=this.props.row,t=this.getCtrl();return(0,r.jsx)("div",Object.assign({className:`${this.getCssClassNames()} ellipsis`,style:this.getStyle(e)},{children:(0,r.jsx)("span",Object.assign({ref:this.span},{children:t.getValueForWidget(e)}))}))}}class TableFormDateTimeFieldView extends TableFormFieldView{render(){const e=this.props.row,t=this.getCtrl();return(0,r.jsx)("div",Object.assign({className:`${this.getCssClassNames()} ellipsis`,style:this.getStyle(e)},{children:(0,r.jsx)("span",Object.assign({ref:this.span},{children:t.getValueForWidget(e)}))}))}}class TableFormDateTimeFieldController extends TableFormFieldController{getViewClass(){return super.getViewClass()||TableFormDateTimeFieldView}getValueForWidget(t){const n=this.getModel().getValue(t);return n?e.Gq.formatDate(n,this.getFormat()||"{DD}.{MM}.{YYYY} {hh}:{mm}:{ss}"):""}}e.Wt.registerGlobalClass(TableFormDateTimeFieldController);class RowFormDateTimeFieldView extends RowFormFieldView{constructor(){super(...arguments),this.onClear2=async()=>{this.getCtrl().onChange2(null)}}isCloseVisible(){if(this.props.readOnly)return!1;const{ctrl:e}=this.props;return e.widget2?""!==e.widget2.state.value:void 0!==this.props.value}renderDatePart(){const t=this.getCtrl();return(0,r.jsx)(e.Ol,{classList:[`${this.getCssBlockName()}__dropdown-date-picker`],onCreate:this.onWidgetCreate,value:t.getValueForWidget(),readOnly:!t.isEditable(),onChange:t.onChange,placeholder:t.getPlaceholder(),format:t.getFormat(),oldDates:this.props.oldDates,highlightedDate:t.getHighlightedDate?t.getHighlightedDate():null,selectToday:t.getSelectToday?t.getSelectToday():null,minDate:t.getMinDate?t.getMinDate():null,debug:t.getApp().isDebugMode()})}renderTimePart(){const t=this.getCtrl();return(0,r.jsx)(e.jh,{classList:[`${this.getCssBlockName()}__time-box`],onCreate:t.onView2Create,readOnly:!t.isEditable(),value:t.getValueForTime(),onChange:t.onChange2,onBlur:t.isValidateOnBlur2()?t.onBlur2:null,placeholder:t.getPlaceholder2(),onClear:this.onClear2})}getMode(){return this.getCtrl().state.value?"datetime":"date"}render(){return(0,r.jsxs)("div",Object.assign({className:`${this.getCssClassNames()} ${this.getMode()}`,style:this.getStyle(this.getCtrl().getRow())},{children:[this.renderDatePart(),this.renderTimePart()]}))}}class RowFormDateTimeFieldController extends RowFormFieldController{constructor(e,t){super(e,t),this.widget2=null,this.defaultValue=0,this.onView2Create=e=>{this.widget2=e},this.onChange2=(e,t=!0)=>{if(this.resetErrors(),this.resetErrors2(),this.rerender(),this.isValidateOnChange2()){try{this.setValueFromView2(e)}catch(e){console.debug(`${this.getModel().getFullName()}: cannot parse time: ${e.message}`),this.state.parseError2=e.message}if(this.state.parseError2||(this.validate2(),this.isValid()&&this.copyValueToModel()),this.refreshChangedState(),t){try{this.emit("change",{value:e})}catch(e){console.error("unhandled change event error:",this.getModel().getFullName(),e)}this.getParent().onFieldChange({source:this})}}},this.onBlur2=(e,t=!0)=>{if(console.debug("RowFormDateTimeFieldController.onBlur2",e),this.isEditable()){this.resetErrors2(),this.rerender();try{this.setValueFromView2(e)}catch(e){console.debug(`${this.getModel().getFullName()}: cannot parse time: ${e.message}`),this.state.parseError2=e.message}if(this.state.parseError2||(this.validate2(),this.isValid()&&this.copyValueToModel()),this.refreshChangedState(),t){try{this.emit("change",{value:e})}catch(e){console.error("unhandled change event error:",this.getModel().getFullName(),e)}this.getParent().onFieldChange({source:this})}}},this.state.parseError2=null,this.state.error2=null}getViewClass(){return super.getViewClass()||RowFormDateTimeFieldView}getValueForWidget(){return this.getValue()}getValueForTime(){const e=this.getValue();if(e){const t=60*e.getHours()+e.getMinutes();if(t!==this.defaultValue)return t}return null}setValueFromWidget(t){if(null===t)this.state.parseError2=null,this.resetErrors2(),this.widget2&&this.widget2.setValue(null);else{const[n,r]=e.DB.splitTime(this.defaultValue);t.setHours(n,r)}this.setValue(t)}getPlaceholder2(){return e.DB.getStringValue(this.defaultValue)}getDefaultValue(){return this.defaultValue}setDefaultValue2(t){if("string"==typeof t)this.defaultValue=e.DB.getIntegerValue(t);else{if(t>=1440)throw new Error(`wrong default value: ${t}`);this.defaultValue=t}this.widget2&&null===this.widget2.getValue()&&this.state.value&&this.setValue2(null)}setValueFromView2(e){if(isNaN(e))throw new Error(this.getTimeErrorText());this.setValue2(e)}getTimeErrorText(){return this.getModel().getApp().getText().field.timeNotValid}setValue2(t){const n=null!==t?t:this.defaultValue,[r,s]=e.DB.splitTime(n);this.state.value.setHours(r,s)}validate2(){this.state.error2=this.getError2()}getError2(){if(this.widget2)try{this.widget2.getValue()}catch(e){return`can't parse time: ${e.message}`}return null}isParseError2(){return null!==this.state.parseError2}resetErrors2(){this.setError2(null),this.state.parseError2=null}setError2(e){this.state.error2=e}getErrorMessage2(){return this.state.parseError2?this.state.parseError2:this.state.error2}isValid2(){return null===this.state.parseError2&&null===this.state.error2}refill(){this.widget2&&(super.refill(),this.widget2.setValue(this.getValueForTime()),this.resetErrors2(),this.refreshChangedState())}isParseError(){return super.isParseError()||this.isParseError2()}isValid(){return super.isValid()&&this.isValid2()}getErrorMessage(){return null===super.getErrorMessage()&&null===this.getErrorMessage2()?null:[...super.getErrorMessage()?[super.getErrorMessage()]:[],...this.getErrorMessage2()?[this.getErrorMessage2()]:[]].join(", ")}isValidateOnChange2(){return!0}isValidateOnBlur2(){return!1}}a.W.registerGlobalClass(RowFormDateTimeFieldController);class TableFormComboBoxFieldController extends TableFormFieldController{constructor(){super(...arguments),this.onListUpdate=async e=>{this.getForm().invalidate(),await this.getForm().rerender()}}init(){super.init();const e=this.getModel().getComboBoxDataSource();e.on("insert",this.onListUpdate),e.on("update",this.onListUpdate),e.on("delete",this.onListUpdate)}deinit(){const e=this.getModel().getComboBoxDataSource();e.off("insert",this.onListUpdate),e.off("update",this.onListUpdate),e.off("delete",this.onListUpdate),super.deinit()}getViewClass(){return super.getViewClass()||TableFormComboBoxFieldView}getValueForWidget(e){const t=this.getModel().getValue(e),n=this.getModel().valueToRaw(t);if(void 0===n||"null"===n)return"";const r=this.getModel().findRowByRawValue(n);return r?this.valueToString(this.getModel().getDisplayValue(r)):`[no row for id: ${n}]`}}a.W.registerGlobalClass(TableFormComboBoxFieldController);class TableFormCheckBoxFieldController extends TableFormFieldController{getViewClass(){return super.getViewClass()||TableFormCheckBoxFieldView}getValueForWidget(e){return this.getModel().getValue(e)}getAlign(){return"center"}}a.W.registerGlobalClass(TableFormCheckBoxFieldController);class RowFormRadioFieldView extends RowFormFieldView{constructor(){super(...arguments),this.onClick=async e=>{console.debug("RowFormRadioFieldView.onClick",e.currentTarget.dataset.value);let t=JSON.parse(e.currentTarget.dataset.value);this.getCtrl().getValue()!==t&&await this.getCtrl().onChangePure(t)}}render(){const e=this.getCtrl().getValue();return(0,r.jsx)("div",Object.assign({className:this.getCssClassNames()},{children:this.getCtrl().getItems().map((t=>(0,r.jsx)("input",{className:`${this.getCssBlockName()}__toggle ${e===t.value?"selected":""}`,type:"button",value:t.title||t.value,disabled:!this.getCtrl().isEditable(),"data-value":JSON.stringify(t.value),onClick:this.onClick},t.value)))}))}}class RowFormRadioFieldController extends RowFormFieldController{getViewClass(){return super.getViewClass()||RowFormRadioFieldView}getItems(){try{return this.getRows().map((e=>({value:this.getModel().getValueValue(e),title:this.getModel().getDisplayValue(e)})))}catch(e){throw e.message=`${this.getModel().getFullName()}: ${e.message}`,e}}getRows(){return this.getModel().getDataSource().getRows()}}a.W.registerGlobalClass(RowFormRadioFieldController);class RowFormCheckBoxFieldView extends RowFormFieldView{constructor(){super(...arguments),this.onCheckBoxChange=(e,t)=>{this.getCtrl().onChange(e)}}render(){const t=this.getCtrl();return(0,r.jsx)("div",Object.assign({className:this.getCssClassNames()},{children:(0,r.jsx)(e.Jg,{onCreate:this.onWidgetCreate,checked:t.getValueForWidget(),readOnly:!t.isEditable(),disabled:!t.isEditable(),onChange:this.onCheckBoxChange})}))}}class RowFormCheckBoxFieldController extends RowFormFieldController{getViewClass(){return super.getViewClass()||RowFormCheckBoxFieldView}getValueForWidget(){return this.getValue()}setValueFromWidget(e){this.setValue(e)}}a.W.registerGlobalClass(RowFormCheckBoxFieldController);class ModalController extends Controller{constructor(e={}){if(super(),!e.app)throw new Error("no app");if(!e.id)throw new Error("no id");this.options=e}getId(){return this.options.id}getApp(){return this.options.app}async close(){await this.getApp().closeModal(this),this.options.onClose&&this.options.onClose()}}class ImageDialogView extends View{constructor(e){super(e),this.el=t.createRef()}render(){console.debug("ImageDialogView.render");const{ctrl:t}=this.props;return(0,r.jsxs)("div",Object.assign({className:this.getCssClassNames(),ref:this.el,tabIndex:0,onKeyDown:this.getCtrl().onKeyDown},{children:[(0,r.jsx)("img",{className:`${this.getCssBlockName()}__image`,src:t.getSrc(),onClick:t.onImageClick}),(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__close`,onClick:t.onCloseClick},{children:(0,r.jsx)(e.BX,{})}))]}))}componentDidMount(){this.getElement().focus()}}class ImageDialogController extends ModalController{constructor(e){if(super(e),this.onCloseClick=async e=>{await this.close()},this.onKeyDown=async e=>{"Escape"===e.key&&await this.close()},this.onImageClick=async e=>{console.debug("ImageDialogController.onImageClick"),await this.close()},!e.src)throw new Error("no src")}getViewClass(){return console.debug("ImageDialogController.getViewClass"),ImageDialogView}getSrc(){return this.options.src}}class RowFormFileFieldView extends RowFormFieldView{constructor(){super(...arguments),this.image=t.createRef(),this.div=t.createRef(),this.input=t.createRef(),this.onClearClick=e=>{this.getCtrl().onChange("")},this.onChange=async t=>{const n=t.target.files[0];if(n){const t=await e.Iq.readFileAsDataURL(n);this.getCtrl().onChange(t)}},this.onImageClick=async e=>{console.debug("RowFormFileFieldView.onImageClick");const t=this.getCtrl(),n=t.getApp(),r=t.getValueForWidget(),s=new ImageDialogController({app:n,id:n.getNewId(),src:r,onClose:()=>{console.debug("onClose"),this.getCtrl().getPage().getView().getElement().focus()}});await n.openModal(s)},this.onImageIconClick=async e=>{console.debug("RowFormFileFieldView.onImageIconClick"),this.getInput().click()}}getImage(){return this.image.current}getDiv(){return this.div.current}getInput(){return this.input.current}updateSize(){if(this.getImage()){const e=this.getImage().getNaturalSize();this.getDiv().innerText=`${e[0]}${e[1]}`}}render(){const t=this.getCtrl(),n=t.getRow(),s=t.getValueForWidget();return(0,r.jsxs)("div",Object.assign({className:this.getCssClassNames(),style:this.getStyle(n)},{children:[s?(0,r.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__image-block`},{children:[(0,r.jsx)(e.Ee,{classList:[`${this.getCssBlockName()}__image`],ref:this.image,src:s,onClick:this.onImageClick}),(0,r.jsx)("span",{className:`${this.getCssBlockName()}__size`,ref:this.div}),(0,r.jsx)("span",Object.assign({className:`${this.getCssBlockName()}__length`},{children:h.G.formatNumber(s.length)}))]})):(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__image-icon`,onClick:this.onImageIconClick},{children:(0,r.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:96,height:96,viewBox:"0 0 48 48"},{children:(0,r.jsx)("path",{d:"M38.65 15.3V11h-4.3V8h4.3V3.65h3V8H46v3h-4.35v4.3ZM4.7 44q-1.2 0-2.1-.9-.9-.9-.9-2.1V15.35q0-1.15.9-2.075.9-.925 2.1-.925h7.35L15.7 8h14v3H17.1l-3.65 4.35H4.7V41h34V20h3v21q0 1.2-.925 2.1-.925.9-2.075.9Zm17-7.3q3.6 0 6.05-2.45 2.45-2.45 2.45-6.1 0-3.6-2.45-6.025Q25.3 19.7 21.7 19.7q-3.65 0-6.075 2.425Q13.2 24.55 13.2 28.15q0 3.65 2.425 6.1Q18.05 36.7 21.7 36.7Zm0-3q-2.4 0-3.95-1.575-1.55-1.575-1.55-3.975 0-2.35 1.55-3.9 1.55-1.55 3.95-1.55 2.35 0 3.925 1.55 1.575 1.55 1.575 3.9 0 2.4-1.575 3.975Q24.05 33.7 21.7 33.7Zm0-5.5Z"})}))})),(0,r.jsxs)("div",Object.assign({className:`${this.getCssBlockName()}__toolbar`},{children:[(0,r.jsx)("input",{ref:this.input,type:"file",onChange:this.onChange,disabled:!t.isEditable(),style:{display:s?void 0:"none"}}),!!s&&(0,r.jsx)(e.zx,Object.assign({onClick:this.onClearClick,enabled:t.isEditable()},{children:this.getCtrl().getApp().getModel().getText().field.clear}))]}))]}))}componentDidMount(){setTimeout((()=>this.updateSize()),0)}componentDidUpdate(e,t,n){setTimeout((()=>this.updateSize()),0)}}class RowFormFileFieldController extends RowFormFieldController{getViewClass(){return super.getViewClass()||RowFormFileFieldView}}a.W.registerGlobalClass(RowFormFileFieldController);class RowFormPhoneFieldView extends RowFormFieldView{constructor(e){super(e),this.onClear=async e=>{this.getCtrl().onChange(""),setTimeout((()=>{this.getWidget().getElement().focus()}),0)},this.onFocus=async e=>{this.addCssClass("focus"),await this.rerender()},this.onBlur=async e=>{this.removeCssClass("focus"),this.getCtrl().onBlur(e)},this.state={classList:[]}}isCloseVisible(){const e=this.getCtrl();return!!e.isEditable()&&""!==e.getValueForWidget()}renderPhoneBox(){const t=this.getCtrl();return(0,r.jsx)(e.Fg,{classList:[`${this.getCssBlockName()}__input`],value:t.getValueForWidget(),readOnly:!t.isEditable(),disabled:!t.isEditable(),autoFocus:t.isAutoFocus(),placeholder:t.getPlaceholder()||null,autocomplete:t.getAutocomplete(),onCreate:this.onWidgetCreate,onChange:t.onChange,onFocus:this.onFocus,onBlur:this.onBlur})}renderClearButton(){return(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__close ${this.isCloseVisible()?"visible":""}`,onMouseDown:this.onClear},{children:(0,r.jsx)(e.Tw,{})}))}renderPhoneIcon(){return(0,r.jsx)("div",Object.assign({className:`${this.getCssBlockName()}__icon`},{children:(0,r.jsx)(e.qW,{})}))}render(){return(0,r.jsxs)("div",Object.assign({className:this.getCssClassNames()},{children:[this.renderPhoneBox(),this.renderClearButton(),this.renderPhoneIcon()]}))}}class RowFormPhoneFieldController extends RowFormFieldController{getViewClass(){return super.getViewClass()||RowFormPhoneFieldView}getPhoneFormatErrorText(){return this.getModel().getApp().getText().form.phoneNumberFormatError}getError(){const e=super.getError();if(e)return e;const t=this.getValue();return t&&"+7"===t.substr(0,2)&&t.length<12?this.getPhoneFormatErrorText():null}}a.W.registerGlobalClass(RowFormPhoneFieldController);class TableFormPhoneFieldView extends TableFormFieldView{render(){const t=this.props.row;return(0,r.jsx)("div",Object.assign({className:`${this.getCssClassNames()} ellipsis`,style:this.getStyle(t)},{children:(0,r.jsx)("span",Object.assign({ref:this.span},{children:e.Fg.formatPhoneNumber(this.getCtrl().getValueForWidget(t))}))}))}}class TableFormPhoneFieldController extends TableFormFieldController{getViewClass(){return super.getViewClass()||TableFormPhoneFieldView}}a.W.registerGlobalClass(TableFormPhoneFieldController);class RowFormCheckBoxListFieldView extends RowFormFieldView{getItems(){const e=this.getCtrl();try{return e.getRows().map((t=>e.getItemFromRow(t)))}catch(t){throw t.message=`${e.getModel().getFullName()}: ${t.message}`,t}}renderCheckBoxList(){const t=this.getCtrl();return(0,r.jsx)(e.$,{name:t.getModel().getFullName(),classList:[`${this.getCssBlockName()}__checkboxlist`],onCreate:this.onWidgetCreate,value:t.getValueForWidget(),readOnly:!t.isEditable(),onChange:t.onChange,items:this.getItems()})}render(){return(0,r.jsx)("div",Object.assign({className:this.getCssClassNames()},{children:this.renderCheckBoxList()}))}}class RowFormCheckBoxListFieldController extends RowFormFieldController{constructor(){super(...arguments),this.onListInsert=async e=>{console.debug("RowFormCheckBoxListFieldController.onListInsert"),await this.rerender()},this.onListUpdate=async e=>{await this.rerender()},this.onListDelete=async e=>{await this.rerender()}}init(){super.init();const e=this.getModel().getDataSource();e.on("insert",this.onListInsert),e.on("update",this.onListUpdate),e.on("delete",this.onListDelete)}deinit(){const e=this.getModel().getDataSource();e.off("insert",this.onListInsert),e.off("update",this.onListUpdate),e.off("delete",this.onListDelete),super.deinit()}getViewClass(){return super.getViewClass()||RowFormCheckBoxListFieldView}getRows(){return this.getModel().getDataSource().getRows()}getValueForWidget(){return this.getValue()}setValueFromWidget(e){this.setValue(e)}getItemFromRow(e){return{value:this.valueToString(this.getModel().getValueValue(e)),title:this.getModel().getDisplayValue(e)}}}a.W.registerGlobalClass(RowFormCheckBoxListFieldController);class RowFormLinkFieldView extends RowFormFieldView{render(){const e=this.getCtrl();let t=e.getValueForWidget(),n=e.getValueForWidget();const s=e.getDisplayValue();s&&(n=s);const i=e.getModel().getAttr("page");if(i){const n=e.getValueForWidget();t=e.getPage().createOpenInNewLink(i,(0,o.DW)([n]))}return(0,r.jsx)("div",Object.assign({className:this.getCssClassNames()},{children:(0,r.jsx)("a",Object.assign({href:t,onClick:e.onClick,target:"_blank"},{children:n}))}))}}class RowFormLinkFieldController extends RowFormFieldController{constructor(){super(...arguments),this.onClick=e=>{console.debug("RowFormLinkFieldController.onClick",e);const t=this.getModel().getAttr("page");t&&(e.preventDefault(),this.openPage({name:t,params:{key:this.getValue()}})),this.emit({source:this})}}getViewClass(){return super.getViewClass()||RowFormLinkFieldView}getDisplayValue(){const e=this.getModel().getAttr("displayColumn");if(e){const t=this.getModel().getDefaultDataSource(),n=t.getValue(t.getSingleRow(),e);return JSON.parse(n)}return null}}a.W.registerGlobalClass(RowFormLinkFieldController);class TableFormLinkFieldView extends TableFormFieldView{render(){const e=this.props.row,t=this.getCtrl();return(0,r.jsx)("div",Object.assign({className:`${this.getCssClassNames()} ellipsis`,style:this.getStyle(e)},{children:(0,r.jsx)("a",Object.assign({href:"#",onClick:t.onClick},{children:t.getValueForWidget(e)}))}))}}class TableFormLinkFieldController extends TableFormFieldController{constructor(){super(...arguments),this.onClick=e=>{console.debug("TableFormLinkFieldController.onClick",e),e.preventDefault(),this.emit("click",{source:this})}}getViewClass(){return super.getViewClass()||TableFormLinkFieldView}}a.W.registerGlobalClass(TableFormLinkFieldController);class RowFormTimeFieldView extends RowFormFieldView{constructor(){super(...arguments),this.onCloseClick=async e=>{console.debug("RowFormTimeFieldView.onCloseClick")}}isCloseVisible(){return!this.props.readOnly&&(this.getWidget()?""!==this.getWidget().state.value:void 0!==this.props.value)}render(){const t=this.getCtrl();return(0,r.jsxs)("div",Object.assign({className:this.getCssClassNames()},{children:[(0,r.jsx)(e.DB,{onCreate:this.onWidgetCreate,value:t.getValueForWidget(),readOnly:!t.isEditable(),onChange:t.onChange,onBlur:t.onBlur,placeholder:t.getPlaceholder()}),(0,r.jsx)("div",Object.assign({className:"close "+(this.isCloseVisible()?"visible":""),onClick:this.onCloseClick},{children:(0,r.jsx)(e.Tw,{})}))]}))}}class RowFormTimeFieldController extends RowFormFieldController{constructor(){super(...arguments),this.defaultValue=null}getViewClass(){return super.getViewClass()||RowFormTimeFieldView}getValueForWidget(){return this.getValue()}setValueFromWidget(e){if(isNaN(e))throw new Error("wrong time");this.setValue(e)}getDefaultValue(){return this.defaultValue}setDefaultValue2(t){if("string"==typeof t)this.defaultValue=e.DB.getIntegerValue(t);else{if(t>=1440)throw new Error(`wrong default value: ${t}`);this.defaultValue=t}}getPlaceholder(){return null!==this.defaultValue?e.DB.getStringValue(this.defaultValue):super.getPlaceholder()}}a.W.registerGlobalClass(RowFormTimeFieldController)})(),window.qforms=__webpack_exports__})();